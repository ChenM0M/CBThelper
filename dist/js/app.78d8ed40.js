(()=>{"use strict";var t={781:(t,e,s)=>{var o=s(751),i=s(220),n=s(108),a=s(38);const l=(t,e=!1)=>{const s={NODE_ENV:"production",VUE_APP_AUTO_ANALYSIS_ENABLED:"true",VUE_APP_DEBUG_MODE:"true",VUE_APP_EMOTION_MULTI_SELECT_ENABLED:"true",VUE_APP_LLM_API_KEY:"sk-f05065248a234ffc908c1fcae3f70579",VUE_APP_LLM_API_URL:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",VUE_APP_LLM_MODEL_NAME:"deepseek-v3",VUE_APP_MAX_ANALYSIS_RETRIES:"3",VUE_APP_MAX_THOUGHT_LENGTH:"500",VUE_APP_WISDOM_COMPANION_ENABLED:"true",BASE_URL:"/"}[t]||{NODE_ENV:"production",VUE_APP_AUTO_ANALYSIS_ENABLED:"true",VUE_APP_DEBUG_MODE:"true",VUE_APP_EMOTION_MULTI_SELECT_ENABLED:"true",VUE_APP_LLM_API_KEY:"sk-f05065248a234ffc908c1fcae3f70579",VUE_APP_LLM_API_URL:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",VUE_APP_LLM_MODEL_NAME:"deepseek-v3",VUE_APP_MAX_ANALYSIS_RETRIES:"3",VUE_APP_MAX_THOUGHT_LENGTH:"500",VUE_APP_WISDOM_COMPANION_ENABLED:"true",BASE_URL:"/"}[`VUE_APP_${t}`];return"true"===s||e},c={llm:{apiUrl:{NODE_ENV:"production",VUE_APP_AUTO_ANALYSIS_ENABLED:"true",VUE_APP_DEBUG_MODE:"true",VUE_APP_EMOTION_MULTI_SELECT_ENABLED:"true",VUE_APP_LLM_API_KEY:"sk-f05065248a234ffc908c1fcae3f70579",VUE_APP_LLM_API_URL:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",VUE_APP_LLM_MODEL_NAME:"deepseek-v3",VUE_APP_MAX_ANALYSIS_RETRIES:"3",VUE_APP_MAX_THOUGHT_LENGTH:"500",VUE_APP_WISDOM_COMPANION_ENABLED:"true",BASE_URL:"/"}.LLM_API_URL||"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",apiKey:{NODE_ENV:"production",VUE_APP_AUTO_ANALYSIS_ENABLED:"true",VUE_APP_DEBUG_MODE:"true",VUE_APP_EMOTION_MULTI_SELECT_ENABLED:"true",VUE_APP_LLM_API_KEY:"sk-f05065248a234ffc908c1fcae3f70579",VUE_APP_LLM_API_URL:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",VUE_APP_LLM_MODEL_NAME:"deepseek-v3",VUE_APP_MAX_ANALYSIS_RETRIES:"3",VUE_APP_MAX_THOUGHT_LENGTH:"500",VUE_APP_WISDOM_COMPANION_ENABLED:"true",BASE_URL:"/"}.LLM_API_KEY||"sk-f05065248a234ffc908c1fcae3f70579",modelName:{NODE_ENV:"production",VUE_APP_AUTO_ANALYSIS_ENABLED:"true",VUE_APP_DEBUG_MODE:"true",VUE_APP_EMOTION_MULTI_SELECT_ENABLED:"true",VUE_APP_LLM_API_KEY:"sk-f05065248a234ffc908c1fcae3f70579",VUE_APP_LLM_API_URL:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",VUE_APP_LLM_MODEL_NAME:"deepseek-v3",VUE_APP_MAX_ANALYSIS_RETRIES:"3",VUE_APP_MAX_THOUGHT_LENGTH:"500",VUE_APP_WISDOM_COMPANION_ENABLED:"true",BASE_URL:"/"}.LLM_MODEL_NAME||"deepseek-v3",maxTokens:1e3,temperature:.7},features:{wisdomCompanionEnabled:l("WISDOM_COMPANION_ENABLED",!0),autoAnalysisEnabled:l("AUTO_ANALYSIS_ENABLED",!0),emotionMultiSelectEnabled:l("EMOTION_MULTI_SELECT_ENABLED",!0)},limits:{maxThoughtLength:parseInt("500")||500,maxAnalysisRetries:parseInt("3")||3},debug:{enabled:l("DEBUG_MODE",!1),logLevel:"info"},messages:{companionDisabled:["æ™ºæ…§ä¼™ä¼´æš‚æ—¶åœ¨èŠ±å›­é‡Œä¼‘æ¯ï¼Œè¯·ç¨åŽå†æ¥ ðŸŒ™","æ¸©å®¤çš„èŠ±æœµä¾ç„¶ä¸ºä½ ç»½æ”¾ï¼Œé™å¾…æ™ºæ…§ä¼™ä¼´å½’æ¥ âœ¨","èŠ±å›­æ­£åœ¨ä¸ºæ™ºæ…§ä¼™ä¼´å‡†å¤‡æ›´èˆ’é€‚çš„çŽ¯å¢ƒ ðŸŒ¸","æ™ºæ…§ä¼™ä¼´åŽ»é‡‡é›†æ–°çš„èŠ±æœµæ™ºæ…§ï¼Œå¾ˆå¿«å°±ä¼šå›žæ¥ ðŸŒ»"],analysisUnavailable:["åˆ†æžåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œä½†ä½ ä¾ç„¶å¯ä»¥è®°å½•ç¾Žå¥½çš„æƒ³æ³• ðŸ’­","ç§å­å·²æ’­ä¸‹ï¼Œé™å¾…èŠ±æœµç»½æ”¾çš„æ—¶åˆ» ðŸŒ±"]},cognitiveDistortions:[{type:"ç¾éš¾åŒ–æ€ç»´",label:"ðŸŒªï¸ é£Žæš´æ”¾å¤§é•œ",description:"æŠŠå°é›¨çœ‹æˆäº†æš´é£Žé›¨"},{type:"éžé»‘å³ç™½",label:"âš«âšª å•è‰²çœ¼é•œ",description:"ä¸–ç•Œå…¶å®žæœ‰å¾ˆå¤šç¾Žä¸½çš„è‰²å½©"},{type:"è¿‡åº¦æ¦‚æ‹¬",label:"ðŸ”„ å•ä¾‹å¾ªçŽ¯",description:"ä¸€æœµèŠ±ä¸ä»£è¡¨æ•´ä¸ªèŠ±å›­"},{type:"æƒ…ç»ªæŽ¨ç†",label:"ðŸ’­ æ„Ÿå—åˆ¤å®˜",description:"å¿ƒæƒ…ä¼šç»™æ€ç»´æˆ´ä¸Šæœ‰è‰²çœ¼é•œ"},{type:"å¿ƒç†è¿‡æ»¤",label:"ðŸ” è´Ÿé¢æ”¾å¤§é•œ",description:"åªçœ‹åˆ°äº†å‡‹è°¢ï¼Œé”™è¿‡äº†æ–°èŠ½"},{type:"è¯»å¿ƒæœ¯",label:"ðŸ”® å¿ƒçµè§£è¯»",description:"åˆ«äººçš„æƒ³æ³•æ¯”ä½ æƒ³è±¡çš„æ›´å¤æ‚"},{type:"æ ‡ç­¾åŒ–",label:"ðŸ·ï¸ å›ºå®šæ ‡ç­¾",description:"äººæ¯”æ ‡ç­¾æ›´ç«‹ä½“æ›´ä¸°å¯Œ"}]};var r=s(992);const d=JSON.parse('{"common":{"loading":"åŠ è½½ä¸­...","save":"ä¿å­˜","cancel":"å–æ¶ˆ","confirm":"ç¡®è®¤","delete":"åˆ é™¤","edit":"ç¼–è¾‘","back":"è¿”å›ž","next":"ä¸‹ä¸€æ­¥","prev":"ä¸Šä¸€æ­¥","skip":"è·³è¿‡","continue":"ç»§ç»­","start":"å¼€å§‹","complete":"å®Œæˆ","close":"å…³é—­"},"navigation":{"mindGarden":"å¿ƒçµèŠ±å›­","dashboard":"æˆé•¿è¶³è¿¹","analysis":"å¿ƒçµæ¸©å®¤","config":"èŠ±å›­è®¾ç½®","about":"å…³äºŽ"},"mindGarden":{"title":"æ¬¢è¿Žå›žåˆ°ä½ çš„å¿ƒçµèŠ±å›­","subtitle":"æ¯ä¸€æ¬¡æŽ¢ç´¢ï¼Œéƒ½æ˜¯æˆé•¿çš„è§è¯","moodCheck":{"title":"ä»Šå¤©çš„å¿ƒæƒ…ï¼Œåƒä»€ä¹ˆé¢œè‰²ï¼Ÿ","customPlaceholder":"æˆ–è€…ç”¨è‡ªå·±çš„è¯æè¿°...","addButton":"æ·»åŠ ","skipButton":"æš‚æ—¶ä¸æƒ³è¯´ï¼Œç›´æŽ¥å¼€å§‹","startButton":"å¼€å§‹ä»Šå¤©çš„æˆé•¿ä¹‹æ—…"},"quickAccess":{"title":"æŽ¢ç´¢ä½ çš„èŠ±å›­","growth":{"title":"æˆé•¿è¶³è¿¹","description":"å›žé¡¾ä½ çš„å¿ƒçµæˆé•¿åŽ†ç¨‹","stats":"å·²è®°å½• {count} æ¬¡æˆé•¿"},"wisdom":{"title":"æ™ºæ…§ä¼™ä¼´","description":"ä¸ŽAIä¼™ä¼´è¿›è¡Œæ·±åº¦å¯¹è¯","hint":"24å°æ—¶é™ªä¼´"},"settings":{"title":"èŠ±å›­è®¾ç½®","description":"ä¸ªæ€§åŒ–ä½ çš„ä½“éªŒ"}},"dailyInspiration":{"title":"ä»Šæ—¥å°æé†’"}},"thoughtRecord":{"title":"å¼€å§‹ä»Šå¤©çš„æˆé•¿ä¹‹æ—…","progress":{"preparing":"å‡†å¤‡å¼€å§‹","situation":"çŽ¯å¢ƒèƒŒæ™¯","thoughts":"å†…å¿ƒå£°éŸ³","emotions":"æ„Ÿå—æ­¤åˆ»"},"welcome":{"title":"å¼€å§‹ä»Šå¤©çš„æˆé•¿ä¹‹æ—…","description":"è®©æˆ‘ä»¬ä¸€èµ·è½»æŸ”åœ°æŽ¢ç´¢å†…å¿ƒçš„æƒ³æ³•ï¼Œæ¯ä¸€ä¸ªæƒ³æ³•éƒ½æ˜¯çè´µçš„ç§å­ï¼Œå€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…ã€‚","startButton":"å¼€å§‹ç§æ¤æƒ³æ³•çš„ç§å­","currentMood":"ä»Šå¤©çš„æ„Ÿå—ï¼š{emotion}","otherMoods":"è¿˜æœ‰å…¶ä»–æ„Ÿå—ï¼š{emotions}"},"situation":{"title":"å‘ç”Ÿäº†ä»€ä¹ˆè®©ä½ æœ‰è¿™æ ·çš„æ„Ÿå—ï¼Ÿ","description":"å¯ä»¥æè¿°ä¸€ä¸‹å½“æ—¶çš„çŽ¯å¢ƒã€æ—¶é—´ã€äººç‰©... å½“ç„¶ï¼Œå¦‚æžœä¸æƒ³è¯´ä¹Ÿå®Œå…¨å¯ä»¥è·³è¿‡ã€‚","placeholder":"é‚£ä¸€åˆ»ï¼Œä½ åœ¨å“ªé‡Œï¼Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆå¯ä»¥è·³è¿‡ï¼‰","skipButton":"æš‚æ—¶è·³è¿‡ï¼Œç›´æŽ¥è¯´æƒ³æ³•","nextButton":"ç»§ç»­æŽ¢ç´¢å†…å¿ƒ"},"thoughts":{"title":"é‚£ä¸€åˆ»ï¼Œå†…å¿ƒå†’å‡ºäº†ä»€ä¹ˆæƒ³æ³•ï¼Ÿ","description":"è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚è¯·è¯šå®žåœ°è®°å½•ä¸‹å½“æ—¶è„‘æµ·ä¸­çš„æƒ³æ³•ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆæ ·çš„ã€‚","placeholder":"æˆ‘å½“æ—¶æƒ³... / æˆ‘è§‰å¾—... / è¿™è®©æˆ‘æ„Ÿåˆ°...","reminder":"ä½ å¾ˆå‹‡æ•¢åœ°é¢å¯¹äº†å†…å¿ƒçš„å£°éŸ³ï¼Œè¿™å°±æ˜¯æˆé•¿çš„å¼€å§‹ã€‚","nextButton":"å¯»æ‰¾æ–°çš„è§†è§’"},"emotions":{"title":"çŽ°åœ¨çš„æ„Ÿè§‰å’Œåˆšæ‰æ¯”ï¼Œæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ","description":"è¯·ç¡®è®¤æˆ–è°ƒæ•´ä½ çš„æƒ…ç»ªé€‰æ‹©ã€‚å³ä½¿ä¹‹å‰é€‰æ‹©è¿‡æƒ…ç»ªï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé‡æ–°è¯„ä¼°å’Œè°ƒæ•´ã€‚","initialText":"ä¹‹å‰é€‰æ‹©çš„æ„Ÿå—ï¼š{emotions}","adjustmentHint":"ä½ å¯ä»¥ä¿æŒè¿™äº›é€‰æ‹©ï¼Œæˆ–è€…é‡æ–°è°ƒæ•´","currentFeelings":"æ­¤åˆ»çš„æ„Ÿå—ï¼š","intensityLabel":"æ„Ÿå—çš„å¼ºåº¦ï¼š{intensity}%","intensityMin":"è½»å¾®","intensityMax":"å¼ºçƒˆ","nextButton":"å’Œæ™ºæ…§ä¼™ä¼´èŠèŠ"},"success":{"title":"è®°å½•å·²ä¿å­˜","message":"ä½ çš„æƒ³æ³•å·²ç»å®‰å…¨åœ°ä¿å­˜åœ¨å¿ƒçµèŠ±å›­ä¸­"}},"dashboard":{"title":"çœ‹çœ‹ä½ å¿ƒçµèŠ±å›­çš„ç¾Žä¸½ç»½æ”¾","loading":"èŠ±å›­æ­£åœ¨ç»½æ”¾...","recentRecord":"æœ€è¿‘ä¸€æ¬¡æˆé•¿è®°å½•ï¼š{time}","welcomeMessage":"ä½ çš„æˆé•¿ä¹‹æ—…å³å°†å¼€å§‹ï¼Œæ¯ä¸€æ­¥éƒ½å€¼å¾—è®°å½•","stats":{"title":"æˆé•¿çš„æ”¶èŽ·","seeds":"æ’­ä¸‹çš„æ€ç»´ç§å­","flowers":"ç»½æ”¾çš„æ™ºæ…§èŠ±æœµ","gardenHealth":"èŠ±å›­çš„ç”ŸæœºçŠ¶æ€"},"actions":{"title":"ç»§ç»­åŸ¹è‚²å¿ƒçµ","plantSeed":{"title":"æ’­ç§æ–°çš„æƒ³æ³•","description":"è®°å½•ä»Šå¤©å¿ƒä¸­èŒèŠ½çš„æ€ç»ª"},"wiseCompanion":{"title":"ä¸Žæ™ºæ…§ä¼™ä¼´å¯¹è¯","description":"æŽ¢ç´¢{count}ä¸ªå¾…åˆ†æžçš„æƒ³æ³•","noRecords":"å…ˆæ’­ä¸‹ä¸€äº›æƒ³æ³•çš„ç§å­å§"}},"insights":{"title":"èŠ±å›­çš„æ™ºæ…§æ´žå¯Ÿ","emotions":{"title":"æƒ…ç»ªèŠ±æœµçš„è‰²å½©","count":"{count}ç§è‰²å½©","bloomCount":"ç»½æ”¾äº†{count}æ¬¡","empty":"è¿˜æ²¡æœ‰æƒ…ç»ªè®°å½•ï¼Œå¼€å§‹æ’­ç§ä½ çš„æ„Ÿå—å§"},"wisdom":{"title":"æ™ºæ…§ä¼™ä¼´çš„å‘çŽ°","dialogCount":"{count}æ¬¡æ·±åº¦å¯¹è¯","biasesFound":"{count}ä¸ªæ€ç»´æ¨¡å¼è¢«å‘çŽ°","alternativeThoughts":"{count}ä¸ªæ–°è§†è§’è¢«é‡‡çº³","empty":"å¼€å§‹ä¸Žæ™ºæ…§ä¼™ä¼´å¯¹è¯ï¼Œå‘çŽ°å†…å¿ƒçš„æ™ºæ…§"}},"encouragement":{"title":"ä»Šæ—¥çš„èŠ±å›­å¯„è¯­"},"records":{"title":"æœ€è¿‘çš„æˆé•¿è®°å½•","stageCompleted":"å·²å®Œæˆæˆé•¿","stageBlooming":"æ™ºæ…§ç»½æ”¾ä¸­","stageGrowing":"ç§å­èŒèŠ½ä¸­","progressCompleted":"æˆé•¿å®Œæˆ","progressBlooming":"æ™ºæ…§èŒå‘","progressGrowing":"ç­‰å¾…æŽ¢ç´¢"}},"emotions":{"pleasant":"æ„‰æ‚¦é˜³å…‰","calm":"å¹³é™å¦‚æ°´","sad":"æœ‰äº›ä½Žè½","anxious":"ç„¦è™‘ä¸å®‰","hopeful":"å……æ»¡å¸Œæœ›","tired":"ç–²æƒ«å€¦æ€ ","angry":"æ„¤æ€’","confused":"å›°æƒ‘"},"config":{"title":"èŠ±å›­è®¾ç½®","language":{"title":"è¯­è¨€è®¾ç½®","description":"é€‰æ‹©ä½ ä¹ æƒ¯çš„è¯­è¨€","current":"å½“å‰è¯­è¨€ï¼š{language}"},"companion":{"title":"æ™ºæ…§ä¼™ä¼´è®¾ç½®","description":"é…ç½®AIåŠ©æ‰‹çš„è¡Œä¸º"},"data":{"title":"æ•°æ®ç®¡ç†","export":"å¯¼å‡ºæ•°æ®","import":"å¯¼å…¥æ•°æ®","clear":"æ¸…é™¤æ‰€æœ‰æ•°æ®"}},"about":{"title":"å…³äºŽå¿ƒçµèŠ±å›­","description":"ä¸€ä¸ªæ¸©æš–çš„CBTè‡ªåŠ©å·¥å…·","version":"ç‰ˆæœ¬ {version}"}}'),u=JSON.parse('{"common":{"loading":"è¼‰å…¥ä¸­...","save":"å„²å­˜","cancel":"å–æ¶ˆ","confirm":"ç¢ºèª","delete":"åˆªé™¤","edit":"ç·¨è¼¯","back":"è¿”å›ž","next":"ä¸‹ä¸€æ­¥","prev":"ä¸Šä¸€æ­¥","skip":"è·³éŽ","continue":"ç¹¼çºŒ","start":"é–‹å§‹","complete":"å®Œæˆ","close":"é—œé–‰"},"navigation":{"mindGarden":"å¿ƒéˆèŠ±åœ’","dashboard":"æˆé•·è¶³è·¡","analysis":"å¿ƒéˆæº«å®¤","config":"èŠ±åœ’è¨­å®š","about":"é—œæ–¼"},"mindGarden":{"title":"æ­¡è¿Žå›žåˆ°ä½ çš„å¿ƒéˆèŠ±åœ’","subtitle":"æ¯ä¸€æ¬¡æŽ¢ç´¢ï¼Œéƒ½æ˜¯æˆé•·çš„è¦‹è­‰","moodCheck":{"title":"ä»Šå¤©çš„å¿ƒæƒ…ï¼Œåƒä»€éº¼é¡è‰²ï¼Ÿ","customPlaceholder":"æˆ–è€…ç”¨è‡ªå·±çš„è©±æè¿°...","addButton":"æ–°å¢ž","skipButton":"æš«æ™‚ä¸æƒ³èªªï¼Œç›´æŽ¥é–‹å§‹","startButton":"é–‹å§‹ä»Šå¤©çš„æˆé•·ä¹‹æ—…"},"quickAccess":{"title":"æŽ¢ç´¢ä½ çš„èŠ±åœ’","growth":{"title":"æˆé•·è¶³è·¡","description":"å›žé¡§ä½ çš„å¿ƒéˆæˆé•·æ­·ç¨‹","stats":"å·²è¨˜éŒ„ {count} æ¬¡æˆé•·"},"wisdom":{"title":"æ™ºæ…§å¤¥ä¼´","description":"èˆ‡AIå¤¥ä¼´é€²è¡Œæ·±åº¦å°è©±","hint":"24å°æ™‚é™ªä¼´"},"settings":{"title":"èŠ±åœ’è¨­å®š","description":"å€‹äººåŒ–ä½ çš„é«”é©—"}},"dailyInspiration":{"title":"ä»Šæ—¥å°æé†’"}},"thoughtRecord":{"title":"é–‹å§‹ä»Šå¤©çš„æˆé•·ä¹‹æ—…","progress":{"preparing":"æº–å‚™é–‹å§‹","situation":"ç’°å¢ƒèƒŒæ™¯","thoughts":"å…§å¿ƒè²éŸ³","emotions":"æ„Ÿå—æ­¤åˆ»"},"welcome":{"title":"é–‹å§‹ä»Šå¤©çš„æˆé•·ä¹‹æ—…","description":"è®“æˆ‘å€‘ä¸€èµ·è¼•æŸ”åœ°æŽ¢ç´¢å…§å¿ƒçš„æƒ³æ³•ï¼Œæ¯ä¸€å€‹æƒ³æ³•éƒ½æ˜¯çè²´çš„ç¨®å­ï¼Œå€¼å¾—è¢«æº«æŸ”å°å¾…ã€‚","startButton":"é–‹å§‹ç¨®æ¤æƒ³æ³•çš„ç¨®å­","currentMood":"ä»Šå¤©çš„æ„Ÿå—ï¼š{emotion}","otherMoods":"é‚„æœ‰å…¶ä»–æ„Ÿå—ï¼š{emotions}"},"situation":{"title":"ç™¼ç”Ÿäº†ä»€éº¼è®“ä½ æœ‰é€™æ¨£çš„æ„Ÿå—ï¼Ÿ","description":"å¯ä»¥æè¿°ä¸€ä¸‹ç•¶æ™‚çš„ç’°å¢ƒã€æ™‚é–“ã€äººç‰©... ç•¶ç„¶ï¼Œå¦‚æžœä¸æƒ³èªªä¹Ÿå®Œå…¨å¯ä»¥è·³éŽã€‚","placeholder":"é‚£ä¸€åˆ»ï¼Œä½ åœ¨å“ªè£¡ï¼Ÿç™¼ç”Ÿäº†ä»€éº¼ï¼Ÿï¼ˆå¯ä»¥è·³éŽï¼‰","skipButton":"æš«æ™‚è·³éŽï¼Œç›´æŽ¥èªªæƒ³æ³•","nextButton":"ç¹¼çºŒæŽ¢ç´¢å…§å¿ƒ"},"thoughts":{"title":"é‚£ä¸€åˆ»ï¼Œå…§å¿ƒå†’å‡ºäº†ä»€éº¼æƒ³æ³•ï¼Ÿ","description":"é€™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚è«‹èª å¯¦åœ°è¨˜éŒ„ä¸‹ç•¶æ™‚è…¦æµ·ä¸­çš„æƒ³æ³•ï¼Œç„¡è«–å®ƒæ˜¯ä»€éº¼æ¨£çš„ã€‚","placeholder":"æˆ‘ç•¶æ™‚æƒ³... / æˆ‘è¦ºå¾—... / é€™è®“æˆ‘æ„Ÿåˆ°...","reminder":"ä½ å¾ˆå‹‡æ•¢åœ°é¢å°äº†å…§å¿ƒçš„è²éŸ³ï¼Œé€™å°±æ˜¯æˆé•·çš„é–‹å§‹ã€‚","nextButton":"å°‹æ‰¾æ–°çš„è¦–è§’"},"emotions":{"title":"ç¾åœ¨çš„æ„Ÿè¦ºå’Œå‰›æ‰æ¯”ï¼Œæœ‰ä»€éº¼ä¸åŒï¼Ÿ","description":"è«‹ç¢ºèªæˆ–èª¿æ•´ä½ çš„æƒ…ç·’é¸æ“‡ã€‚å³ä½¿ä¹‹å‰é¸æ“‡éŽæƒ…ç·’ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨é€™è£¡é‡æ–°è©•ä¼°å’Œèª¿æ•´ã€‚","initialText":"ä¹‹å‰é¸æ“‡çš„æ„Ÿå—ï¼š{emotions}","adjustmentHint":"ä½ å¯ä»¥ä¿æŒé€™äº›é¸æ“‡ï¼Œæˆ–è€…é‡æ–°èª¿æ•´","currentFeelings":"æ­¤åˆ»çš„æ„Ÿå—ï¼š","intensityLabel":"æ„Ÿå—çš„å¼·åº¦ï¼š{intensity}%","intensityMin":"è¼•å¾®","intensityMax":"å¼·çƒˆ","nextButton":"å’Œæ™ºæ…§å¤¥ä¼´èŠèŠ"},"success":{"title":"è¨˜éŒ„å·²å„²å­˜","message":"ä½ çš„æƒ³æ³•å·²ç¶“å®‰å…¨åœ°å„²å­˜åœ¨å¿ƒéˆèŠ±åœ’ä¸­"}},"dashboard":{"title":"çœ‹çœ‹ä½ å¿ƒéˆèŠ±åœ’çš„ç¾Žéº—ç¶»æ”¾","loading":"èŠ±åœ’æ­£åœ¨ç¶»æ”¾...","recentRecord":"æœ€è¿‘ä¸€æ¬¡æˆé•·è¨˜éŒ„ï¼š{time}","welcomeMessage":"ä½ çš„æˆé•·ä¹‹æ—…å³å°‡é–‹å§‹ï¼Œæ¯ä¸€æ­¥éƒ½å€¼å¾—è¨˜éŒ„","stats":{"title":"æˆé•·çš„æ”¶ç©«","seeds":"æ’­ä¸‹çš„æ€ç¶­ç¨®å­","flowers":"ç¶»æ”¾çš„æ™ºæ…§èŠ±æœµ","gardenHealth":"èŠ±åœ’çš„ç”Ÿæ©Ÿç‹€æ…‹"},"actions":{"title":"ç¹¼çºŒåŸ¹è‚²å¿ƒéˆ","plantSeed":{"title":"æ’­ç¨®æ–°çš„æƒ³æ³•","description":"è¨˜éŒ„ä»Šå¤©å¿ƒä¸­èŒèŠ½çš„æ€ç·’"},"wiseCompanion":{"title":"èˆ‡æ™ºæ…§å¤¥ä¼´å°è©±","description":"æŽ¢ç´¢{count}å€‹å¾…åˆ†æžçš„æƒ³æ³•","noRecords":"å…ˆæ’­ä¸‹ä¸€äº›æƒ³æ³•çš„ç¨®å­å§"}},"insights":{"title":"èŠ±åœ’çš„æ™ºæ…§æ´žå¯Ÿ","emotions":{"title":"æƒ…ç·’èŠ±æœµçš„è‰²å½©","count":"{count}ç¨®è‰²å½©","bloomCount":"ç¶»æ”¾äº†{count}æ¬¡","empty":"é‚„æ²’æœ‰æƒ…ç·’è¨˜éŒ„ï¼Œé–‹å§‹æ’­ç¨®ä½ çš„æ„Ÿå—å§"},"wisdom":{"title":"æ™ºæ…§å¤¥ä¼´çš„ç™¼ç¾","dialogCount":"{count}æ¬¡æ·±åº¦å°è©±","biasesFound":"{count}å€‹æ€ç¶­æ¨¡å¼è¢«ç™¼ç¾","alternativeThoughts":"{count}å€‹æ–°è¦–è§’è¢«æŽ¡ç´","empty":"é–‹å§‹èˆ‡æ™ºæ…§å¤¥ä¼´å°è©±ï¼Œç™¼ç¾å…§å¿ƒçš„æ™ºæ…§"}},"encouragement":{"title":"ä»Šæ—¥çš„èŠ±åœ’å¯„èªž"},"records":{"title":"æœ€è¿‘çš„æˆé•·è¨˜éŒ„","stageCompleted":"å·²å®Œæˆæˆé•·","stageBlooming":"æ™ºæ…§ç¶»æ”¾ä¸­","stageGrowing":"ç¨®å­èŒèŠ½ä¸­","progressCompleted":"æˆé•·å®Œæˆ","progressBlooming":"æ™ºæ…§èŒç™¼","progressGrowing":"ç­‰å¾…æŽ¢ç´¢"}},"emotions":{"pleasant":"æ„‰æ‚…é™½å…‰","calm":"å¹³éœå¦‚æ°´","sad":"æœ‰äº›ä½Žè½","anxious":"ç„¦æ…®ä¸å®‰","hopeful":"å……æ»¿å¸Œæœ›","tired":"ç–²æ†Šå€¦æ€ ","angry":"æ†¤æ€’","confused":"å›°æƒ‘"},"config":{"title":"èŠ±åœ’è¨­å®š","language":{"title":"èªžè¨€è¨­å®š","description":"é¸æ“‡ä½ ç¿’æ…£çš„èªžè¨€","current":"ç›®å‰èªžè¨€ï¼š{language}"},"companion":{"title":"æ™ºæ…§å¤¥ä¼´è¨­å®š","description":"é…ç½®AIåŠ©æ‰‹çš„è¡Œç‚º"},"data":{"title":"è³‡æ–™ç®¡ç†","export":"åŒ¯å‡ºè³‡æ–™","import":"åŒ¯å…¥è³‡æ–™","clear":"æ¸…é™¤æ‰€æœ‰è³‡æ–™"}},"about":{"title":"é—œæ–¼å¿ƒéˆèŠ±åœ’","description":"ä¸€å€‹æº«æš–çš„CBTè‡ªåŠ©å·¥å…·","version":"ç‰ˆæœ¬ {version}"}}'),h=JSON.parse('{"common":{"loading":"Loading...","save":"Save","cancel":"Cancel","confirm":"Confirm","delete":"Delete","edit":"Edit","back":"Back","next":"Next","prev":"Previous","skip":"Skip","continue":"Continue","start":"Start","complete":"Complete","close":"Close"},"navigation":{"mindGarden":"Mind Garden","dashboard":"Growth Journey","analysis":"Mind Greenhouse","config":"Garden Settings","about":"About"},"mindGarden":{"title":"Welcome back to your Mind Garden","subtitle":"Every exploration is a testament to growth","moodCheck":{"title":"What color does your mood feel like today?","customPlaceholder":"Or describe it in your own words...","addButton":"Add","skipButton":"I don\'t want to say right now, let\'s start","startButton":"Begin today\'s growth journey"},"quickAccess":{"title":"Explore your garden","growth":{"title":"Growth Journey","description":"Review your mental wellness journey","stats":"Recorded {count} growth entries"},"wisdom":{"title":"Wise Companion","description":"Engage in deep conversations with AI","hint":"24/7 support"},"settings":{"title":"Garden Settings","description":"Personalize your experience"}},"dailyInspiration":{"title":"Today\'s gentle reminder"}},"thoughtRecord":{"title":"Begin today\'s growth journey","progress":{"preparing":"Getting ready","situation":"Setting the scene","thoughts":"Inner voice","emotions":"Present feelings"},"welcome":{"title":"Begin today\'s growth journey","description":"Let\'s gently explore your inner thoughts together. Every thought is a precious seed worthy of gentle care.","startButton":"Start planting seeds of thought","currentMood":"Today\'s feeling: {emotion}","otherMoods":"Other feelings: {emotions}"},"situation":{"title":"What happened that made you feel this way?","description":"You can describe the environment, time, people involved... Of course, feel free to skip if you prefer.","placeholder":"Where were you at that moment? What happened? (Optional)","skipButton":"Skip for now, go to thoughts","nextButton":"Continue exploring within"},"thoughts":{"title":"What thoughts came to mind in that moment?","description":"This is the most important part. Please honestly record what was going through your mind, whatever it was.","placeholder":"I was thinking... / I felt... / This made me feel...","reminder":"You\'re brave to face your inner voice - this is where growth begins.","nextButton":"Find new perspectives"},"emotions":{"title":"How do you feel now compared to earlier?","description":"Please confirm or adjust your emotion choices. Even if you\'ve selected emotions before, you can reassess and adjust here.","initialText":"Previously selected feelings: {emotions}","adjustmentHint":"You can keep these choices, or readjust them","currentFeelings":"Current feelings:","intensityLabel":"Feeling intensity: {intensity}%","intensityMin":"Mild","intensityMax":"Intense","nextButton":"Chat with wise companion"},"success":{"title":"Record saved","message":"Your thoughts have been safely saved in your mind garden"}},"dashboard":{"title":"See the beautiful blooming of your mind garden","loading":"Garden is blooming...","recentRecord":"Latest growth record: {time}","welcomeMessage":"Your growth journey is about to begin, every step is worth recording","stats":{"title":"Growth harvest","seeds":"Thought seeds planted","flowers":"Wisdom flowers bloomed","gardenHealth":"Garden vitality status"},"actions":{"title":"Continue nurturing your mind","plantSeed":{"title":"Plant new thoughts","description":"Record today\'s budding thoughts"},"wiseCompanion":{"title":"Talk with wise companion","description":"Explore {count} thoughts awaiting analysis","noRecords":"Plant some thought seeds first"}},"insights":{"title":"Garden\'s wise insights","emotions":{"title":"Colors of emotion flowers","count":"{count} colors","bloomCount":"Bloomed {count} times","empty":"No emotion records yet, start planting your feelings"},"wisdom":{"title":"Wise companion\'s discoveries","dialogCount":"{count} deep conversations","biasesFound":"{count} thought patterns discovered","alternativeThoughts":"{count} new perspectives adopted","empty":"Start conversations with your wise companion to discover inner wisdom"}},"encouragement":{"title":"Today\'s garden message"},"records":{"title":"Recent growth records","stageCompleted":"Growth completed","stageBlooming":"Wisdom blooming","stageGrowing":"Seeds sprouting","progressCompleted":"Growth complete","progressBlooming":"Wisdom emerging","progressGrowing":"Awaiting exploration"}},"emotions":{"pleasant":"Joyful Sunshine","calm":"Peaceful Waters","sad":"Somewhat Down","anxious":"Anxious Unease","hopeful":"Full of Hope","tired":"Weary Fatigue","angry":"Angry","confused":"Confused"},"config":{"title":"Garden Settings","language":{"title":"Language Settings","description":"Choose your preferred language","current":"Current language: {language}"},"companion":{"title":"Wise Companion Settings","description":"Configure AI assistant behavior"},"data":{"title":"Data Management","export":"Export Data","import":"Import Data","clear":"Clear All Data"}},"about":{"title":"About Mind Garden","description":"A warm CBT self-help tool","version":"Version {version}"}}');function g(){const t=navigator.language||navigator.userLanguage;return t.startsWith("zh")?t.includes("TW")||t.includes("HK")||t.includes("MO")?"zh-TW":"zh-CN":"en"}function m(){const t=localStorage.getItem("cbt-helper-locale");return t||g()}const p=(0,r.hU)({legacy:!1,locale:m(),fallbackLocale:"zh-CN",globalInjection:!0,messages:{"zh-CN":d,"zh-TW":u,en:h}});function v(t){p.global.locale.value=t,localStorage.setItem("cbt-helper-locale",t),document.documentElement.lang=t}function k(){return p.global.locale.value}function y(){return[{code:"zh-CN",name:"ç®€ä½“ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"},{code:"zh-TW",name:"ç¹é«”ä¸­æ–‡",flag:"ðŸ‡¹ðŸ‡¼"},{code:"en",name:"English",flag:"ðŸ‡ºðŸ‡¸"}]}const b=p;var L=s(641),C=s(33),f=s(953);const E={class:"language-switcher"},w={class:"language-flag"},_={class:"language-name"},A={class:"dropdown-icon"},S={key:0,class:"language-dropdown"},T=["onClick"],M={class:"language-flag"},R={class:"language-name"},I={key:0,class:"check-icon"},$={__name:"LanguageSwitcher",setup(t){const{locale:e}=(0,r.s9)(),s=(0,f.KR)(!1),i=y(),n=(0,L.EW)((()=>k())),a=(0,L.EW)((()=>i.find((t=>t.code===n.value))||i[0])),l=()=>{s.value=!s.value},c=t=>{t!==n.value&&(v(t),d()),s.value=!1},d=()=>{const t={"zh-CN":"å¿ƒçµèŠ±å›­ - æ¸©æš–çš„CBTè‡ªåŠ©å·¥å…·","zh-TW":"å¿ƒéˆèŠ±åœ’ - æº«æš–çš„CBTè‡ªåŠ©å·¥å…·",en:"Mind Garden - A warm CBT self-help tool"};document.title=t[n.value]||t["zh-CN"]},u=t=>{t.target.closest(".language-switcher")||(s.value=!1)};return(0,L.sV)((()=>{document.addEventListener("click",u),d()})),(0,L.hi)((()=>{document.removeEventListener("click",u)})),(t,e)=>((0,L.uX)(),(0,L.CE)("div",E,[(0,L.Lk)("div",{class:(0,C.C4)(["current-language",{active:s.value}]),onClick:l},[(0,L.Lk)("span",w,(0,C.v_)(a.value.flag),1),(0,L.Lk)("span",_,(0,C.v_)(a.value.name),1),(0,L.Lk)("span",A,(0,C.v_)(s.value?"â–²":"â–¼"),1)],2),(0,L.bF)(o.eB,{name:"dropdown"},{default:(0,L.k6)((()=>[s.value?((0,L.uX)(),(0,L.CE)("div",S,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)((0,f.R1)(i),(t=>((0,L.uX)(),(0,L.CE)("div",{key:t.code,onClick:e=>c(t.code),class:(0,C.C4)(["language-option",{selected:t.code===n.value}])},[(0,L.Lk)("span",M,(0,C.v_)(t.flag),1),(0,L.Lk)("span",R,(0,C.v_)(t.name),1),t.code===n.value?((0,L.uX)(),(0,L.CE)("span",I,"âœ“")):(0,L.Q3)("",!0)],10,T)))),128))])):(0,L.Q3)("",!0)])),_:1})]))}};var D=s(262);const x=(0,D.A)($,[["__scopeId","data-v-30fc61d4"]]),B=x,F={id:"app",class:"app-container"},P={class:"nav-menu"},O={class:"nav-text"},N={class:"nav-text"},X={class:"nav-text"},U={class:"nav-text"},j={class:"nav-text"},G={class:"nav-language-switcher"},V={class:"app-main"},W={__name:"App",setup(t){const e=(0,f.KR)(!1);function s(){e.value=!e.value}function i(){e.value=!1}return(0,L.sV)((()=>{const t=document.querySelector("link[rel~='icon']")||document.createElement("link");t.type="image/png",t.rel="icon",t.href="/logo.png",document.head.appendChild(t)})),(t,n)=>{const a=(0,L.g2)("router-link"),l=(0,L.g2)("router-view"),c=(0,L.g2)("SpeedInsights");return(0,L.uX)(),(0,L.CE)("div",F,[(0,L.Lk)("div",{class:(0,C.C4)(["floating-nav",{"nav-open":e.value}])},[(0,L.Lk)("button",{class:(0,C.C4)(["nav-toggle",{active:e.value}]),onClick:s},n[0]||(n[0]=[(0,L.Lk)("span",{class:"nav-icon"},"ðŸŒ¸",-1)]),2),(0,L.bo)((0,L.Lk)("div",P,[(0,L.bF)(a,{to:"/",class:"nav-item",onClick:i},{default:(0,L.k6)((()=>[n[1]||(n[1]=(0,L.Lk)("span",{class:"nav-emoji"},"ðŸŒ±",-1)),(0,L.Lk)("span",O,(0,C.v_)(t.$t("navigation.mindGarden")),1)])),_:1}),(0,L.bF)(a,{to:"/dashboard",class:"nav-item",onClick:i},{default:(0,L.k6)((()=>[n[2]||(n[2]=(0,L.Lk)("span",{class:"nav-emoji"},"ðŸŒ¸",-1)),(0,L.Lk)("span",N,(0,C.v_)(t.$t("navigation.dashboard")),1)])),_:1}),(0,L.bF)(a,{to:"/analysis?view=overview",class:"nav-item",onClick:i},{default:(0,L.k6)((()=>[n[3]||(n[3]=(0,L.Lk)("span",{class:"nav-emoji"},"ðŸ¡",-1)),(0,L.Lk)("span",X,(0,C.v_)(t.$t("navigation.analysis")),1)])),_:1}),(0,L.bF)(a,{to:"/config",class:"nav-item",onClick:i},{default:(0,L.k6)((()=>[n[4]||(n[4]=(0,L.Lk)("span",{class:"nav-emoji"},"âš™ï¸",-1)),(0,L.Lk)("span",U,(0,C.v_)(t.$t("navigation.config")),1)])),_:1}),(0,L.bF)(a,{to:"/about",class:"nav-item",onClick:i},{default:(0,L.k6)((()=>[n[5]||(n[5]=(0,L.Lk)("span",{class:"nav-emoji"},"â„¹ï¸",-1)),(0,L.Lk)("span",j,(0,C.v_)(t.$t("navigation.about")),1)])),_:1}),n[6]||(n[6]=(0,L.Lk)("div",{class:"nav-divider"},null,-1)),(0,L.Lk)("div",G,[(0,L.bF)(B)])],512),[[o.aG,e.value]])],2),(0,L.Lk)("main",V,[(0,L.bF)(l,null,{default:(0,L.k6)((({Component:t,route:e})=>[(0,L.bF)(o.eB,{name:"fade-slide",mode:"out-in"},{default:(0,L.k6)((()=>[((0,L.uX)(),(0,L.Wv)((0,L.$y)(t),{key:e.path}))])),_:2},1024)])),_:1})]),(0,L.bF)(c)])}}},K=(0,D.A)(W,[["__scopeId","data-v-eedec00c"]]),Q=K,z={class:"garden-config"},q={class:"garden-background"},H={class:"floating-particles"},J={class:"garden-content"},Y={class:"config-card llm-settings"},Z={class:"config-mode-selector"},tt={class:"mode-toggle"},et={class:"mode-description"},st={key:0},ot={key:1},it={class:"local-config-form"},nt={class:"form-group"},at={class:"form-group"},lt={class:"form-group"},ct={class:"button-group"},rt=["disabled"],dt=["disabled"],ut={key:1,class:"success-message"},ht={class:"cloud-config-status"},gt={class:"button-group"},mt=["disabled"],pt={class:"config-card data-management"},vt={class:"data-controls"},kt={class:"control-group"},yt={class:"control-group"},bt={class:"import-controls"},Lt=["disabled"],Ct={key:0,class:"file-info"},ft={class:"control-group danger-zone"},Et={class:"modal-footer"};function wt(t,e,s,i,n,a){return(0,L.uX)(),(0,L.CE)("div",z,[(0,L.Lk)("div",q,[e[22]||(e[22]=(0,L.Lk)("div",{class:"sky-gradient"},null,-1)),(0,L.Lk)("div",H,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(12,(t=>(0,L.Lk)("div",{key:t,class:"particle",style:(0,C.Tr)(a.getParticleStyle(t))},null,4))),64))])]),(0,L.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>a.goBack&&a.goBack(...t)),class:"floating-back-btn","aria-label":"è¿”å›žä¸»é¡µ"},e[23]||(e[23]=[(0,L.Lk)("span",null,"ðŸ¡",-1)])),(0,L.Lk)("main",J,[e[42]||(e[42]=(0,L.Lk)("header",{class:"page-header"},[(0,L.Lk)("h1",{class:"page-title"},[(0,L.Lk)("span",{class:"title-icon"},"âš™ï¸"),(0,L.eW)(" èŠ±å›­è®¾ç½® ")]),(0,L.Lk)("p",{class:"page-subtitle"},"ç®¡ç†ä½ çš„å¿ƒçµèŠ±å›­é…ç½®")],-1)),(0,L.Lk)("section",Y,[e[31]||(e[31]=(0,L.Lk)("h2",{class:"section-title"},[(0,L.Lk)("span",{class:"title-icon"},"ðŸ¤–"),(0,L.eW)(" æ™ºæ…§ä¼™ä¼´è®¾ç½® ")],-1)),(0,L.Lk)("div",Z,[(0,L.Lk)("div",tt,[(0,L.bo)((0,L.Lk)("input",{type:"radio",id:"cloud-default",value:"cloud","onUpdate:modelValue":e[1]||(e[1]=t=>n.configMode=t),onChange:e[2]||(e[2]=(...t)=>a.handleConfigModeChange&&a.handleConfigModeChange(...t))},null,544),[[o.XL,n.configMode]]),e[24]||(e[24]=(0,L.Lk)("label",{for:"cloud-default",class:"mode-option"},[(0,L.Lk)("span",{class:"mode-icon"},"â˜ï¸"),(0,L.Lk)("span",{class:"mode-text"},"äº‘ç«¯é»˜è®¤")],-1)),(0,L.bo)((0,L.Lk)("input",{type:"radio",id:"local-config",value:"local","onUpdate:modelValue":e[3]||(e[3]=t=>n.configMode=t),onChange:e[4]||(e[4]=(...t)=>a.handleConfigModeChange&&a.handleConfigModeChange(...t))},null,544),[[o.XL,n.configMode]]),e[25]||(e[25]=(0,L.Lk)("label",{for:"local-config",class:"mode-option"},[(0,L.Lk)("span",{class:"mode-icon"},"âš™ï¸"),(0,L.Lk)("span",{class:"mode-text"},"æœ¬åœ°é…ç½®")],-1))]),(0,L.Lk)("p",et,["cloud"===n.configMode?((0,L.uX)(),(0,L.CE)("span",st,"ä½¿ç”¨é¢„è®¾çš„äº‘ç«¯é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®")):((0,L.uX)(),(0,L.CE)("span",ot,"ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°LLMé…ç½®"))])]),(0,L.bo)((0,L.Lk)("div",it,[(0,L.Lk)("div",nt,[e[26]||(e[26]=(0,L.Lk)("label",{for:"endpoint"},"API åœ°å€",-1)),(0,L.bo)((0,L.Lk)("input",{id:"endpoint","onUpdate:modelValue":e[5]||(e[5]=t=>n.apiConfig.endpoint=t),type:"text",placeholder:"ä¾‹å¦‚: https://api.openai.com/v1/chat/completions"},null,512),[[o.Jo,n.apiConfig.endpoint]])]),(0,L.Lk)("div",at,[e[27]||(e[27]=(0,L.Lk)("label",{for:"apiKey"},"API å¯†é’¥",-1)),(0,L.bo)((0,L.Lk)("input",{id:"apiKey","onUpdate:modelValue":e[6]||(e[6]=t=>n.apiConfig.apiKey=t),type:"password",placeholder:"è¾“å…¥ä½ çš„APIå¯†é’¥"},null,512),[[o.Jo,n.apiConfig.apiKey]])]),(0,L.Lk)("div",lt,[e[29]||(e[29]=(0,L.Lk)("label",{for:"modelSelect"},"é€‰æ‹©æ¨¡åž‹",-1)),(0,L.bo)((0,L.Lk)("select",{id:"modelSelect","onUpdate:modelValue":e[7]||(e[7]=t=>n.selectedModelOption=t),onChange:e[8]||(e[8]=(...t)=>a.handleModelChange&&a.handleModelChange(...t))},e[28]||(e[28]=[(0,L.Lk)("option",{value:"custom"},"è‡ªå®šä¹‰æ¨¡åž‹",-1)]),544),[[o.u1,n.selectedModelOption]]),(0,L.bo)((0,L.Lk)("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>n.customModelName=t),type:"text",placeholder:"è¾“å…¥æ¨¡åž‹åç§°ï¼ˆå¦‚ï¼šqwen-turboï¼‰",class:"custom-model-input"},null,512),[[o.Jo,n.customModelName]])]),(0,L.Lk)("div",ct,[(0,L.Lk)("button",{class:"test-button",onClick:e[10]||(e[10]=(...t)=>a.testConnection&&a.testConnection(...t)),disabled:!a.isFormValid||n.isTesting},(0,C.v_)(n.isTesting?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿žæŽ¥"),9,rt),(0,L.Lk)("button",{class:"save-button",onClick:e[11]||(e[11]=(...t)=>a.saveConfig&&a.saveConfig(...t)),disabled:!a.isFormValid}," ä¿å­˜è®¾ç½® ",8,dt)]),n.testStatus?((0,L.uX)(),(0,L.CE)("div",{key:0,class:(0,C.C4)(["test-status",{success:n.testStatus.includes("æˆåŠŸ")}])},(0,C.v_)(n.testStatus),3)):(0,L.Q3)("",!0),n.showSuccess?((0,L.uX)(),(0,L.CE)("div",ut," âœ¨ è®¾ç½®å·²ä¿å­˜ ")):(0,L.Q3)("",!0)],512),[[o.aG,"local"===n.configMode]]),(0,L.bo)((0,L.Lk)("div",ht,[e[30]||(e[30]=(0,L.Lk)("div",{class:"cloud-info"},[(0,L.Lk)("span",{class:"info-icon"},"âœ…"),(0,L.Lk)("div",{class:"info-content"},[(0,L.Lk)("h4",null,"äº‘ç«¯é…ç½®å·²å¯ç”¨"),(0,L.Lk)("p",null,"ç³»ç»Ÿå°†ä½¿ç”¨é¢„é…ç½®çš„äº‘ç«¯LLMæœåŠ¡ï¼Œæ‚¨æ— éœ€è¿›è¡Œé¢å¤–è®¾ç½®ã€‚")])],-1)),(0,L.Lk)("div",gt,[(0,L.Lk)("button",{class:"test-button",onClick:e[12]||(e[12]=(...t)=>a.testCloudConnection&&a.testCloudConnection(...t)),disabled:n.isTestingCloud},(0,C.v_)(n.isTestingCloud?"æµ‹è¯•ä¸­...":"æµ‹è¯•äº‘ç«¯è¿žæŽ¥"),9,mt)]),n.cloudTestStatus?((0,L.uX)(),(0,L.CE)("div",{key:0,class:(0,C.C4)(["test-status",{success:n.cloudTestStatus.includes("æˆåŠŸ")}])},(0,C.v_)(n.cloudTestStatus),3)):(0,L.Q3)("",!0)],512),[[o.aG,"cloud"===n.configMode]])]),(0,L.Lk)("section",pt,[e[41]||(e[41]=(0,L.Lk)("h2",{class:"section-title"},[(0,L.Lk)("span",{class:"title-icon"},"ðŸ’¾"),(0,L.eW)(" æ•°æ®ç®¡ç† ")],-1)),(0,L.Lk)("div",vt,[(0,L.Lk)("div",kt,[e[33]||(e[33]=(0,L.Lk)("h3",null,"å¯¼å‡ºæ•°æ®",-1)),e[34]||(e[34]=(0,L.Lk)("p",{class:"control-description"}," å°†ä½ çš„å¿ƒçµèŠ±å›­æ•°æ®å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼Œå¯ç”¨äºŽå¤‡ä»½æˆ–è¿ç§»åˆ°å…¶ä»–è®¾å¤‡ ",-1)),(0,L.Lk)("button",{onClick:e[13]||(e[13]=(...t)=>a.exportData&&a.exportData(...t)),class:"export-button"},e[32]||(e[32]=[(0,L.Lk)("span",{class:"button-icon"},"ðŸ“¤",-1),(0,L.eW)(" å¯¼å‡ºæ•°æ® ")]))]),(0,L.Lk)("div",yt,[e[36]||(e[36]=(0,L.Lk)("h3",null,"å¯¼å…¥æ•°æ®",-1)),e[37]||(e[37]=(0,L.Lk)("p",{class:"control-description"}," ä»Žå¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤æ•°æ®ï¼Œæ–°æ•°æ®å°†ä¸ŽçŽ°æœ‰æ•°æ®åˆå¹¶ ",-1)),(0,L.Lk)("div",bt,[(0,L.Lk)("input",{ref:"fileInput",type:"file",accept:".json",onChange:e[14]||(e[14]=(...t)=>a.handleFileSelect&&a.handleFileSelect(...t)),style:{display:"none"}},null,544),(0,L.Lk)("button",{onClick:e[15]||(e[15]=(...t)=>a.triggerFileSelect&&a.triggerFileSelect(...t)),class:"import-button"},e[35]||(e[35]=[(0,L.Lk)("span",{class:"button-icon"},"ðŸ“¥",-1),(0,L.eW)(" é€‰æ‹©æ–‡ä»¶ ")])),n.selectedFile?((0,L.uX)(),(0,L.CE)("button",{key:0,onClick:e[16]||(e[16]=(...t)=>a.importData&&a.importData(...t)),class:"confirm-import-button",disabled:n.isImporting},(0,C.v_)(n.isImporting?"å¯¼å…¥ä¸­...":"ç¡®è®¤å¯¼å…¥"),9,Lt)):(0,L.Q3)("",!0)]),n.selectedFile?((0,L.uX)(),(0,L.CE)("div",Ct," å·²é€‰æ‹©: "+(0,C.v_)(n.selectedFile.name),1)):(0,L.Q3)("",!0)]),(0,L.Lk)("div",ft,[e[39]||(e[39]=(0,L.Lk)("h3",null,"å±é™©æ“ä½œ",-1)),e[40]||(e[40]=(0,L.Lk)("p",{class:"control-description warning"}," âš ï¸ ä»¥ä¸‹æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œè¯·è°¨æ…Žæ“ä½œ ",-1)),(0,L.Lk)("button",{onClick:e[17]||(e[17]=(...t)=>a.confirmClearAll&&a.confirmClearAll(...t)),class:"clear-button"},e[38]||(e[38]=[(0,L.Lk)("span",{class:"button-icon"},"ðŸ—‘ï¸",-1),(0,L.eW)(" æ¸…ç©ºæ‰€æœ‰æ•°æ® ")]))])]),n.dataOperationStatus?((0,L.uX)(),(0,L.CE)("div",{key:0,class:(0,C.C4)(["operation-status",n.dataOperationStatus.type])},(0,C.v_)(n.dataOperationStatus.message),3)):(0,L.Q3)("",!0)])]),((0,L.uX)(),(0,L.Wv)(L.Im,{to:"body"},[n.showClearConfirm?((0,L.uX)(),(0,L.CE)("div",{key:0,class:"modal-overlay",onClick:e[21]||(e[21]=t=>n.showClearConfirm=!1)},[(0,L.Lk)("div",{class:"modal-dialog",onClick:e[20]||(e[20]=(0,o.D$)((()=>{}),["stop"]))},[e[43]||(e[43]=(0,L.Lk)("div",{class:"modal-header"},[(0,L.Lk)("h3",null,"âš ï¸ ç¡®è®¤æ¸…ç©ºæ•°æ®")],-1)),e[44]||(e[44]=(0,L.Lk)("div",{class:"modal-body"},[(0,L.Lk)("p",null,"æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰å¿ƒçµèŠ±å›­æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š"),(0,L.Lk)("ul",null,[(0,L.Lk)("li",null,"æ‰€æœ‰æ€ç»´è®°å½•"),(0,L.Lk)("li",null,"åˆ†æžç»“æžœ"),(0,L.Lk)("li",null,"å¯¹è¯åŽ†å²")]),(0,L.Lk)("p",null,[(0,L.Lk)("strong",null,"æ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼")])],-1)),(0,L.Lk)("div",Et,[(0,L.Lk)("button",{onClick:e[18]||(e[18]=t=>n.showClearConfirm=!1),class:"cancel-button"},"å–æ¶ˆ"),(0,L.Lk)("button",{onClick:e[19]||(e[19]=(...t)=>a.clearAllData&&a.clearAllData(...t)),class:"confirm-button"},"ç¡®è®¤æ¸…ç©º")])])])):(0,L.Q3)("",!0)]))])}const _t={name:"GardenConfig",data(){return{apiConfig:{...this.$store.state.apiConfig},showSuccess:!1,selectedModelOption:"",customModelName:"",testStatus:"",isTesting:!1,configMode:"cloud",cloudTestStatus:"",isTestingCloud:!1,selectedFile:null,isImporting:!1,dataOperationStatus:null,showClearConfirm:!1}},created(){this.selectedModelOption="custom",this.customModelName=this.apiConfig.model||"";const t=localStorage.getItem("configMode");t&&(this.configMode=t),"cloud"===this.configMode&&this.applyCloudConfig(),console.log("[Config] åˆå§‹åŒ–å®Œæˆï¼Œå½“å‰æ¨¡å¼:",this.configMode)},computed:{isFormValid(){const t=this.apiConfig.endpoint&&this.apiConfig.apiKey;return t&&this.customModelName}},methods:{goBack(){this.$router.push("/")},getParticleStyle(t){const e=5*Math.random(),s=5+5*Math.random(),o=100*Math.random(),i=100*Math.random();return{left:`${o}%`,top:`${i}%`,animationDelay:`${e}s`,animationDuration:`${s}s`}},handleModelChange(){this.apiConfig.model=this.customModelName},handleConfigModeChange(){"cloud"===this.configMode?(console.log("[Config] åˆ‡æ¢åˆ°äº‘ç«¯æ¨¡å¼"),this.testStatus="",this.cloudTestStatus="",this.applyCloudConfig()):(console.log("[Config] åˆ‡æ¢åˆ°æœ¬åœ°æ¨¡å¼"),this.cloudTestStatus=""),this.$store.state.configMode=this.configMode,localStorage.setItem("configMode",this.configMode),this.$store.saveState()},applyCloudConfig(){const t={endpoint:c.llm.apiUrl||"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",apiKey:c.llm.apiKey||"",model:c.llm.modelName||"qwen-turbo"};console.log("[Config] åº”ç”¨äº‘ç«¯é…ç½®:",{endpoint:t.endpoint,hasApiKey:!!t.apiKey,model:t.model}),this.$store.updateApiConfig(t),this.apiConfig={...t},this.customModelName=t.model,localStorage.removeItem("llmConfig"),console.log("[Config] äº‘ç«¯é…ç½®å·²åº”ç”¨")},async testCloudConnection(){this.isTestingCloud=!0,this.cloudTestStatus="æ­£åœ¨æµ‹è¯•äº‘ç«¯è¿žæŽ¥...";try{const t="/api/llm-proxy",e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:'è¯·å›žå¤"è¿žæŽ¥æµ‹è¯•æˆåŠŸ"'}],max_tokens:50,temperature:.1})});if(e.ok){const t=await e.json();t.content?this.cloudTestStatus="âœ… äº‘ç«¯è¿žæŽ¥æµ‹è¯•æˆåŠŸï¼APIå“åº”æ­£å¸¸":this.cloudTestStatus="âš ï¸ äº‘ç«¯è¿žæŽ¥æˆåŠŸï¼Œä½†å“åº”æ ¼å¼å¼‚å¸¸"}else{const t=await e.json().catch((()=>({})));this.cloudTestStatus=`âŒ äº‘ç«¯è¿žæŽ¥å¤±è´¥: ${t.message||e.statusText}`,console.error("äº‘ç«¯è¿žæŽ¥æµ‹è¯•å¤±è´¥:",t)}}catch(t){console.error("äº‘ç«¯è¿žæŽ¥æµ‹è¯•å¤±è´¥:",t),this.cloudTestStatus="âŒ äº‘ç«¯è¿žæŽ¥æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥æˆ–APIé…ç½®"}finally{this.isTestingCloud=!1,setTimeout((()=>{this.cloudTestStatus=""}),5e3)}},async testConnection(){this.isTesting=!0,this.testStatus="æ­£åœ¨æµ‹è¯•è¿žæŽ¥...";try{const t="/api/llm-proxy",e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.apiConfig.apiKey,"X-API-URL":this.apiConfig.endpoint,"X-Model-Name":this.apiConfig.model},body:JSON.stringify({messages:[{role:"user",content:"ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚è¯·å›žå¤ï¼šè¿žæŽ¥æµ‹è¯•æˆåŠŸï¼"}],max_tokens:50,temperature:.7})});if(!e.ok){const t=await e.json();throw new Error(t.message||"è¿žæŽ¥æµ‹è¯•å¤±è´¥")}const s=await e.json();s.content&&s.content.includes("è¿žæŽ¥æµ‹è¯•æˆåŠŸ")?this.testStatus="âœ… è¿žæŽ¥æµ‹è¯•æˆåŠŸï¼":(this.testStatus="âš ï¸ è¿žæŽ¥æˆåŠŸï¼Œä½†å“åº”å¼‚å¸¸",console.warn("æ„å¤–çš„å“åº”å†…å®¹:",s))}catch(t){console.error("è¿žæŽ¥æµ‹è¯•å¤±è´¥:",t),this.testStatus=`âŒ è¿žæŽ¥æµ‹è¯•å¤±è´¥: ${t.message}`}finally{this.isTesting=!1,setTimeout((()=>{this.testStatus=""}),5e3)}},saveConfig(){const t=this.customModelName||"qwen-turbo";console.log("[Config] ä¿å­˜é…ç½®:",{endpoint:this.apiConfig.endpoint,hasApiKey:!!this.apiConfig.apiKey,model:t}),this.$store.updateApiConfig({endpoint:this.apiConfig.endpoint,apiKey:this.apiConfig.apiKey,model:t}),this.apiConfig.model=t,this.showSuccess=!0,setTimeout((()=>this.showSuccess=!1),2e3)},exportData(){try{const t=this.$store.exportData();t?this.showOperationStatus("success","âœ… æ•°æ®å¯¼å‡ºæˆåŠŸï¼æ–‡ä»¶å·²ä¸‹è½½"):this.showOperationStatus("error","âŒ æ•°æ®å¯¼å‡ºå¤±è´¥")}catch(t){console.error("å¯¼å‡ºæ•°æ®å¤±è´¥:",t),this.showOperationStatus("error","âŒ æ•°æ®å¯¼å‡ºå¤±è´¥")}},triggerFileSelect(){this.$refs.fileInput.click()},handleFileSelect(t){const e=t.target.files[0];e&&("application/json"===e.type||e.name.endsWith(".json")?(this.selectedFile=e,this.dataOperationStatus=null):(this.showOperationStatus("error","âŒ è¯·é€‰æ‹©JSONæ ¼å¼çš„æ–‡ä»¶"),this.selectedFile=null))},async importData(){if(this.selectedFile){this.isImporting=!0;try{const t=await this.readFileAsText(this.selectedFile),e=this.$store.importData(t);e.success?(this.showOperationStatus("success",`âœ… æ•°æ®å¯¼å…¥æˆåŠŸï¼å¯¼å…¥äº†${e.imported}æ¡æ–°è®°å½•ï¼Œå½“å‰å…±æœ‰${e.total}æ¡è®°å½•`),this.selectedFile=null,this.$refs.fileInput.value=""):this.showOperationStatus("error",`âŒ æ•°æ®å¯¼å…¥å¤±è´¥: ${e.error}`)}catch(t){console.error("å¯¼å…¥æ•°æ®å¤±è´¥:",t),this.showOperationStatus("error","âŒ æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼")}finally{this.isImporting=!1}}},readFileAsText(t){return new Promise(((e,s)=>{const o=new FileReader;o.onload=t=>e(t.target.result),o.onerror=t=>s(t),o.readAsText(t)}))},confirmClearAll(){this.showClearConfirm=!0},clearAllData(){try{this.$store.clearAll(),this.showOperationStatus("success","âœ… æ‰€æœ‰æ•°æ®å·²æ¸…ç©º"),this.showClearConfirm=!1}catch(t){console.error("æ¸…ç©ºæ•°æ®å¤±è´¥:",t),this.showOperationStatus("error","âŒ æ¸…ç©ºæ•°æ®å¤±è´¥")}},showOperationStatus(t,e){this.dataOperationStatus={type:t,message:e},setTimeout((()=>{this.dataOperationStatus=null}),5e3)}},mounted(){const t=localStorage.getItem("llmConfig");t&&(this.apiConfig={...JSON.parse(t)})}},At=(0,D.A)(_t,[["render",wt],["__scopeId","data-v-e4758846"]]),St=At,Tt={class:"growth-journey"},Mt={class:"garden-background"},Rt={class:"garden-elements"},It={class:"journey-content"},$t={class:"journey-progress"},Dt={class:"progress-bar"},xt={class:"step-indicator"},Bt={class:"step-name"},Ft={class:"step-count"},Pt={key:0,class:"welcome-step"},Ot={class:"step-card"},Nt={class:"step-title"},Xt={key:0,class:"current-mood"},Ut={key:0,class:"mood-display"},jt={key:1,class:"selected-emotions-preview"},Gt={class:"emotions-text"},Vt={class:"step-description"},Wt={key:1,class:"situation-step"},Kt={class:"step-card"},Qt={class:"input-container"},zt={class:"step-actions"},qt=["disabled"],Ht={key:2,class:"thoughts-step"},Jt={class:"step-card"},Yt={class:"input-container"},Zt={key:0,class:"gentle-reminder"},te={class:"step-actions"},ee=["disabled"],se={key:3,class:"emotion-step"},oe={class:"step-card"},ie={key:0,class:"initial-emotions-display"},ne={class:"initial-emotions-text"},ae={class:"emotion-selection"},le={class:"emotion-grid"},ce=["onClick"],re={class:"emotion-label"},de={key:1,class:"intensity-control"},ue={class:"intensity-label"},he={class:"intensity-slider-container"},ge={class:"step-actions"},me=["disabled"],pe={key:4,class:"success-message"};function ve(t,e,s,i,n,a){return(0,L.uX)(),(0,L.CE)("div",Tt,[(0,L.Lk)("div",Mt,[e[13]||(e[13]=(0,L.Lk)("div",{class:"sky-gradient"},null,-1)),e[14]||(e[14]=(0,L.Lk)("div",{class:"soil-texture"},null,-1)),(0,L.Lk)("div",Rt,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(8,(t=>(0,L.Lk)("div",{key:t,class:"garden-element",style:(0,C.Tr)(a.getGardenElementStyle(t))},null,4))),64))])]),(0,L.Lk)("div",It,[(0,L.Lk)("div",$t,[(0,L.Lk)("div",Dt,[(0,L.Lk)("div",{class:"progress-fill",style:(0,C.Tr)({width:a.progressPercentage+"%"})},null,4)]),(0,L.Lk)("div",xt,[e[15]||(e[15]=(0,L.Lk)("div",{class:"seed-icon"},[(0,L.Lk)("img",{src:"/assets/images/seed.png",alt:"ç§å­",class:"seed-image"})],-1)),(0,L.Lk)("span",Bt,(0,C.v_)(a.currentStepName),1),(0,L.Lk)("span",Ft,(0,C.v_)(n.currentStep)+"/"+(0,C.v_)(n.totalSteps),1)])]),0===n.currentStep?((0,L.uX)(),(0,L.CE)("div",Pt,[(0,L.Lk)("div",Ot,[e[17]||(e[17]=(0,L.Lk)("div",{class:"step-icon"},"ðŸŒ±",-1)),(0,L.Lk)("h2",Nt,(0,C.v_)(t.$t("thoughtRecord.welcome.title")),1),n.selectedEmotion||n.record.emotions.length>0?((0,L.uX)(),(0,L.CE)("div",Xt,[n.selectedEmotion?((0,L.uX)(),(0,L.CE)("p",Ut,[(0,L.Lk)("span",{class:"mood-icon",style:(0,C.Tr)({background:n.selectedEmotion.gradient})},(0,C.v_)(n.selectedEmotion.emoji||"ðŸ’­"),5),(0,L.eW)(" ä»Šå¤©çš„æ„Ÿå—ï¼š"+(0,C.v_)(n.selectedEmotion.name),1)])):(0,L.Q3)("",!0),n.record.emotions.length>1?((0,L.uX)(),(0,L.CE)("div",jt,[(0,L.Lk)("p",Gt," è¿˜æœ‰å…¶ä»–æ„Ÿå—ï¼š"+(0,C.v_)(n.record.emotions.filter((t=>t!==n.selectedEmotion?.name)).join("ã€")),1)])):(0,L.Q3)("",!0)])):(0,L.Q3)("",!0),(0,L.Lk)("p",Vt,(0,C.v_)(t.$t("thoughtRecord.welcome.description")),1),(0,L.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>a.nextStep&&a.nextStep(...t)),class:"journey-button primary"},[e[16]||(e[16]=(0,L.Lk)("span",{class:"button-icon"},"ðŸŒ¿",-1)),(0,L.eW)(" "+(0,C.v_)(t.$t("thoughtRecord.welcome.startButton")),1)])])])):(0,L.Q3)("",!0),1===n.currentStep?((0,L.uX)(),(0,L.CE)("div",Wt,[(0,L.Lk)("div",Kt,[e[19]||(e[19]=(0,L.Lk)("div",{class:"step-icon"},"ðŸŒ",-1)),e[20]||(e[20]=(0,L.Lk)("h2",{class:"step-title"},"å‘ç”Ÿäº†ä»€ä¹ˆè®©ä½ æœ‰è¿™æ ·çš„æ„Ÿå—ï¼Ÿ",-1)),e[21]||(e[21]=(0,L.Lk)("p",{class:"step-description"},"å¯ä»¥æè¿°ä¸€ä¸‹å½“æ—¶çš„çŽ¯å¢ƒã€æ—¶é—´ã€äººç‰©... å½“ç„¶ï¼Œå¦‚æžœä¸æƒ³è¯´ä¹Ÿå®Œå…¨å¯ä»¥è·³è¿‡ã€‚",-1)),(0,L.Lk)("div",Qt,[(0,L.bo)((0,L.Lk)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.record.situation=t),class:"garden-input",placeholder:"é‚£ä¸€åˆ»ï¼Œä½ åœ¨å“ªé‡Œï¼Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆå¯ä»¥è·³è¿‡ï¼‰",rows:"4",onInput:e[2]||(e[2]=(...t)=>a.onSituationInput&&a.onSituationInput(...t))},null,544),[[o.Jo,n.record.situation]])]),(0,L.Lk)("div",zt,[(0,L.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>a.skipStep&&a.skipStep(...t)),class:"journey-button secondary"}," æš‚æ—¶è·³è¿‡ï¼Œç›´æŽ¥è¯´æƒ³æ³• "),(0,L.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>a.nextStep&&a.nextStep(...t)),class:"journey-button primary",disabled:!a.canProceed},e[18]||(e[18]=[(0,L.Lk)("span",{class:"button-icon"},"ðŸ’­",-1),(0,L.eW)(" ç»§ç»­æŽ¢ç´¢å†…å¿ƒ ")]),8,qt)])])])):(0,L.Q3)("",!0),2===n.currentStep?((0,L.uX)(),(0,L.CE)("div",Ht,[(0,L.Lk)("div",Jt,[e[24]||(e[24]=(0,L.Lk)("div",{class:"step-icon"},"ðŸ’­",-1)),e[25]||(e[25]=(0,L.Lk)("h2",{class:"step-title"},"é‚£ä¸€åˆ»ï¼Œå†…å¿ƒå†’å‡ºäº†ä»€ä¹ˆæƒ³æ³•ï¼Ÿ",-1)),e[26]||(e[26]=(0,L.Lk)("p",{class:"step-description"}," è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚è¯·è¯šå®žåœ°è®°å½•ä¸‹å½“æ—¶è„‘æµ·ä¸­çš„æƒ³æ³•ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆæ ·çš„ã€‚ ",-1)),(0,L.Lk)("div",Yt,[(0,L.bo)((0,L.Lk)("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>n.record.automaticThought=t),class:"garden-input required",placeholder:"æˆ‘å½“æ—¶æƒ³... / æˆ‘è§‰å¾—... / è¿™è®©æˆ‘æ„Ÿåˆ°...",rows:"4",onInput:e[6]||(e[6]=(...t)=>a.onThoughtInput&&a.onThoughtInput(...t)),required:""},null,544),[[o.Jo,n.record.automaticThought]])]),n.record.automaticThought?((0,L.uX)(),(0,L.CE)("div",Zt,e[22]||(e[22]=[(0,L.Lk)("p",null,[(0,L.Lk)("span",{class:"reminder-icon"},"ðŸ’š"),(0,L.eW)(" ä½ å¾ˆå‹‡æ•¢åœ°é¢å¯¹äº†å†…å¿ƒçš„å£°éŸ³ï¼Œè¿™å°±æ˜¯æˆé•¿çš„å¼€å§‹ã€‚ ")],-1)]))):(0,L.Q3)("",!0),(0,L.Lk)("div",te,[(0,L.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>a.prevStep&&a.prevStep(...t)),class:"journey-button secondary"}," â† å›žåˆ°ä¸Šä¸€æ­¥ "),(0,L.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>a.nextStep&&a.nextStep(...t)),class:"journey-button primary",disabled:!n.record.automaticThought.trim()},e[23]||(e[23]=[(0,L.Lk)("span",{class:"button-icon"},"âœ¨",-1),(0,L.eW)(" å¯»æ‰¾æ–°çš„è§†è§’ ")]),8,ee)])])])):(0,L.Q3)("",!0),3===n.currentStep?((0,L.uX)(),(0,L.CE)("div",se,[(0,L.Lk)("div",oe,[e[32]||(e[32]=(0,L.Lk)("h2",{class:"step-title"},"çŽ°åœ¨çš„æ„Ÿè§‰å’Œåˆšæ‰æ¯”ï¼Œæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ",-1)),e[33]||(e[33]=(0,L.Lk)("p",{class:"step-description"}," è¯·ç¡®è®¤æˆ–è°ƒæ•´ä½ çš„æƒ…ç»ªé€‰æ‹©ã€‚å³ä½¿ä¹‹å‰é€‰æ‹©è¿‡æƒ…ç»ªï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé‡æ–°è¯„ä¼°å’Œè°ƒæ•´ã€‚ ",-1)),n.selectedEmotion&&n.record.emotions.length>0?((0,L.uX)(),(0,L.CE)("div",ie,[(0,L.Lk)("p",ne,[e[27]||(e[27]=(0,L.Lk)("span",{class:"reminder-icon"},"ðŸ’š",-1)),(0,L.eW)(" ä¹‹å‰é€‰æ‹©çš„æ„Ÿå—ï¼š"+(0,C.v_)(n.record.emotions.join("ã€")),1)]),e[28]||(e[28]=(0,L.Lk)("p",{class:"adjustment-hint"},"ä½ å¯ä»¥ä¿æŒè¿™äº›é€‰æ‹©ï¼Œæˆ–è€…é‡æ–°è°ƒæ•´",-1))])):(0,L.Q3)("",!0),(0,L.Lk)("div",ae,[e[29]||(e[29]=(0,L.Lk)("h4",null,"æ­¤åˆ»çš„æ„Ÿå—ï¼š",-1)),(0,L.Lk)("div",le,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.emotionOptions,(e=>((0,L.uX)(),(0,L.CE)("div",{key:e.name,onClick:t=>a.selectCurrentEmotion(e),class:(0,C.C4)(["emotion-option",{selected:n.record.emotions.includes(e.name)}])},[(0,L.Lk)("div",{class:"emotion-icon",style:(0,C.Tr)({background:e.gradient})},(0,C.v_)(e.emoji),5),(0,L.Lk)("span",re,(0,C.v_)(t.$t(`emotions.${e.key}`)),1)],10,ce)))),128))])]),n.record.emotions.length>0?((0,L.uX)(),(0,L.CE)("div",de,[(0,L.Lk)("label",ue,"æ„Ÿå—çš„å¼ºåº¦ï¼š"+(0,C.v_)(n.record.intensity)+"%",1),(0,L.Lk)("div",he,[(0,L.bo)((0,L.Lk)("input",{type:"range",min:"10",max:"100","onUpdate:modelValue":e[9]||(e[9]=t=>n.record.intensity=t),class:"intensity-slider",onInput:e[10]||(e[10]=(...t)=>a.updateEmotionIntensity&&a.updateEmotionIntensity(...t))},null,544),[[o.Jo,n.record.intensity]]),e[30]||(e[30]=(0,L.Lk)("div",{class:"slider-labels"},[(0,L.Lk)("span",null,"è½»å¾®"),(0,L.Lk)("span",null,"å¼ºçƒˆ")],-1))])])):(0,L.Q3)("",!0),(0,L.Lk)("div",ge,[(0,L.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>a.prevStep&&a.prevStep(...t)),class:"journey-button secondary"}," â† ç»§ç»­æŽ¢ç´¢æƒ³æ³• "),(0,L.Lk)("button",{onClick:e[12]||(e[12]=(...t)=>a.proceedToAnalysis&&a.proceedToAnalysis(...t)),class:"journey-button primary",disabled:0===n.record.emotions.length},e[31]||(e[31]=[(0,L.Lk)("span",{class:"button-icon"},"ðŸ¤–",-1),(0,L.eW)(" å’Œæ™ºæ…§ä¼™ä¼´èŠèŠ ")]),8,me)])])])):(0,L.Q3)("",!0),n.showSuccessMessage?((0,L.uX)(),(0,L.CE)("div",pe,e[34]||(e[34]=[(0,L.Lk)("div",{class:"success-card"},[(0,L.Lk)("div",{class:"success-icon"},"ðŸŒ¸"),(0,L.Lk)("h3",null,"è®°å½•å·²ä¿å­˜"),(0,L.Lk)("p",null,"ä½ çš„æƒ³æ³•å·²ç»å®‰å…¨åœ°ä¿å­˜åœ¨å¿ƒçµèŠ±å›­ä¸­")],-1)]))):(0,L.Q3)("",!0)])])}const ke={name:"ThoughtRecord",data(){return{currentStep:0,totalSteps:3,record:{situation:"",automaticThought:"",emotions:[],intensity:70,timestamp:null},selectedEmotion:null,showSuccessMessage:!1,emotionOptions:[{key:"pleasant",emoji:"ðŸ˜Š",color:"#FFC857",gradient:"linear-gradient(135deg, #FFC857, #FFD700)"},{key:"calm",emoji:"ðŸ˜Œ",color:"#84A98C",gradient:"linear-gradient(135deg, #84A98C, #7B9BB3)"},{key:"sad",emoji:"ðŸ˜”",color:"#A0826D",gradient:"linear-gradient(135deg, #A0826D, #8B7355)"},{key:"anxious",emoji:"ðŸ˜°",color:"#9384A8",gradient:"linear-gradient(135deg, #9384A8, #7A6B8A)"},{key:"hopeful",emoji:"ðŸŒŸ",color:"#FF9B85",gradient:"linear-gradient(135deg, #FF9B85, #FFA07A)"},{key:"tired",emoji:"ðŸ˜´",color:"#CAD2C5",gradient:"linear-gradient(135deg, #CAD2C5, #B8C5B8)"},{key:"angry",emoji:"ðŸ˜¡",color:"#C87777",gradient:"linear-gradient(135deg, #C87777, #B66666)"},{key:"confused",emoji:"ðŸ¤”",color:"#9384A8",gradient:"linear-gradient(135deg, #9384A8, #8A7B9B)"}]}},computed:{progressPercentage(){return Math.round(this.currentStep/this.totalSteps*100)},currentStepName(){const t=[this.$t("thoughtRecord.progress.preparing"),this.$t("thoughtRecord.progress.situation"),this.$t("thoughtRecord.progress.thoughts"),this.$t("thoughtRecord.progress.emotions")];return t[this.currentStep]||"æŽ¢ç´¢ä¸­"},canProceed(){return 1===this.currentStep||(2!==this.currentStep||this.record.automaticThought.trim().length>0)},isNegativeThought(){const t=this.record.automaticThought.toLowerCase(),e=["ç³Ÿç³•","å¤±è´¥","ä¸è¡Œ","å®Œäº†","æ²¡ç”¨","å®³æ€•","æ‹…å¿ƒ","ç„¦è™‘","éš¾è¿‡","ç»æœ›"];return e.some((e=>t.includes(e)))}},methods:{goBack(){this.$router.push("/")},nextStep(){this.currentStep<this.totalSteps&&this.currentStep++},prevStep(){this.currentStep>0&&this.currentStep--},skipStep(){this.nextStep()},onSituationInput(){},onThoughtInput(){},selectCurrentEmotion(t){this.record.emotions.includes(t.name)?this.record.emotions=this.record.emotions.filter((e=>e!==t.name)):this.record.emotions.push(t.name)},updateEmotionIntensity(){},async proceedToAnalysis(){await this.saveRecord(),this.$store.state.selectedRecordIndex=0,this.$router.push("/analysis")},async saveRecord(){try{const t={situation:this.record.situation,automaticThought:this.record.automaticThought,emotions:this.record.emotions,intensity:this.record.intensity,timestamp:new Date,id:Date.now(),completed:!1,initialEmotion:this.selectedEmotion};return this.$store.state.thoughtRecords.unshift(t),this.$store.saveState(),this.showSuccessMessage=!0,setTimeout((()=>{this.showSuccessMessage=!1}),2e3),t}catch(t){console.error("ä¿å­˜è®°å½•å¤±è´¥:",t),alert("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},getGardenElementStyle(t){const e=45*t+30*Math.random(),s=100+150*Math.random(),o=Math.cos(e*Math.PI/180)*s,i=Math.sin(e*Math.PI/180)*s,n=3*Math.random(),a=4+2*Math.random();return{left:`calc(50% + ${o}px)`,top:`calc(50% + ${i}px)`,animationDelay:`${n}s`,animationDuration:`${a}s`}},loadInitialEmotion(){if(this.$store.state.currentSession){const t=this.$store.state.currentSession;t.emotions&&Array.isArray(t.emotions)&&t.emotions.length>0?(this.selectedEmotion=t.emotions[0],this.record.emotions=t.emotions.map((t=>t.name))):t.emotion&&(this.selectedEmotion=t.emotion,this.record.emotions=[t.emotion.name])}this.$store.state.currentSession=null}},mounted(){this.loadInitialEmotion(),this.record.timestamp=new Date}},ye=(0,D.A)(ke,[["render",ve],["__scopeId","data-v-35efe9c6"]]),be=ye,Le={class:"mind-greenhouse"},Ce={class:"greenhouse-background"},fe={class:"floating-pollen"},Ee={class:"greenhouse-main"},we={key:0,class:"loading-state"},_e={key:1,class:"seed-selector"},Ae={class:"greenhouse-container"},Se={class:"greenhouse-garden"},Te={class:"flowerpot-grid"},Me=["onClick"],Re={class:"flowerpot-container"},Ie={class:"plant-section"},$e={key:0,class:"topic-title"},De={key:1,class:"topic-title auto-generated"},xe={class:"pot-body"},Be={class:"emotions-display"},Fe={key:0,class:"emotion-tags"},Pe={key:0,class:"emotion-more"},Oe={key:1,class:"no-emotions"},Ne={class:"thought-preview"},Xe={class:"pot-footer"},Ue={class:"record-time"},je={class:"growth-indicator"},Ge={class:"growth-stage"},Ve={key:0,class:"chat-count-persistent"},We={key:2,class:"topic-overview"},Ke={class:"topic-header"},Qe={class:"topic-title-main"},ze={class:"flower-container-fullscreen"},qe=["src","alt"],He={class:"emotion-bubbles-fullscreen"},Je={key:3,class:"greenhouse-flower"},Ye={class:"flower-display"},Ze=["src","alt"],ts={key:0,class:"progress-ring",viewBox:"0 0 100 100"},es=["stroke-dasharray","stroke-dashoffset"],ss={key:1,class:"analysis-stage"},os={key:0,class:"emotion-bubbles-container"},is={key:0,class:"flower-hint"},ns={key:1,class:"error-message"},as={class:"error-content"},ls={class:"error-text"},cs={class:"error-description"},rs={class:"error-actions"},ds={key:0,class:"analysis-results"},us={class:"view-original-section"},hs={class:"results-grid"},gs={class:"empathy-card"},ms={class:"empathy-text"},ps={class:"analysis-card"},vs={class:"bias-list"},ks=["onClick"],ys={class:"bias-header"},bs={class:"bias-icon"},Ls={class:"bias-title"},Cs={class:"bias-description"},fs={class:"exploration-card"},Es={class:"questions-list"},ws={class:"question-icon"},_s={class:"question-text"},As={class:"encouragement-card"},Ss={class:"encouragement-content"},Ts={class:"encouragement-text"},Ms={key:1,class:"companion-disabled"},Rs={class:"modal-header"},Is={class:"modal-body original-content-body"},$s={class:"original-sections"},Ds={class:"original-section"},xs={class:"info-grid"},Bs={class:"info-item"},Fs={key:0,class:"info-item"},Ps={class:"original-section"},Os={class:"emotions-display"},Ns={key:0,class:"emotion-tags"},Xs={key:1,class:"no-data"},Us={class:"original-section"},js={class:"content-text"},Gs={key:0},Vs={key:1,class:"no-data"},Ws={class:"original-section"},Ks={class:"content-text"},Qs={key:0},zs={key:1,class:"no-data"},qs={key:0,class:"original-section"},Hs={class:"content-text"},Js={key:0},Ys={key:1},Zs={class:"original-section"},to={class:"analysis-status"},eo={class:"status-item"},so={key:0,class:"status-item"},oo={key:1,class:"status-item"},io={class:"modal-header"},no={class:"modal-body"},ao={class:"modal-messages"},lo={key:0,class:"typing-indicator"},co=["disabled"],ro={key:0,class:"btn-loading"},uo={key:1};function ho(t,e,s,i,n,a){return(0,L.uX)(),(0,L.CE)("div",Le,[(0,L.Lk)("div",Ce,[e[19]||(e[19]=(0,L.Lk)("div",{class:"greenhouse-glass"},null,-1)),(0,L.Lk)("div",fe,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(8,(t=>(0,L.Lk)("div",{key:t,class:"pollen-particle",style:(0,C.Tr)(a.getPollenStyle(t))},null,4))),64))])]),(0,L.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>a.goBack&&a.goBack(...t)),class:"floating-back-btn","aria-label":"è¿”å›žä¸»é¡µ"},e[20]||(e[20]=[(0,L.Lk)("span",null,"ðŸ¡",-1)])),(0,L.Lk)("main",Ee,[(0,L.bF)(o.eB,{name:"fade"},{default:(0,L.k6)((()=>[n.isDataLoaded?n.selectedRecord?n.selectedRecord&&!n.showAnalysisDetail?((0,L.uX)(),(0,L.CE)("section",We,[(0,L.Lk)("div",Ke,[(0,L.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>a.backToSelection&&a.backToSelection(...t)),class:"back-to-selection-btn"},e[24]||(e[24]=[(0,L.Lk)("span",null,"â† è¿”å›žé€‰æ‹©",-1)])),(0,L.Lk)("h2",Qe,(0,C.v_)(n.selectedRecord.topicTitle||a.generateTopicTitle(n.selectedRecord)),1)]),(0,L.Lk)("div",{class:"fullscreen-flower-area",onClick:e[3]||(e[3]=(...t)=>a.enterDetailView&&a.enterDetailView(...t))},[(0,L.Lk)("div",ze,[(0,L.Lk)("div",{class:(0,C.C4)(["flower-stage-fullscreen",a.getFlowerStageClass()])},[(0,L.Lk)("img",{src:a.getFlowerImage(),alt:a.getFlowerAlt(),class:"flower-image-fullscreen",onError:e[2]||(e[2]=(...t)=>a.handleImageError&&a.handleImageError(...t))},null,40,qe)],2),(0,L.Lk)("div",He,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(a.emotionBubblesPreview,((t,e)=>((0,L.uX)(),(0,L.CE)("div",{key:`preview-bubble-${e}`,class:(0,C.C4)(["emotion-bubble-fullscreen",t.class]),style:(0,C.Tr)(t.style)},(0,C.v_)(t.emotion),7)))),128))])]),e[25]||(e[25]=(0,L.Lk)("div",{class:"interaction-hint"},[(0,L.Lk)("p",{class:"click-hint"},"ç‚¹å‡»èŠ±æœµå¼€å§‹æ·±å…¥åˆ†æž..."),(0,L.Lk)("div",{class:"hint-indicator"},"ðŸ’«")],-1))])])):n.selectedRecord&&n.showAnalysisDetail?((0,L.uX)(),(0,L.CE)("section",Je,[(0,L.Lk)("div",{class:(0,C.C4)(["back-to-overview-container",{"controls-hidden":!n.controlsVisible}])},[(0,L.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>a.backToSelection&&a.backToSelection(...t)),class:"back-to-overview-btn"},e[26]||(e[26]=[(0,L.Lk)("span",null,"â† è¿”å›žé€‰æ‹©é¡µé¢",-1)]))],2),(0,L.Lk)("div",Ye,[(0,L.Lk)("div",{class:"flower-container",onClick:e[6]||(e[6]=(...t)=>a.triggerAnalysis&&a.triggerAnalysis(...t))},[(0,L.Lk)("div",{class:(0,C.C4)(["flower-stage",a.getFlowerStageClass()])},[(0,L.Lk)("img",{src:a.getFlowerImage(),alt:a.getFlowerAlt(),class:(0,C.C4)(["flower-image",{analyzing:n.isAnalyzing,bloomed:a.hasAnalysis}]),onError:e[5]||(e[5]=(...t)=>a.handleImageError&&a.handleImageError(...t))},null,42,Ze),n.isAnalyzing?((0,L.uX)(),(0,L.CE)("svg",ts,[e[27]||(e[27]=(0,L.Lk)("defs",null,[(0,L.Lk)("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[(0,L.Lk)("stop",{offset:"0%",style:{"stop-color":"#84A98C","stop-opacity":"1"}}),(0,L.Lk)("stop",{offset:"50%",style:{"stop-color":"#52796F","stop-opacity":"1"}}),(0,L.Lk)("stop",{offset:"100%",style:{"stop-color":"#FF9B85","stop-opacity":"1"}})]),(0,L.Lk)("filter",{id:"progressGlow"},[(0,L.Lk)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,L.Lk)("feMerge",null,[(0,L.Lk)("feMergeNode",{in:"coloredBlur"}),(0,L.Lk)("feMergeNode",{in:"SourceGraphic"})])])],-1)),e[28]||(e[28]=(0,L.Lk)("circle",{class:"progress-bg",cx:"50",cy:"50",r:"45"},null,-1)),(0,L.Lk)("circle",{class:"progress-bar",cx:"50",cy:"50",r:"45","stroke-dasharray":a.progressCircumference,"stroke-dashoffset":a.progressOffset,filter:"url(#progressGlow)"},null,8,es)])):(0,L.Q3)("",!0),n.isAnalyzing?((0,L.uX)(),(0,L.CE)("div",ss,(0,C.v_)(a.currentAnalysisStage),1)):(0,L.Q3)("",!0)],2),n.selectedRecord?((0,L.uX)(),(0,L.CE)("div",os,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.emotionBubbles,((t,e)=>((0,L.uX)(),(0,L.CE)("div",{key:`bubble-${e}`,class:(0,C.C4)(["emotion-bubble",t.class]),style:(0,C.Tr)(t.style)},(0,C.v_)(t.emotion),7)))),128))])):(0,L.Q3)("",!0)]),a.hasAnalysis||n.analysisError?(0,L.Q3)("",!0):((0,L.uX)(),(0,L.CE)("p",is," è½»è§¦èŠ±æœµï¼Œè®©æ™ºæ…§ä¼™ä¼´ä¸ºä½ åˆ†æž... ")),n.analysisError?((0,L.uX)(),(0,L.CE)("div",ns,[(0,L.Lk)("div",as,[e[30]||(e[30]=(0,L.Lk)("span",{class:"error-icon"},"âš ï¸",-1)),(0,L.Lk)("div",ls,[e[29]||(e[29]=(0,L.Lk)("p",{class:"error-title"},"åˆ†æžé‡åˆ°å°é—®é¢˜",-1)),(0,L.Lk)("p",cs,(0,C.v_)(n.analysisError),1),(0,L.Lk)("div",rs,[(0,L.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>a.triggerAnalysis&&a.triggerAnalysis(...t)),class:"retry-btn"},"é‡è¯•"),(0,L.Lk)("button",{onClick:e[8]||(e[8]=t=>n.analysisError=null),class:"dismiss-btn"},"çŸ¥é“äº†")])])])])):(0,L.Q3)("",!0)]),(0,L.bF)(o.eB,{name:"fade-slide"},{default:(0,L.k6)((()=>[a.hasAnalysis?((0,L.uX)(),(0,L.CE)("div",ds,[(0,L.Lk)("div",us,[(0,L.Lk)("button",{onClick:e[9]||(e[9]=t=>n.showOriginalContent=!0),class:"view-original-btn"}," ðŸ“‹ æŸ¥çœ‹åŽŸå§‹è®°å½• ")]),(0,L.Lk)("div",hs,[(0,L.Lk)("section",gs,[e[31]||(e[31]=(0,L.Lk)("h3",{class:"card-title"},[(0,L.Lk)("span",{class:"title-icon"},"ðŸ’"),(0,L.Lk)("span",null,"æ¸©æš–ç†è§£")],-1)),(0,L.Lk)("p",ms,(0,C.v_)(n.analysisResult.empathy),1)]),(0,L.Lk)("section",ps,[e[32]||(e[32]=(0,L.Lk)("h3",{class:"card-title"},[(0,L.Lk)("span",{class:"title-icon"},"ðŸ”®"),(0,L.Lk)("span",null,"å¿ƒçµè§£è¯»")],-1)),(0,L.Lk)("div",vs,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.analysisResult.cognitiveBiases,((t,e)=>((0,L.uX)(),(0,L.CE)("article",{key:e,class:(0,C.C4)(["bias-item",{active:n.activeBiasIndex===e}]),onClick:t=>n.activeBiasIndex=e},[(0,L.Lk)("header",ys,[(0,L.Lk)("span",bs,(0,C.v_)(t.icon),1),(0,L.Lk)("h4",Ls,(0,C.v_)(t.label),1)]),(0,L.Lk)("p",Cs,(0,C.v_)(t.description),1)],10,ks)))),128))])]),(0,L.Lk)("section",fs,[e[33]||(e[33]=(0,L.Lk)("h3",{class:"card-title"},[(0,L.Lk)("span",{class:"title-icon"},"ðŸ’­"),(0,L.Lk)("span",null,"æ¸©æŸ”æŽ¢ç´¢")],-1)),(0,L.Lk)("div",Es,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.analysisResult.guidingQuestions,((t,e)=>((0,L.uX)(),(0,L.CE)("div",{key:e,class:"question-item"},[(0,L.Lk)("span",ws,(0,C.v_)(t.icon),1),(0,L.Lk)("p",_s,(0,C.v_)(t.text),1)])))),128))])]),(0,L.Lk)("section",As,[(0,L.Lk)("div",Ss,[e[34]||(e[34]=(0,L.Lk)("span",{class:"encouragement-icon"},"âœ¨",-1)),(0,L.Lk)("p",Ts,(0,C.v_)(n.analysisResult.encouragement),1)])])]),a.hasAnalysis?((0,L.uX)(),(0,L.CE)("div",{key:0,class:(0,C.C4)(["bottom-hint",{"controls-hidden":!n.controlsVisible}])},[a.isWisdomCompanionEnabled?((0,L.uX)(),(0,L.CE)("div",{key:0,class:"companion-hint",onClick:e[10]||(e[10]=(...t)=>a.openChatDialog&&a.openChatDialog(...t))},e[35]||(e[35]=[(0,L.Lk)("span",{class:"hint-icon"},"ðŸ’¬",-1),(0,L.Lk)("span",{class:"hint-text"},"ä¸Žæ™ºæ…§ä¼™ä¼´æ·±åº¦å¯¹è¯",-1)]))):((0,L.uX)(),(0,L.CE)("div",Ms,[e[36]||(e[36]=(0,L.Lk)("span",{class:"rest-icon"},"ðŸŒ™",-1)),(0,L.Lk)("p",null,(0,C.v_)(a.getDisabledMessage()),1)]))],2)):(0,L.Q3)("",!0)])):(0,L.Q3)("",!0)])),_:1})])):(0,L.Q3)("",!0):((0,L.uX)(),(0,L.CE)("section",_e,[(0,L.Lk)("div",Ae,[e[23]||(e[23]=(0,L.Lk)("header",{class:"greenhouse-header"},[(0,L.Lk)("h1",null,"ðŸŒ¿ å¿ƒçµæ¸©å®¤"),(0,L.Lk)("p",null,"åœ¨è¿™ä¸ªæ¸©æš–çš„æ¸©å®¤é‡Œï¼Œæ¯ä¸ªæƒ³æ³•éƒ½åœ¨ç­‰å¾…ç»½æ”¾")],-1)),(0,L.Lk)("div",Se,[e[22]||(e[22]=(0,L.Lk)("h2",null,"æ¸©å®¤ä¸­çš„èŠ±ç›†",-1)),(0,L.Lk)("div",Te,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(t.$store.state.thoughtRecords,((t,e)=>((0,L.uX)(),(0,L.CE)("article",{key:t.id||e,onClick:t=>a.selectSeed(e),class:(0,C.C4)(["flowerpot-item",{fresh:0===e,bloomed:t.completed}])},[(0,L.Lk)("div",Re,[(0,L.Lk)("div",Ie,[(0,L.Lk)("div",{class:(0,C.C4)(["plant-icon",a.getPlantStageClass(t)])},(0,C.v_)(a.getPlantIcon(t)),3),t.topicTitle?((0,L.uX)(),(0,L.CE)("div",$e,(0,C.v_)(t.topicTitle),1)):((0,L.uX)(),(0,L.CE)("div",De,(0,C.v_)(a.generateTopicTitle(t)),1))]),(0,L.Lk)("div",xe,[(0,L.Lk)("div",Be,[a.getRecordEmotions(t).length>0?((0,L.uX)(),(0,L.CE)("div",Fe,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(a.getRecordEmotions(t).slice(0,3),(t=>((0,L.uX)(),(0,L.CE)("span",{key:t,class:"emotion-tag",style:(0,C.Tr)(a.getEmotionTagStyle(t))},(0,C.v_)(t),5)))),128)),a.getRecordEmotions(t).length>3?((0,L.uX)(),(0,L.CE)("span",Pe," +"+(0,C.v_)(a.getRecordEmotions(t).length-3),1)):(0,L.Q3)("",!0)])):((0,L.uX)(),(0,L.CE)("span",Oe,"æœªè®°å½•æƒ…ç»ª"))]),(0,L.Lk)("div",Ne,' "'+(0,C.v_)(a.truncateText(t.automaticThought,45))+'" ',1),(0,L.Lk)("div",Xe,[(0,L.Lk)("time",Ue,(0,C.v_)(a.formatTime(t.timestamp)),1),(0,L.Lk)("div",je,[(0,L.Lk)("span",Ge,(0,C.v_)(a.getGrowthStageText(t)),1)])])])]),a.getChatCount(t)>0?((0,L.uX)(),(0,L.CE)("div",Ve," ðŸ’¬ "+(0,C.v_)(a.getChatCount(t))+"æ¬¡å¯¹è¯ ",1)):(0,L.Q3)("",!0)],10,Me)))),128))])])])])):((0,L.uX)(),(0,L.CE)("div",we,e[21]||(e[21]=[(0,L.Lk)("div",{class:"loading-spinner"},[(0,L.Lk)("div",{class:"spinner"})],-1),(0,L.Lk)("p",{class:"loading-text"},"æ­£åœ¨å‡†å¤‡æ¸©å®¤...",-1)])))])),_:1})]),((0,L.uX)(),(0,L.Wv)(L.Im,{to:"body"},[(0,L.bF)(o.eB,{name:"modal"},{default:(0,L.k6)((()=>[n.showOriginalContent?((0,L.uX)(),(0,L.CE)("div",{key:0,class:"modal-overlay",onClick:e[13]||(e[13]=t=>n.showOriginalContent=!1)},[(0,L.Lk)("div",{class:"modal-dialog original-content-dialog",onClick:e[12]||(e[12]=(0,o.D$)((()=>{}),["stop"]))},[(0,L.Lk)("header",Rs,[e[37]||(e[37]=(0,L.Lk)("h3",null,"ðŸ“‹ åŽŸå§‹è®°å½•è¯¦æƒ…",-1)),(0,L.Lk)("button",{onClick:e[11]||(e[11]=t=>n.showOriginalContent=!1),class:"modal-close","aria-label":"å…³é—­"}," Ã— ")]),(0,L.Lk)("div",Is,[(0,L.Lk)("div",$s,[(0,L.Lk)("section",Ds,[e[40]||(e[40]=(0,L.Lk)("h4",{class:"section-title"},"â° è®°å½•ä¿¡æ¯",-1)),(0,L.Lk)("div",xs,[(0,L.Lk)("div",Bs,[e[38]||(e[38]=(0,L.Lk)("label",null,"è®°å½•æ—¶é—´:",-1)),(0,L.Lk)("span",null,(0,C.v_)(a.formatDetailedTime(n.selectedRecord?.timestamp)),1)]),n.selectedRecord?.intensity?((0,L.uX)(),(0,L.CE)("div",Fs,[e[39]||(e[39]=(0,L.Lk)("label",null,"æƒ…ç»ªå¼ºåº¦:",-1)),(0,L.Lk)("span",null,(0,C.v_)(n.selectedRecord.intensity)+"/10",1)])):(0,L.Q3)("",!0)])]),(0,L.Lk)("section",Ps,[e[41]||(e[41]=(0,L.Lk)("h4",{class:"section-title"},"ðŸ’­ æƒ…ç»ªçŠ¶æ€",-1)),(0,L.Lk)("div",Os,[a.getRecordEmotions(n.selectedRecord).length>0?((0,L.uX)(),(0,L.CE)("div",Ns,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(a.getRecordEmotions(n.selectedRecord),(t=>((0,L.uX)(),(0,L.CE)("span",{key:t,class:"emotion-tag original"},(0,C.v_)(t),1)))),128))])):((0,L.uX)(),(0,L.CE)("p",Xs,"æœªè®°å½•æƒ…ç»ª"))])]),(0,L.Lk)("section",Us,[e[42]||(e[42]=(0,L.Lk)("h4",{class:"section-title"},"ðŸŽ¬ é‡åˆ°çš„æƒ…å†µ",-1)),(0,L.Lk)("div",js,[n.selectedRecord?.situation?((0,L.uX)(),(0,L.CE)("p",Gs,(0,C.v_)(n.selectedRecord.situation),1)):((0,L.uX)(),(0,L.CE)("p",Vs,"æœªæè¿°å…·ä½“æƒ…å¢ƒ"))])]),(0,L.Lk)("section",Ws,[e[43]||(e[43]=(0,L.Lk)("h4",{class:"section-title"},"ðŸ§  å†…å¿ƒæƒ³æ³•",-1)),(0,L.Lk)("div",Ks,[n.selectedRecord?.automaticThought?((0,L.uX)(),(0,L.CE)("p",Qs,'"'+(0,C.v_)(n.selectedRecord.automaticThought)+'"',1)):((0,L.uX)(),(0,L.CE)("p",zs,"æœªè®°å½•å…·ä½“æƒ³æ³•"))])]),n.selectedRecord?.physicalSensations||n.selectedRecord?.bodyLocation?((0,L.uX)(),(0,L.CE)("section",qs,[e[44]||(e[44]=(0,L.Lk)("h4",{class:"section-title"},"ðŸ«€ èº«ä½“æ„Ÿå—",-1)),(0,L.Lk)("div",Hs,[n.selectedRecord.physicalSensations?((0,L.uX)(),(0,L.CE)("p",Js,(0,C.v_)(n.selectedRecord.physicalSensations),1)):(0,L.Q3)("",!0),n.selectedRecord.bodyLocation?((0,L.uX)(),(0,L.CE)("p",Ys,"ä½ç½®: "+(0,C.v_)(n.selectedRecord.bodyLocation),1)):(0,L.Q3)("",!0)])])):(0,L.Q3)("",!0),(0,L.Lk)("section",Zs,[e[48]||(e[48]=(0,L.Lk)("h4",{class:"section-title"},"ðŸ“Š åˆ†æžçŠ¶æ€",-1)),(0,L.Lk)("div",to,[(0,L.Lk)("div",eo,[e[45]||(e[45]=(0,L.Lk)("span",{class:"status-label"},"å®ŒæˆçŠ¶æ€:",-1)),(0,L.Lk)("span",{class:(0,C.C4)({completed:n.selectedRecord?.completed,pending:!n.selectedRecord?.completed})},(0,C.v_)(n.selectedRecord?.completed?"âœ… å·²å®Œæˆåˆ†æž":"â³ å¾…åˆ†æž"),3)]),n.selectedRecord?.analysisCompleteTime?((0,L.uX)(),(0,L.CE)("div",so,[e[46]||(e[46]=(0,L.Lk)("span",{class:"status-label"},"åˆ†æžæ—¶é—´:",-1)),(0,L.Lk)("span",null,(0,C.v_)(a.formatDetailedTime(n.selectedRecord.analysisCompleteTime)),1)])):(0,L.Q3)("",!0),a.getChatCount(n.selectedRecord)>0?((0,L.uX)(),(0,L.CE)("div",oo,[e[47]||(e[47]=(0,L.Lk)("span",{class:"status-label"},"å¯¹è¯æ¬¡æ•°:",-1)),(0,L.Lk)("span",null,(0,C.v_)(a.getChatCount(n.selectedRecord))+"æ¬¡",1)])):(0,L.Q3)("",!0)])])])])])])):(0,L.Q3)("",!0)])),_:1})])),((0,L.uX)(),(0,L.Wv)(L.Im,{to:"body"},[(0,L.bF)(o.eB,{name:"modal"},{default:(0,L.k6)((()=>[n.showChatDialog?((0,L.uX)(),(0,L.CE)("div",{key:0,class:"modal-overlay",onClick:e[18]||(e[18]=(...t)=>a.closeChatDialog&&a.closeChatDialog(...t))},[(0,L.Lk)("div",{class:"modal-dialog",onClick:e[17]||(e[17]=(0,o.D$)((()=>{}),["stop"]))},[(0,L.Lk)("header",io,[e[49]||(e[49]=(0,L.Lk)("h3",null,"ðŸ¤– æ™ºæ…§ä¼™ä¼´å¯¹è¯",-1)),(0,L.Lk)("button",{onClick:e[14]||(e[14]=(...t)=>a.closeChatDialog&&a.closeChatDialog(...t)),class:"modal-close","aria-label":"å…³é—­"}," Ã— ")]),(0,L.Lk)("div",no,[(0,L.Lk)("div",ao,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.deepChatMessages,((t,e)=>((0,L.uX)(),(0,L.CE)("div",{key:`deep-${e}`,class:(0,C.C4)(["modal-message",t.type])},(0,C.v_)(t.content),3)))),128)),n.isTyping?((0,L.uX)(),(0,L.CE)("div",lo,e[50]||(e[50]=[(0,L.Lk)("div",{class:"typing-message"},[(0,L.Lk)("div",{class:"typing-avatar"},"ðŸ¤–"),(0,L.Lk)("div",{class:"typing-content"},[(0,L.Lk)("span",{class:"typing-text"},"æ™ºæ…§ä¼™ä¼´æ­£åœ¨æ€è€ƒ..."),(0,L.Lk)("div",{class:"typing-dots"},[(0,L.Lk)("span"),(0,L.Lk)("span"),(0,L.Lk)("span")])])],-1)]))):(0,L.Q3)("",!0)]),(0,L.Lk)("form",{class:"modal-form",onSubmit:e[16]||(e[16]=(0,o.D$)(((...t)=>a.sendMessage&&a.sendMessage(...t)),["prevent"]))},[(0,L.bo)((0,L.Lk)("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>n.deepChatInput=t),type:"text",placeholder:"åˆ†äº«ä½ çš„æƒ³æ³•...",class:"modal-input"},null,512),[[o.Jo,n.deepChatInput]]),(0,L.Lk)("button",{type:"submit",class:"modal-send",disabled:!n.deepChatInput.trim()||n.isTyping},[n.isTyping?((0,L.uX)(),(0,L.CE)("span",ro,e[51]||(e[51]=[(0,L.Lk)("span",{class:"btn-spinner"},null,-1),(0,L.eW)(" å‘é€ä¸­... ")]))):((0,L.uX)(),(0,L.CE)("span",uo,"å‘é€"))],8,co)],32)])])])):(0,L.Q3)("",!0)])),_:1})]))])}class go extends Error{constructor(t,e,s=null,o=null){super(t),this.name="ApiError",this.code=e,this.details=s,this.status=o}static fromResponse(t,e){const s=t.status,o=e?.message||`è¯·æ±‚å¤±è´¥ (${s})`,i=e?.code||"API_ERROR",n=e?.details||null;return new go(o,i,n,s)}static fromError(t){return new go(t.message||"æœªçŸ¥é”™è¯¯","INTERNAL_ERROR",t.stack,500)}}class mo{constructor(){this.baseUrl="/api/llm-proxy",this.maxRetries=3,this.retryDelay=1e3,this.vueInstance=null}setVueInstance(t){this.vueInstance=t}getApiConfig(t=null){let e=null;if(t&&t.$store?e=t.$store.state:window.$store?e=window.$store.state:window.vueApp&&window.vueApp.config.globalProperties.$store&&(e=window.vueApp.config.globalProperties.$store.state),!e)return console.warn("[LLM] æ— æ³•è®¿é—®storeï¼Œä½¿ç”¨é»˜è®¤é…ç½®"),{apiKey:"",apiUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",model:"qwen-turbo"};const s=e.configMode||"cloud";let o,i,n;console.log("[LLM] å½“å‰é…ç½®æ¨¡å¼:",s),"cloud"===s?(o=e.appConfig?.llm?.apiKey||"",i=e.appConfig?.llm?.apiUrl||"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",n=e.appConfig?.llm?.modelName||"qwen-turbo"):(o=e.apiConfig?.apiKey||"",i=e.apiConfig?.endpoint||e.apiConfig?.apiUrl||"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",n=e.apiConfig?.model||"qwen-turbo");const a=n&&"string"===typeof n&&n.length>0&&"0"!==n&&"undefined"!==n&&"null"!==n&&!n.match(/^\d+$/)?n:"qwen-turbo";return console.log("[LLM] èŽ·å–APIé…ç½®:",{configMode:s,hasApiKey:!!o,apiUrl:i,model:a,rawModel:n}),{apiKey:o,apiUrl:i,model:a}}async sendRequest(t,e=0){try{const s=this.getApiConfig(this.vueInstance);console.log(`[LLM] å‘é€è¯·æ±‚ (å°è¯• ${e+1}/${this.maxRetries+1})`,{messageCount:t.messages?.length,firstMessage:t.messages?.[0]?.content?.substring(0,50)+"...",hasApiKey:!!s.apiKey,apiUrl:s.apiUrl,baseUrl:this.baseUrl});const o=this.baseUrl,i={"Content-Type":"application/json","X-API-Key":s.apiKey||"","X-API-URL":s.apiUrl||"","X-Model-Name":s.model||"qwen-turbo"},n=JSON.stringify({...t,model:s.model||"qwen-turbo"}),a=await fetch(o,{method:"POST",headers:i,body:n}),l=a.headers.get("content-type");if(!l?.includes("application/json")){const t=await a.text();throw console.error("[LLM] æ”¶åˆ°éžJSONå“åº”:",{status:a.status,contentType:l,text:t.substring(0,200)}),new go("æœåŠ¡å™¨è¿”å›žäº†éžJSONå“åº”","INVALID_RESPONSE_TYPE",{contentType:l,preview:t.substring(0,100)},a.status)}const c=await a.json();if(!a.ok)throw go.fromResponse(a,c);if(!c.content&&!c.choices?.[0]?.message?.content)throw new go("æ— æ•ˆçš„å“åº”æ ¼å¼","INVALID_RESPONSE_FORMAT",{received:Object.keys(c),expected:["content","choices[0].message.content"]},a.status);return{content:c.content||c.choices[0].message.content,usage:c.usage,model:c.model}}catch(s){if(console.error("[LLM] è¯·æ±‚å¤±è´¥:",{attempt:e+1,error:{name:s.name,message:s.message,code:s.code,status:s.status}}),s.message?.includes("404")||404===s.status)throw new go("æ™ºæ…§ä¼™ä¼´æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åŽå†è¯•ï¼Œæˆ–æ£€æŸ¥ç½‘ç»œè¿žæŽ¥","API_ENDPOINT_NOT_FOUND",{baseUrl:this.baseUrl,suggestion:"è¯·ç¡®è®¤æœåŠ¡å™¨é…ç½®æ­£ç¡®"},404);const o=this.shouldRetryError(s)&&e<this.maxRetries;if(o)return console.log(`[LLM] ç­‰å¾… ${this.retryDelay}ms åŽé‡è¯•...`),await new Promise((t=>setTimeout(t,this.retryDelay))),this.sendRequest(t,e+1);throw s instanceof go?s:go.fromError(s)}}shouldRetryError(t){if(!t.status||t.status>=500)return!0;const e=["INVALID_API_KEY","INVALID_REQUEST","INVALID_RESPONSE_FORMAT"];return!e.includes(t.code)}async analyzeThought(t){const e={role:"system",content:"ä½ æ˜¯ä¸€ä½æ¸©æŸ”ã€ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢å¸ˆï¼Œä¸“æ³¨äºŽè®¤çŸ¥è¡Œä¸ºç–—æ³•(CBT)ã€‚\nä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·åˆ†æžä»–ä»¬çš„æƒ³æ³•ï¼Œè¯†åˆ«è®¤çŸ¥åå·®ï¼Œå¹¶å¼•å¯¼ä»–ä»¬å‘å±•æ›´å¥åº·çš„æ€ç»´æ–¹å¼ã€‚\n\nè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼å›žå¤ï¼š\n\nå…±æƒ…ç†è§£ï¼š\n[ç”¨æ¸©æš–çš„è¯­æ°”å†™2-3å¥è¯ï¼Œè¡¨è¾¾å¯¹ç”¨æˆ·æƒ…å†µçš„ç†è§£å’Œå…±æƒ…]\n\nè®¤çŸ¥åå·®ï¼š\n1. [åå·®ç±»åž‹]: [ç®€çŸ­è§£é‡Šè¿™ç§æ€ç»´æ–¹å¼å¦‚ä½•ä½“çŽ°åœ¨ç”¨æˆ·çš„æƒ³æ³•ä¸­]\n2. [åå·®ç±»åž‹]: [ç®€çŸ­è§£é‡Š]\n(è¯†åˆ«1-3ä¸ªä¸»è¦çš„è®¤çŸ¥åå·®)\n\nå¼•å¯¼é—®é¢˜ï¼š\n1. [ä¸€ä¸ªæŽ¢ç´¢æ€§é—®é¢˜ï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥ç†è§£è‡ªå·±çš„æƒ³æ³•]\n2. [ä¸€ä¸ªæŒ‘æˆ˜æ€§é—®é¢˜ï¼Œå¸®åŠ©ç”¨æˆ·çœ‹åˆ°ä¸åŒçš„è§†è§’]\n3. [ä¸€ä¸ªè¡ŒåŠ¨å¯¼å‘çš„é—®é¢˜ï¼Œå¼•å¯¼ç”¨æˆ·é‡‡å–ç§¯æžçš„æ­¥éª¤]\n\né¼“åŠ±ï¼š\n[å†™ä¸€æ®µæ¸©æš–æœ‰åŠ›çš„è¯ï¼Œè‚¯å®šç”¨æˆ·çš„å‹‡æ°”ï¼Œç»™å‡ºå…·ä½“çš„å‰è¿›æ–¹å‘ï¼ŒåŒæ—¶è¡¨è¾¾å¯¹ç”¨æˆ·æˆé•¿çš„ä¿¡å¿ƒ]\n\nè¯·ä½¿ç”¨æ¸©æš–å‹å–„çš„è¯­æ°”ï¼Œé¿å…è¯´æ•™æˆ–æ‰¹è¯„ã€‚æ¯ä¸ªéƒ¨åˆ†è¦ç®€æ´æœ‰åŠ›ã€‚"},s={role:"user",content:`æˆ‘çŽ°åœ¨çš„å¿ƒæƒ…æ˜¯ï¼š${t.emotions.join("ã€")}\næˆ‘é‡åˆ°çš„æƒ…å†µæ˜¯ï¼š${t.situation||"(æœªæè¿°å…·ä½“æƒ…å¢ƒ)"}\næˆ‘çš„æƒ³æ³•æ˜¯ï¼š${t.automaticThought}`};try{console.log("[LLM] å¼€å§‹åˆ†æžæ€æƒ³è®°å½•:",{emotions:t.emotions,hasThought:!!t.automaticThought,hasSituation:!!t.situation});const o=await this.sendRequest({messages:[e,s],temperature:.7,max_tokens:1e3});return o.content}catch(o){throw console.error("[LLM] åˆ†æžå¤±è´¥:",o),new go("å¾ˆæŠ±æ­‰ï¼Œåˆ†æžè¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ã€‚è¯·ç¨åŽå†è¯•ã€‚","ANALYSIS_FAILED",o.details,o.status)}}async continueChat(t,e,s={}){const o=s.analysis?this.formatAnalysisContext(s.analysis):"",i=this.buildEmotionalContext(s),n={role:"system",content:`ä½ æ˜¯ä¸€ä½æ¸©æŸ”ã€ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢å¸ˆï¼Œä¸“æ³¨äºŽè®¤çŸ¥è¡Œä¸ºç–—æ³•(CBT)ã€‚\nä½ æ­£åœ¨ä¸Žä¸€ä½ç”¨æˆ·è¿›è¡Œæ·±å…¥å¯¹è¯ã€‚ä»¥ä¸‹æ˜¯ç”¨æˆ·çš„å®Œæ•´èƒŒæ™¯ä¿¡æ¯ï¼š\n\n## ç”¨æˆ·æƒ…å†µæ¦‚è§ˆ\n${i}\n\n## æ€ç»´åˆ†æžç»“æžœ\n${o}\n\n## å¯¹è¯æŒ‡å¯¼åŽŸåˆ™\n1. **æ¸©æš–å…±æƒ…**: ç”¨æ¸©æš–çš„è¯­æ°”å›žåº”ï¼Œè¡¨è¾¾ç†è§£å’Œæ”¯æŒ\n2. **å¾ªåºæ¸è¿›**: ä¸è¦ä¸€æ¬¡æä¾›å¤ªå¤šå»ºè®®ï¼Œä¸“æ³¨äºŽå½“å‰è¯é¢˜\n3. **å¯å‘å¼•å¯¼**: å¤šç”¨å¼€æ”¾æ€§é—®é¢˜å¸®åŠ©ç”¨æˆ·è‡ªæˆ‘æŽ¢ç´¢\n4. **å…·ä½“å®žç”¨**: æä¾›å…·ä½“å¯è¡Œçš„å»ºè®®å’Œç»ƒä¹ \n5. **ç®€æ´æœ‰åŠ›**: å›žå¤æŽ§åˆ¶åœ¨2-3å¥è¯ï¼Œé¿å…å†—é•¿è¯´æ•™\n6. **CBTæŠ€å·§**: é€‚æ—¶è¿ç”¨è®¤çŸ¥é‡æž„ã€è¡Œä¸ºå®žéªŒç­‰CBTæŠ€å·§\n\nè¯·åŸºäºŽç”¨æˆ·çš„å…·ä½“æƒ…å†µå’Œå½“å‰å¯¹è¯å†…å®¹ï¼Œæä¾›ä¸ªæ€§åŒ–çš„å›žåº”ã€‚`},a=[n,...t,{role:"user",content:e}];try{console.log("[LLM] ç»§ç»­å¯¹è¯:",{historyLength:t.length,newMessage:e.substring(0,50)+"...",context:{emotions:s.emotions,hasThought:!!s.thought,hasSituation:!!s.situation,biasCount:s.analysis?.cognitiveBiases?.length}});const o=await this.sendRequest({messages:a,temperature:.7,max_tokens:500});return o.content}catch(l){throw console.error("[LLM] å¯¹è¯å¤±è´¥:",l),new go("å¾ˆæŠ±æ­‰ï¼Œæˆ‘çŽ°åœ¨é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚è®©æˆ‘ä»¬ç¨åŽå†ç»§ç»­å¯¹è¯ã€‚","CHAT_FAILED",l.details,l.status)}}formatAnalysisContext(t){if(!t)return"æš‚æ— åˆ†æžç»“æžœ";const e=[];if(t.empathy&&e.push(`**å…±æƒ…ç†è§£**: ${t.empathy}`),t.cognitiveBiases&&t.cognitiveBiases.length>0){const s=t.cognitiveBiases.map((t=>`  - ${t.label}: ${t.description}`)).join("\n");e.push(`**è¯†åˆ«çš„è®¤çŸ¥åå·®**:\n${s}`)}if(t.guidingQuestions&&t.guidingQuestions.length>0){const s=t.guidingQuestions.map(((t,e)=>`  ${e+1}. ${t.text}`)).join("\n");e.push(`**å»ºè®®çš„æŽ¢ç´¢æ–¹å‘**:\n${s}`)}return e.join("\n\n")||"æš‚æ— åˆ†æžç»“æžœ"}buildEmotionalContext(t){const e=[];if(t.emotions&&t.emotions.length>0&&e.push(`**å½“å‰æƒ…ç»ª**: ${t.emotions.join("ã€")}`),t.situation&&e.push(`**é‡åˆ°çš„æƒ…å†µ**: ${t.situation}`),t.thought&&e.push(`**å†…å¿ƒæƒ³æ³•**: "${t.thought}"`),t.timestamp){const s=new Date(t.timestamp).toLocaleString("zh-CN");e.push(`**è®°å½•æ—¶é—´**: ${s}`)}return e.join("\n")||"ç”¨æˆ·æš‚æœªæä¾›è¯¦ç»†æƒ…å†µæè¿°"}}const po=new mo,vo={name:"CognitiveAnalysis",data(){return{selectedRecord:null,isAnalyzing:!1,controlsVisible:!1,hideTimeout:null,touchStartY:null,isTyping:!1,analysisResult:null,showChatDialog:!1,deepChatInput:"",deepChatMessages:[],randomFlowerColor:this.generateRandomFlowerColor(),activeBiasIndex:null,analysisStage:0,analysisStages:["æ­£åœ¨ç†è§£ä½ çš„æƒ³æ³•...","å¯»æ‰¾è®¤çŸ¥æ¨¡å¼...","å‡†å¤‡æ¸©æš–å»ºè®®...","ç¼–ç»‡é¼“åŠ±è¯è¯­...","æ•´ç†åˆ†æžç»“æžœ...","å®Œå–„ç»†èŠ‚å†…å®¹..."],hasExistingAnalysis:!1,chatTopics:[],currentChatTopic:null,isInitialized:!1,analysisError:null,showOriginalContent:!1,isDataLoaded:!1,emotionBubbles:[],resizeTimeout:null,showAnalysisDetail:!1}},computed:{hasAnalysis(){return!!this.analysisResult},isWisdomCompanionEnabled(){return this.$store.state.appConfig?.features?.wisdomCompanionEnabled??!0},progressCircumference(){return 2*Math.PI*45},progressOffset(){const t=Math.min(this.analysisStage/(this.analysisStages.length-1),1);return this.progressCircumference*(1-t)},currentAnalysisStage(){return this.analysisStages[this.analysisStage]},emotionBubblesPreview(){if(!this.selectedRecord)return[];const t=this.getRecordEmotions(this.selectedRecord);if(0===t.length)return[];const e=window.innerWidth<=768,s=window.innerWidth<=480,o=[],i=Math.min(t.length,e?4:5),n=[{x:80,y:-60,angle:15},{x:-90,y:-40,angle:-20},{x:100,y:20,angle:25},{x:-80,y:30,angle:-15},{x:60,y:80,angle:10}];for(let a=0;a<i;a++){const i=t[a],l=n[a]||n[0],c=e?s?.7:.8:1,r=l.x*c,d=l.y*c,u={emotion:i,style:{left:"50%",top:"50%",transform:`translate(calc(-50% + ${r}px), calc(-50% + ${d}px)) rotate(${l.angle}deg)`,"--hue":(65*a+45)%360+"deg",animationDelay:.25*a+"s",position:"absolute",zIndex:5+a},class:"preview-bubble-"+a%4};o.push(u)}return console.log(`[é¢„è§ˆæ°”æ³¡] ç”Ÿæˆ ${o.length} ä¸ªé¢„è§ˆæ°”æ³¡`),o}},methods:{goBack(){this.$router.push("/")},enterDetailView(){this.showAnalysisDetail=!0,this.resetUIHideState(),this.emotionBubbles=[],this.$nextTick((()=>{setTimeout((()=>{this.generateEmotionBubbles()}),100)}))},backToSelection(){this.selectedRecord=null,this.showAnalysisDetail=!1,this.$store.state.selectedRecordIndex=void 0},selectSeed(t){if(this.$store.state.thoughtRecords&&this.$store.state.thoughtRecords[t]){if(this.selectedRecord=this.$store.state.thoughtRecords[t],this.$store.state.selectedRecordIndex=t,this.emotionBubbles=[],this.selectedRecord.analysisData)if(console.log("[CognitiveAnalysis] æ¢å¤å·²ä¿å­˜çš„åˆ†æžç»“æžœ",this.selectedRecord.analysisData),this.analysisResult=this.selectedRecord.analysisData,this.showAnalysisDetail=!0,this.resetUIHideState(),this.selectedRecord.chatTopics&&this.selectedRecord.chatTopics.length>0){const t=this.selectedRecord.chatTopics[this.selectedRecord.chatTopics.length-1];this.deepChatMessages=t.messages||[],this.currentChatTopic=t}else this.deepChatMessages=[{type:"companion",content:"æˆ‘å·²ç»åˆ†æžäº†ä½ çš„æƒ³æ³•ï¼Œæœ‰ä»€ä¹ˆæƒ³æ·±å…¥æŽ¢è®¨çš„å—ï¼Ÿ"}];else this.showAnalysisDetail=!1,this.analysisResult=null,this.deepChatMessages=[],this.currentChatTopic=null;this.randomFlowerColor=this.generateRandomFlowerColor(),this.$nextTick((()=>{setTimeout((()=>{this.generateEmotionBubbles()}),150)}))}else console.warn("[CognitiveAnalysis] å°è¯•é€‰æ‹©æ— æ•ˆçš„è®°å½•ç´¢å¼•:",t)},getFirstEmotion(t){const e=this.getRecordEmotions(t);return e[0]||"å¹³é™"},getRecordEmotions(t){return t?Array.isArray(t.emotions)?t.emotions:"string"===typeof t.emotions?t.emotions.split(",").map((t=>t.trim())).filter((t=>t)):t.emotion?.name?[t.emotion.name]:[]:[]},async triggerAnalysis(){if(!this.isAnalyzing&&(!this.hasAnalysis||confirm("å·²ç»æœ‰åˆ†æžç»“æžœäº†ï¼Œç¡®å®šè¦é‡æ–°åˆ†æžå—ï¼Ÿ"))){this.isAnalyzing=!0,this.analysisStage=0;try{for(let e=0;e<this.analysisStages.length-1;e++)await this.sleep(1e3),this.analysisStage=e+1;await this.startAnalysis();const t=this.selectedRecord.analysis;this.analysisResult=this.parseAnalysisResult(t),this.deepChatMessages=[{type:"companion",content:"æˆ‘å·²ç»åˆ†æžäº†ä½ çš„æƒ³æ³•ï¼Œæœ‰ä»€ä¹ˆæƒ³æ·±å…¥æŽ¢è®¨çš„å—ï¼Ÿ"}],this.currentChatTopic={id:Date.now(),title:this.selectedRecord.topicTitle||this.generateTopicTitle(this.selectedRecord),messages:this.deepChatMessages,created:Date.now(),lastUpdated:Date.now(),context:{emotions:this.getRecordEmotions(this.selectedRecord),situation:this.selectedRecord.situation,thought:this.selectedRecord.automaticThought,analysis:this.analysisResult}},this.saveChatTopic(),this.selectedRecord.completed=!0,this.selectedRecord.analysisCompleteTime=Date.now(),this.selectedRecord.analysisData=this.analysisResult,this.$store.saveState(),console.log("[CognitiveAnalysis] åˆ†æžç»“æžœå·²ä¿å­˜",{recordId:this.selectedRecord.id,hasAnalysis:!!this.selectedRecord.analysis,hasParsedData:!!this.selectedRecord.analysisData}),this.$nextTick((()=>{this.enterDetailView()}))}catch(t){console.error("åˆ†æžå‡ºé”™:",t),this.showError(t.message||"åˆ†æžæ—¶é‡åˆ°äº†å°é—®é¢˜ï¼Œè¯·ç¨åŽå†è¯•")}finally{this.isAnalyzing=!1,this.analysisStage=0}}},parseAnalysisResult(t){try{const e=t.replace(/\*\*/g,"").replace(/\n{3,}/g,"\n\n").trim();if(console.log("[Parse] å¼€å§‹è§£æžåˆ†æžç»“æžœ:",{originalLength:t.length,cleanLength:e.length}),e.length<50)throw new Error("åˆ†æžç»“æžœå†…å®¹è¿‡çŸ­æˆ–ä¸ºç©º");const s=[/å…±æƒ…ç†è§£[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*è®¤çŸ¥åå·®|$)/i,/å…±æƒ…[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*è®¤çŸ¥|$)/i,/ç†è§£[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*è®¤çŸ¥|$)/i];let o=null;for(const t of s){const s=e.match(t);if(s&&s[1].trim()){o=this.cleanTextContent(s[1]);break}}const i=[/è®¤çŸ¥åå·®[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*å¼•å¯¼é—®é¢˜|$)/i,/è®¤çŸ¥[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*å¼•å¯¼|é—®é¢˜|$)/i,/åå·®[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*å¼•å¯¼|é—®é¢˜|$)/i];let n=[];for(const t of i){const s=e.match(t);if(s&&s[1].trim()&&(n=this.parseBiasContent(s[1]),n.length>0))break}const a=[/å¼•å¯¼é—®é¢˜[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*é¼“åŠ±|$)/i,/å¼•å¯¼[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*é¼“åŠ±|$)/i,/é—®é¢˜[ï¼š:]\s*\n([\s\S]*?)(?=\n\s*é¼“åŠ±|$)/i];let l=[];for(const t of a){const s=e.match(t);if(s&&s[1].trim()&&(l=this.parseQuestionContent(s[1]),l.length>0))break}const c=[/é¼“åŠ±[ï¼š:]\s*\n([\s\S]*?)$/i,/æ€»ç»“[ï¼š:]\s*\n([\s\S]*?)$/i,/å»ºè®®[ï¼š:]\s*\n([\s\S]*?)$/i];let r=null;for(const t of c){const s=e.match(t);if(s&&s[1].trim()){r=this.cleanTextContent(s[1]);break}}if(!o&&0===n.length&&0===l.length&&!r)throw new Error("æ— æ³•è§£æžåˆ†æžç»“æžœçš„å…³é”®å†…å®¹");const d={empathy:o||"åˆ†æžç»“æžœè§£æžå‡ºçŽ°é—®é¢˜ï¼Œæ— æ³•æå–å…±æƒ…å†…å®¹",cognitiveBiases:n.length>0?n:[],guidingQuestions:l.length>0?l:[],encouragement:r||"åˆ†æžç»“æžœè§£æžå‡ºçŽ°é—®é¢˜ï¼Œæ— æ³•æå–é¼“åŠ±å†…å®¹"};return console.log("[Parse] è§£æžå®Œæˆ:",{empathyLength:d.empathy.length,biasCount:d.cognitiveBiases.length,questionCount:d.guidingQuestions.length,encouragementLength:d.encouragement.length}),d}catch(e){throw console.error("è§£æžåˆ†æžç»“æžœå‡ºé”™:",e),e}},cleanTextContent(t){return t.trim().replace(/^\s*[-â€¢]\s*/gm,"").replace(/\s+/g," ").replace(/[""]/g,'"').replace(/['']/g,"'")},parseBiasContent(t){const e=[];let s=t.split(/\d+[\.\)]\s*/);s.length<=2&&(s=t.split(/\n+/).filter((t=>t.trim())));for(const o of s){if(!o.trim())continue;let t="",s="";if(o.includes(":")||o.includes("ï¼š")){const[e,...i]=o.split(/[ï¼š:]/);t=this.cleanTextContent(e),s=this.cleanTextContent(i.join(":"))}else{const e=o.split(/[ã€‚\.]/);e.length>=2?(t=this.cleanTextContent(e[0]),s=this.cleanTextContent(e.slice(1).join("ã€‚"))):(t=this.cleanTextContent(o),s="éœ€è¦è¿›ä¸€æ­¥æŽ¢ç´¢")}t&&t.length>0&&e.push({icon:this.getBiasIcon(t),label:t,description:s||"è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥äº†è§£è¿™ç§æ€ç»´æ¨¡å¼"})}return e.length>0?e:[{icon:"ðŸ¤”",label:this.cleanTextContent(t.substring(0,20))+"...",description:this.cleanTextContent(t)}]},parseQuestionContent(t){const e=[];let s=t.split(/\d+[\.\)]\s*/);s.length<=2&&(s=t.split(/[ï¼Ÿ?]/)),s.length<=2&&(s=t.split(/\n+/).filter((t=>t.trim())));for(let o=0;o<s.length;o++){const t=s[o];if(!t.trim())continue;let i=this.cleanTextContent(t);i.endsWith("?")||i.endsWith("ï¼Ÿ")||(i+="ï¼Ÿ"),i.length>5&&e.push({icon:this.getQuestionIcon(o),text:i})}return e.length>0?e:[{icon:"ðŸŒ±",text:this.cleanTextContent(t)+(t.endsWith("?")||t.endsWith("ï¼Ÿ")?"":"ï¼Ÿ")}]},getBiasIcon(t){const e={å…¨æˆ–æ— æ€ç»´:"âš«ï¸",è¿‡åº¦æ¦‚æ‹¬:"ðŸ”„",å¿ƒç†è¿‡æ»¤:"ðŸ”",å¦å®šæ­£é¢:"âŒ",è·³è·ƒç»“è®º:"ðŸ¦˜",è¯»å¿ƒæœ¯:"ðŸ”®",ç¾éš¾åŒ–:"ðŸŒ‹",æƒ…ç»ªåŒ–æŽ¨ç†:"ðŸ’­",åº”è¯¥é™ˆè¿°:"ðŸ“œ",æ ‡ç­¾åŒ–:"ðŸ·ï¸",ä¸ªäººåŒ–:"ðŸ‘¤",å®Œç¾Žä¸»ä¹‰:"âœ¨",æ¯”è¾ƒæ€ç»´:"âš–ï¸"},s=Object.keys(e).find((e=>t.includes(e)));return s?e[s]:"ðŸ’¡"},getQuestionIcon(t){const e=["ðŸ¤”","ðŸ’­","ðŸŽ¯","ðŸŒ±","ðŸ’«"];return e[t%e.length]},openChatDialog(){if(this.isWisdomCompanionEnabled&&(this.showChatDialog=!0,0===this.deepChatMessages.length)){this.currentChatTopic={id:Date.now(),title:"æ–°çš„å¯¹è¯",messages:[],created:Date.now(),lastUpdated:Date.now(),context:{emotions:this.getRecordEmotions(this.selectedRecord),situation:this.selectedRecord.situation,thought:this.selectedRecord.automaticThought,analysis:this.analysisResult}};const t=this.getRecordEmotions(this.selectedRecord),e=this.buildContextMessage(t);this.deepChatMessages=[{type:"companion",content:e}]}},closeChatDialog(){this.showChatDialog=!1},async sendMessage(){if(!this.deepChatInput.trim())return;const t=this.deepChatInput.trim();this.deepChatMessages.push({type:"user",content:t}),this.deepChatInput="",this.isTyping=!0;try{po.setVueInstance(this);const e={emotions:this.getRecordEmotions(this.selectedRecord),situation:this.selectedRecord.situation,thought:this.selectedRecord.automaticThought,timestamp:this.selectedRecord.timestamp,analysis:this.analysisResult,recordDetails:{id:this.selectedRecord.id,intensity:this.selectedRecord.intensity,bodyLocation:this.selectedRecord.bodyLocation,physicalSensations:this.selectedRecord.physicalSensations,completed:this.selectedRecord.completed}},s=await po.continueChat(this.deepChatMessages.map((t=>({role:"user"===t.type?"user":"assistant",content:t.content}))),t,e);this.deepChatMessages.push({type:"companion",content:s}),this.currentChatTopic&&(this.currentChatTopic.messages=this.deepChatMessages,this.currentChatTopic.lastUpdated=Date.now(),this.saveChatTopic()),this.$store.saveState()}catch(e){console.error("å¯¹è¯å‡ºé”™:",e),this.deepChatMessages.push({type:"companion",content:e.message}),this.$emit("chat-error",{message:e.message,code:e.code,details:e.details}),"INVALID_API_KEY"===e.code&&this.$emit("show-config-dialog")}finally{this.isTyping=!1}},saveChatTopic(){if(!this.currentChatTopic)return;const t=this.chatTopics.findIndex((t=>t.id===this.currentChatTopic.id));t>=0?this.chatTopics[t]=this.currentChatTopic:this.chatTopics.push(this.currentChatTopic),this.selectedRecord.chatTopics||(this.selectedRecord.chatTopics=[]);const e=this.selectedRecord.chatTopics.findIndex((t=>t.id===this.currentChatTopic.id));e>=0?this.selectedRecord.chatTopics[e]=this.currentChatTopic:this.selectedRecord.chatTopics.push(this.currentChatTopic),this.$store.saveState()},loadChatTopic(t){const e=this.chatTopics.find((e=>e.id===t));e&&(this.currentChatTopic=e,this.deepChatMessages=e.messages)},getDisabledMessage(){const t=this.$store.state.appConfig?.messages?.companionDisabled||["æ™ºæ…§ä¼™ä¼´æš‚æ—¶åœ¨èŠ±å›­é‡Œä¼‘æ¯ï¼Œè¯·ç¨åŽå†æ¥ ðŸŒ™"];return t[Math.floor(Math.random()*t.length)]},generateRandomFlowerColor(){const t=["#FF9B85","#FFC857","#84A98C","#7B9BB3","#9384A8","#FF6B6B"];return t[Math.floor(Math.random()*t.length)]},getFlowerStageClass(){return this.isAnalyzing?"stage-analyzing":this.hasAnalysis?"stage-bloomed":"stage-bud"},getFlowerImage(){const t=this.selectedRecord?.initialEmotion?.name||this.getFirstEmotion(this.selectedRecord),e=this.hasAnalysis?"bloom":"bud";let s="blue";return s=["æ„‰æ‚¦é˜³å…‰","å……æ»¡å¸Œæœ›","å¼€å¿ƒ","å…´å¥‹"].includes(t)?"yellow":["ç„¦è™‘ä¸å®‰","æ„¤æ€’","æœ‰äº›ä½Žè½","ç´§å¼ ","å¤±æœ›"].includes(t)?"red":"blue",`/assets/images/${s}-flower-${e}.png`},getFlowerAlt(){return this.hasAnalysis?"ç»½æ”¾çš„èŠ±æœµ":"å«è‹žå¾…æ”¾"},handleImageError(t){if(console.warn("èŠ±æœµå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å›¾ç‰‡:",t.target.src),t.target.src.includes("blue-flower")){t.target.style.display="none";const e=t.target.parentElement;if(e&&!e.querySelector(".flower-emoji-fallback")){const t=document.createElement("div");t.className="flower-emoji-fallback",t.textContent=this.hasAnalysis?"ðŸŒ¸":"ðŸŒ±",t.style.cssText="\n            font-size: 4rem;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          ",e.appendChild(t)}}else{const e=this.hasAnalysis?"bloom":"bud";t.target.src=`/assets/images/blue-flower-${e}.png`}},async generateEmotionBubbles(){if(!this.selectedRecord)return void(this.emotionBubbles=[]);const t=this.getRecordEmotions(this.selectedRecord);if(0===t.length)return void(this.emotionBubbles=[]);await this.$nextTick();const e=document.querySelector(".flower-container");if(!e)return console.warn("[æ°”æ³¡ç”Ÿæˆ] æ— æ³•æ‰¾åˆ°èŠ±æœµå®¹å™¨"),void setTimeout((()=>{this.generateEmotionBubbles()}),100);const s=e.getBoundingClientRect(),o=s.width/2,i=s.height/2,n=window.innerWidth<=768,a=window.innerWidth<=480,l=n?a?35:45:60,c=l+15,r=Math.min(o,i)-10,d=[-90,90],u=40,h=Math.min(t.length,n?4:6);console.log(`[æ°”æ³¡ç”Ÿæˆ] å¼€å§‹ç”Ÿæˆ ${h} ä¸ªæ°”æ³¡ï¼Œå®¹å™¨å°ºå¯¸: ${s.width}x${s.height}`);const g=[],m=[];this.emotionBubbles=[],await this.$nextTick();for(let p=0;p<h;p++){const e=t[p];let n=!1,a=null;for(let t=0;t<u;t++){const t=d[0]+Math.random()*(d[1]-d[0]),l=c+Math.random()*(r-c),u=(t-90)*(Math.PI/180),h=o+l*Math.cos(u),v=i+l*Math.sin(u),k={emotion:e,x:h,y:v,style:{left:"50%",top:"50%",transform:`translate(calc(-50% + ${h-o}px), calc(-50% + ${v-i}px))`,"--hue":(60*p+30)%360+"deg",animationDelay:.2*p+"s",position:"absolute",zIndex:10+p,visibility:"hidden"},class:"detail-bubble-"+p%4,index:p};this.emotionBubbles=[...g,k],await this.$nextTick();const y=document.querySelectorAll(".emotion-bubble");if(y.length>p){const t=y[p],e=t.getBoundingClientRect();let o=!1;for(const s of m){const t=5;if(e.left-t<s.right&&e.right+t>s.left&&e.top-t<s.bottom&&e.bottom+t>s.top){o=!0;break}}const i=5,l=e.left>=-i&&e.right<=s.width+i&&e.top>=-i&&e.bottom<=s.height+i;if(!o&&l){m.push(e),a=k,a.style.visibility="visible",n=!0;break}}}if(n&&a)g.push(a),console.log(`[æ°”æ³¡ç”Ÿæˆ] æ°”æ³¡ "${e}" æ”¾ç½®æˆåŠŸï¼Œä½ç½®: (${Math.round(a.x-o)}, ${Math.round(a.y-i)})`);else{console.warn(`[æ°”æ³¡ç”Ÿæˆ] æ— æ³•ä¸ºæƒ…ç»ª "${e}" æ‰¾åˆ°åˆé€‚ä½ç½®ï¼Œå·²å°è¯• ${u} æ¬¡`);const t=(120*p+30)%360,n=c+10,a=(t-90)*(Math.PI/180),l=o+n*Math.cos(a),r=i+n*Math.sin(a),d=Math.max(20,Math.min(s.width-20,l)),h=Math.max(20,Math.min(s.height-20,r)),m={emotion:e,x:d,y:h,style:{left:"50%",top:"50%",transform:`translate(calc(-50% + ${d-o}px), calc(-50% + ${h-i}px))`,"--hue":(60*p+30)%360+"deg",animationDelay:.2*p+"s",position:"absolute",zIndex:10+p,visibility:"visible"},class:"detail-bubble-"+p%4,index:p};g.push(m),console.log(`[æ°”æ³¡ç”Ÿæˆ] ä½¿ç”¨å¤‡ç”¨ç­–ç•¥æ”¾ç½®æ°”æ³¡ "${e}"ï¼Œä½ç½®: (${Math.round(d-o)}, ${Math.round(h-i)})`)}}this.emotionBubbles=g,console.log(`[æ°”æ³¡ç”Ÿæˆ] å®Œæˆï¼æˆåŠŸç”Ÿæˆ ${g.length} ä¸ªæ°”æ³¡`)},getPollenStyle(t){const e=45*t,s=100+300*Math.random(),o=Math.cos(e*Math.PI/180)*s,i=Math.sin(e*Math.PI/180)*s;return{left:`calc(50% + ${o}px)`,top:`calc(50% + ${i}px)`,animationDelay:4*Math.random()+"s",animationDuration:6+4*Math.random()+"s"}},formatTime(t){return new Date(t).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatDetailedTime(t){return t?new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"æœªçŸ¥æ—¶é—´"},truncateText(t,e){return t.length>e?t.substring(0,e)+"...":t},sleep(t){return new Promise((e=>setTimeout(e,t)))},showError(t){this.analysisError=t,setTimeout((()=>{this.analysisError=null}),5e3)},generateResponse(t){const e=["è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æƒ³æ³•ï¼Œè®©æˆ‘ä»¬ç»§ç»­æŽ¢ç´¢...","ä½ è¯´å¾—å¯¹ï¼Œè¿™ç¡®å®žå€¼å¾—æ·±å…¥æ€è€ƒã€‚","ä»Žå¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥...","è¿™è®©æˆ‘æƒ³èµ·äº†ä¸€ä¸ªé‡è¦çš„è§‚ç‚¹...","è®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ†æžè¿™ä¸ªæƒ³æ³•..."];return e[Math.floor(Math.random()*e.length)]},async startAnalysis(){if(!this.selectedRecord)return;this.isAnalyzing=!0,this.analysisError=null,this.analysisStage=0,po.setVueInstance(this);let t=0;const e=setInterval((()=>{t<this.analysisStages.length-2&&(t++,this.analysisStage=t)}),400*Math.random()+600);try{const t=await po.analyzeThought(this.selectedRecord);clearInterval(e),this.analysisStage=this.analysisStages.length-2,await this.sleep(800),this.selectedRecord.analysis=t,this.analysisStage=this.analysisStages.length-1,await this.sleep(600),this.selectedRecord.completed=!0,this.$store.saveState(),this.analysisStage=this.analysisStages.length,await this.sleep(300)}catch(s){console.error("åˆ†æžè¿‡ç¨‹å‡ºé”™:",s),clearInterval(e),this.analysisError=s.message,this.$emit("analysis-error",{message:s.message,code:s.code,details:s.details}),"INVALID_API_KEY"===s.code&&this.$emit("show-config-dialog")}finally{clearInterval(e),this.isAnalyzing=!1,this.analysisStage=0}},handleResize(){this.selectedRecord&&this.getRecordEmotions(this.selectedRecord).length>0&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((()=>{this.generateEmotionBubbles()}),200))},buildContextMessage(t){const e=this.selectedRecord,s=new Date(e.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});let o=["ðŸŒŸ è®©æˆ‘ä»¬å¼€å§‹æ·±å…¥æŽ¢è®¨å§ï¼æˆ‘å·²ç»äº†è§£äº†ä½ çš„æƒ…å†µï¼š","",`â° **è®°å½•æ—¶é—´**: ${s}`,"",`ðŸ’­ **ä½ çš„å¿ƒæƒ…**: ${t.length>0?t.join("ã€"):"æœªæè¿°å…·ä½“å¿ƒæƒ…"}`,""];if(e.situation&&e.situation.trim()&&(o.push(`ðŸŽ¬ **é‡åˆ°çš„æƒ…å†µ**: ${e.situation}`),o.push("")),e.automaticThought&&e.automaticThought.trim()&&(o.push(`ðŸ§  **å†…å¿ƒæƒ³æ³•**: "${e.automaticThought}"`),o.push("")),this.analysisResult&&this.analysisResult.cognitiveBiases&&this.analysisResult.cognitiveBiases.length>0){const t=this.analysisResult.cognitiveBiases.map((t=>t.label)).slice(0,2);o.push(`ðŸ” **å‘çŽ°çš„æ€ç»´æ¨¡å¼**: ${t.join("ã€")}${this.analysisResult.cognitiveBiases.length>2?"ç­‰":""}`),o.push("")}return o.push("ðŸ’¬ çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥èŠèŠã€‚ä½ æƒ³ä»Žå“ªé‡Œå¼€å§‹ï¼Œæˆ–è€…æœ‰ä»€ä¹ˆç‰¹åˆ«æƒ³æŽ¢è®¨çš„å—ï¼Ÿ"),o.join("\n")},generateTopicTitle(t){const e=this.getFirstEmotion(t),s=t.automaticThought||"";return s.includes("å·¥ä½œ")||s.includes("ä¸Šç­")?`ðŸ’¼ å…³äºŽå·¥ä½œçš„${e}`:s.includes("å­¦ä¹ ")||s.includes("è€ƒè¯•")?`ðŸ“š å­¦ä¹ ä¸­çš„${e}`:s.includes("å…³ç³»")||s.includes("æœ‹å‹")||s.includes("å®¶äºº")?"ðŸ‘¥ äººé™…å…³ç³»çš„æ€è€ƒ":s.includes("æœªæ¥")||s.includes("å°†æ¥")?"ðŸ”® å¯¹æœªæ¥çš„æ‹…å¿§":`ðŸ’­ ${e}çš„å†…å¿ƒç‹¬ç™½`},getPlantIcon(t){return t.completed?"ðŸŒ¸":t.analysis?"ðŸŒ¿":"ðŸŒ±"},getPlantStageClass(t){return t.completed?"stage-bloomed":t.analysis?"stage-growing":"stage-seed"},getEmotionColor(t){const e=this.getFirstEmotion(t),s={æ„‰æ‚¦é˜³å…‰:"background: linear-gradient(45deg, #FFD700, #FFA500)",å¹³é™å¦‚æ°´:"background: linear-gradient(45deg, #87CEEB, #4682B4)",æœ‰äº›ä½Žè½:"background: linear-gradient(45deg, #A0A0A0, #696969)",ç„¦è™‘ä¸å®‰:"background: linear-gradient(45deg, #FF6B6B, #FF4757)",å……æ»¡å¸Œæœ›:"background: linear-gradient(45deg, #98FB98, #32CD32)",ç–²æƒ«å€¦æ€ :"background: linear-gradient(45deg, #DEB887, #D2B48C)",æ„¤æ€’:"background: linear-gradient(45deg, #DC143C, #B22222)",å›°æƒ‘:"background: linear-gradient(45deg, #DDA0DD, #9370DB)"};return s[e]||"background: linear-gradient(45deg, #84A98C, #52796F)"},getEmotionTagStyle(t){const e={æ„‰æ‚¦é˜³å…‰:{background:"#FFF3CD",color:"#856404",border:"#FFD700"},å¹³é™å¦‚æ°´:{background:"#E7F3FF",color:"#1C4E80",border:"#87CEEB"},æœ‰äº›ä½Žè½:{background:"#F8F9FA",color:"#495057",border:"#A0A0A0"},ç„¦è™‘ä¸å®‰:{background:"#FFEBEE",color:"#C62828",border:"#FF6B6B"},å……æ»¡å¸Œæœ›:{background:"#E8F5E8",color:"#2E7D32",border:"#98FB98"},ç–²æƒ«å€¦æ€ :{background:"#FFF8E1",color:"#8D6E63",border:"#DEB887"},æ„¤æ€’:{background:"#FFEBEE",color:"#B71C1C",border:"#DC143C"},å›°æƒ‘:{background:"#F3E5F5",color:"#6A1B9A",border:"#DDA0DD"},å¼€å¿ƒ:{background:"#FFF3CD",color:"#856404",border:"#FFD700"},éš¾è¿‡:{background:"#F8F9FA",color:"#495057",border:"#A0A0A0"},ç´§å¼ :{background:"#FFEBEE",color:"#C62828",border:"#FF6B6B"},å…´å¥‹:{background:"#FFF3CD",color:"#856404",border:"#FFD700"},æ‹…å¿ƒ:{background:"#FFEBEE",color:"#C62828",border:"#FF6B6B"},å¤±æœ›:{background:"#F8F9FA",color:"#495057",border:"#A0A0A0"}},s=e[t]||{background:"#E8F4F8",color:"#2D3E40",border:"#84A98C"};return{backgroundColor:s.background,color:s.color,borderColor:s.border}},getGrowthStageText(t){return t.completed?"å·²ç»½æ”¾":t.analysis?"æˆé•¿ä¸­":"å¾…åŸ¹è‚²"},getChatCount(t){return t.chatTopics?t.chatTopics.reduce(((t,e)=>{if(!e.messages)return t;const s=e.messages.filter((t=>"user"===t.type));return t+s.length}),0):0},initializeScrollDetection(){document.addEventListener("scroll",this.onScroll,{passive:!0}),document.addEventListener("wheel",this.onWheel,{passive:!0}),document.addEventListener("touchstart",this.onTouchStart,{passive:!0}),document.addEventListener("touchmove",this.onTouchMove,{passive:!0}),document.addEventListener("touchend",this.onTouchEnd,{passive:!0}),document.addEventListener("keydown",this.onKeyDown),this.controlsVisible=!1},onScroll(t){this.handleUserInteraction()},onWheel(t){this.handleUserInteraction()},onTouchStart(t){this.touchStartY=t.touches[0].clientY},onTouchMove(t){if(null!==this.touchStartY){const e=t.touches[0].clientY,s=Math.abs(e-this.touchStartY);s>5&&this.handleUserInteraction()}},onTouchEnd(t){this.touchStartY=null},onKeyDown(t){const e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];e.includes(t.key)&&this.handleUserInteraction()},handleUserInteraction(){this.controlsVisible=!0,this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),this.hideTimeout=setTimeout((()=>{this.controlsVisible=!1}),1e3)},clearTimeouts(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},resetUIHideState(){this.controlsVisible=!1,this.clearTimeouts()},cleanupScrollDetection(){document.removeEventListener("scroll",this.onScroll),document.removeEventListener("wheel",this.onWheel),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("keydown",this.onKeyDown),this.clearTimeouts()}},watch:{selectedRecord:{handler(){this.$nextTick((()=>{this.generateEmotionBubbles()}))},immediate:!0}},mounted(){this.$nextTick((()=>{setTimeout((()=>{if("overview"===this.$route.query.view)return this.selectedRecord=null,void(this.isDataLoaded=!0);if(void 0!==this.$store.state.selectedRecordIndex){const t=this.$store.state.selectedRecordIndex;this.$store.state.thoughtRecords&&this.$store.state.thoughtRecords[t]&&this.selectSeed(t)}this.isDataLoaded=!0}),50)})),window.addEventListener("resize",this.handleResize),this.initializeScrollDetection()},beforeUnmount(){window.removeEventListener("resize",this.handleResize),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.cleanupScrollDetection()}},ko=(0,D.A)(vo,[["render",ho],["__scopeId","data-v-395750a5"]]),yo=ko,bo={class:"growth-garden"},Lo={key:0,class:"loading-overlay"},Co={class:"garden-background"},fo={class:"blooming-particles"},Eo={class:"garden-content"},wo={class:"welcome-section"},_o={class:"page-title"},Ao={key:0,class:"page-subtitle"},So={key:1,class:"page-subtitle"},To={class:"stats-garden"},Mo={class:"section-title"},Ro={class:"stats-grid"},Io={class:"stat-bloom total-seeds"},$o={class:"bloom-content"},Do={class:"bloom-number"},xo={class:"bloom-label"},Bo={class:"stat-bloom bloomed-flowers"},Fo={class:"bloom-content"},Po={class:"bloom-number"},Oo={class:"bloom-label"},No={class:"stat-bloom garden-health"},Xo={class:"bloom-icon health"},Uo={class:"bloom-content"},jo={class:"bloom-label"},Go={class:"action-garden"},Vo={class:"action-grid"},Wo={class:"action-content"},Ko={key:0},Qo={key:1},zo={key:0,class:"records-garden"},qo={class:"section-title"},Ho={class:"records-grid"},Jo=["onClick"],Yo={class:"record-header"},Zo={class:"record-time"},ti={key:0,class:"record-emotion-garden"},ei={class:"emotion-label"},si={class:"record-thought-snippet"},oi={class:"record-growth-indicator"},ii={class:"progress-icon"},ni={class:"progress-text"},ai={class:"insights-garden"},li={class:"insights-grid"},ci={class:"insight-bloom emotion-distribution"},ri={class:"insight-header"},di={key:0,class:"insight-badge"},ui={key:0,class:"insight-content"},hi={class:"emotion-flowers"},gi={class:"flower-icon"},mi={class:"flower-info"},pi={class:"flower-name"},vi={class:"flower-count"},ki={class:"flower-bloom-bar"},yi={key:1,class:"insight-empty"},bi={class:"insight-bloom growth-wisdom"},Li={class:"insight-header"},Ci={key:0,class:"insight-badge"},fi={key:0,class:"insight-content"},Ei={class:"wisdom-summary"},wi={class:"wisdom-stat"},_i={class:"stat-text"},Ai={class:"stat-number"},Si={class:"wisdom-stat"},Ti={class:"stat-text"},Mi={class:"stat-number"},Ri={class:"wisdom-encouragement"},Ii={key:1,class:"insight-empty"},$i={key:1,class:"daily-encouragement"},Di={class:"encouragement-card"},xi={class:"encouragement-content"};function Bi(t,e,s,o,i,n){const a=(0,L.g2)("router-link");return(0,L.uX)(),(0,L.CE)("div",bo,[i.isLoading?((0,L.uX)(),(0,L.CE)("div",Lo,e[1]||(e[1]=[(0,L.Lk)("div",{class:"loading-content"},[(0,L.Lk)("div",{class:"loading-icon"},"ðŸŒ±"),(0,L.Lk)("div",{class:"loading-text"},"èŠ±å›­æ­£åœ¨ç»½æ”¾...")],-1)]))):(0,L.Q3)("",!0),(0,L.Lk)("div",Co,[(0,L.Lk)("div",fo,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(15,(t=>(0,L.Lk)("div",{key:t,class:"bloom-particle",style:(0,C.Tr)(n.getBloomParticleStyle(t))},null,4))),64))])]),(0,L.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>n.goBack&&n.goBack(...t)),class:"floating-back-btn","aria-label":"è¿”å›žä¸»é¡µ"},e[2]||(e[2]=[(0,L.Lk)("span",null,"ðŸ¡",-1)])),(0,L.Lk)("div",Eo,[(0,L.Lk)("div",wo,[(0,L.Lk)("h1",_o,[e[3]||(e[3]=(0,L.Lk)("span",{class:"title-icon"},"ðŸŒ¸",-1)),(0,L.eW)(" "+(0,C.v_)(t.$t("dashboard.title")),1)]),n.latestRecord?((0,L.uX)(),(0,L.CE)("p",Ao,(0,C.v_)(t.$t("dashboard.recentRecord",{time:n.formatRelativeTime(n.latestRecord.timestamp)})),1)):((0,L.uX)(),(0,L.CE)("p",So,(0,C.v_)(t.$t("dashboard.welcomeMessage")),1))]),(0,L.Lk)("div",To,[(0,L.Lk)("h3",Mo,"ðŸŒ¿ "+(0,C.v_)(t.$t("dashboard.stats.title")),1),(0,L.Lk)("div",Ro,[(0,L.Lk)("div",Io,[e[4]||(e[4]=(0,L.Lk)("div",{class:"bloom-icon seeds"},"ðŸŒ±",-1)),(0,L.Lk)("div",$o,[(0,L.Lk)("div",Do,(0,C.v_)(t.$store.state.thoughtRecords.length),1),(0,L.Lk)("div",xo,(0,C.v_)(t.$t("dashboard.stats.seeds")),1)])]),(0,L.Lk)("div",Bo,[e[5]||(e[5]=(0,L.Lk)("div",{class:"bloom-icon flowers"},"ðŸŒ¸",-1)),(0,L.Lk)("div",Fo,[(0,L.Lk)("div",Po,(0,C.v_)(n.analyzedRecordsCount),1),(0,L.Lk)("div",Oo,(0,C.v_)(t.$t("dashboard.stats.flowers")),1)])]),(0,L.Lk)("div",No,[(0,L.Lk)("div",Xo,(0,C.v_)(n.moodTrend.emoji),1),(0,L.Lk)("div",Uo,[(0,L.Lk)("div",{class:(0,C.C4)(["bloom-status",n.moodTrend.class])},(0,C.v_)(n.moodTrend.label),3),(0,L.Lk)("div",jo,(0,C.v_)(t.$t("dashboard.stats.gardenHealth")),1)])])])]),(0,L.Lk)("div",Go,[e[9]||(e[9]=(0,L.Lk)("h3",{class:"section-title"},"ðŸŒ¿ ç»§ç»­åŸ¹è‚²å¿ƒçµ",-1)),(0,L.Lk)("div",Vo,[(0,L.bF)(a,{to:"/record",class:"action-bloom plant-seed"},{default:(0,L.k6)((()=>e[6]||(e[6]=[(0,L.Lk)("div",{class:"action-icon"},"ðŸŒ±",-1),(0,L.Lk)("div",{class:"action-content"},[(0,L.Lk)("h4",null,"æ’­ç§æ–°çš„æƒ³æ³•"),(0,L.Lk)("p",null,"è®°å½•ä»Šå¤©å¿ƒä¸­èŒèŠ½çš„æ€ç»ª")],-1)]))),_:1}),(0,L.bF)(a,{to:"/analysis",class:(0,C.C4)(["action-bloom wise-companion",{"action-disabled":!n.hasRecords}])},{default:(0,L.k6)((()=>[e[8]||(e[8]=(0,L.Lk)("div",{class:"action-icon"},"ðŸ¤–",-1)),(0,L.Lk)("div",Wo,[e[7]||(e[7]=(0,L.Lk)("h4",null,"ä¸Žæ™ºæ…§ä¼™ä¼´å¯¹è¯",-1)),n.hasRecords?((0,L.uX)(),(0,L.CE)("p",Ko,"æŽ¢ç´¢"+(0,C.v_)(n.pendingAnalysisCount)+"ä¸ªå¾…åˆ†æžçš„æƒ³æ³•",1)):((0,L.uX)(),(0,L.CE)("p",Qo,"å…ˆæ’­ä¸‹ä¸€äº›æƒ³æ³•çš„ç§å­å§"))])])),_:1},8,["class"])])]),n.hasRecords?((0,L.uX)(),(0,L.CE)("div",zo,[(0,L.Lk)("h3",qo,"ðŸŒ¸ "+(0,C.v_)(t.$t("dashboard.records.title")),1),(0,L.Lk)("div",Ho,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.recentRecords,((t,e)=>((0,L.uX)(),(0,L.CE)("div",{key:e,class:"record-bloom",onClick:t=>n.goToAnalysis(e)},[(0,L.Lk)("div",Yo,[(0,L.Lk)("div",Zo,(0,C.v_)(n.formatRelativeTime(t.timestamp)),1),(0,L.Lk)("div",{class:(0,C.C4)(["record-growth-stage",n.getGrowthStageClass(t)])},(0,C.v_)(n.getGrowthStage(t)),3)]),t.initialEmotion?((0,L.uX)(),(0,L.CE)("div",ti,[(0,L.Lk)("div",{class:"initial-emotion",style:(0,C.Tr)({background:t.initialEmotion.gradient})},(0,C.v_)(t.initialEmotion.emoji||"ðŸ’­"),5),(0,L.Lk)("div",ei,(0,C.v_)(t.initialEmotion.name),1)])):(0,L.Q3)("",!0),(0,L.Lk)("div",si,' "'+(0,C.v_)(n.truncateText(t.automaticThought,60))+'" ',1),(0,L.Lk)("div",oi,[(0,L.Lk)("div",{class:(0,C.C4)(["growth-progress",n.getGrowthProgressClass(t)])},[(0,L.Lk)("span",ii,(0,C.v_)(n.getGrowthIcon(t)),1),(0,L.Lk)("span",ni,(0,C.v_)(n.getGrowthProgressText(t)),1)],2)])],8,Jo)))),128))])])):(0,L.Q3)("",!0),(0,L.Lk)("div",ai,[e[18]||(e[18]=(0,L.Lk)("h3",{class:"section-title"},"ðŸŒ» èŠ±å›­çš„æ™ºæ…§æ´žå¯Ÿ",-1)),(0,L.Lk)("div",li,[(0,L.Lk)("div",ci,[(0,L.Lk)("div",ri,[e[10]||(e[10]=(0,L.Lk)("h4",null,"ðŸ’ æƒ…ç»ªèŠ±æœµçš„è‰²å½©",-1)),n.hasRecords?((0,L.uX)(),(0,L.CE)("div",di,(0,C.v_)(Object.keys(n.emotionDistribution).length)+"ç§è‰²å½© ",1)):(0,L.Q3)("",!0)]),Object.keys(n.emotionDistribution).length>0?((0,L.uX)(),(0,L.CE)("div",ui,[(0,L.Lk)("div",hi,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(Object.entries(n.sortedEmotions).slice(0,5),(([t,e],s)=>((0,L.uX)(),(0,L.CE)("div",{key:t,class:"emotion-flower"},[(0,L.Lk)("div",gi,(0,C.v_)(n.getEmotionEmoji(t)),1),(0,L.Lk)("div",mi,[(0,L.Lk)("div",pi,(0,C.v_)(t),1),(0,L.Lk)("div",vi,"ç»½æ”¾äº†"+(0,C.v_)(e)+"æ¬¡",1)]),(0,L.Lk)("div",ki,[(0,L.Lk)("div",{class:"bloom-progress",style:(0,C.Tr)({width:e/n.maxEmotionCount*100+"%"})},null,4)])])))),128))])])):((0,L.uX)(),(0,L.CE)("div",yi,e[11]||(e[11]=[(0,L.Lk)("div",{class:"empty-icon"},"ðŸŒ±",-1),(0,L.Lk)("p",null,"è¿˜æ²¡æœ‰æƒ…ç»ªè®°å½•ï¼Œå¼€å§‹æ’­ç§ä½ çš„æ„Ÿå—å§",-1)])))]),(0,L.Lk)("div",bi,[(0,L.Lk)("div",Li,[e[12]||(e[12]=(0,L.Lk)("h4",null,"âœ¨ æ™ºæ…§ä¼™ä¼´çš„å‘çŽ°",-1)),n.analyzedRecordsCount>0?((0,L.uX)(),(0,L.CE)("div",Ci,(0,C.v_)(n.analyzedRecordsCount)+"æ¬¡æ·±åº¦å¯¹è¯ ",1)):(0,L.Q3)("",!0)]),n.analyzedRecordsCount>0?((0,L.uX)(),(0,L.CE)("div",fi,[(0,L.Lk)("div",Ei,[(0,L.Lk)("div",wi,[e[14]||(e[14]=(0,L.Lk)("div",{class:"stat-icon"},"ðŸ”",-1)),(0,L.Lk)("div",_i,[(0,L.Lk)("span",Ai,(0,C.v_)(n.getCommonBiasesCount()),1),e[13]||(e[13]=(0,L.Lk)("span",{class:"stat-label"},"ä¸ªæ€ç»´æ¨¡å¼è¢«å‘çŽ°",-1))])]),(0,L.Lk)("div",Si,[e[16]||(e[16]=(0,L.Lk)("div",{class:"stat-icon"},"ðŸŒŸ",-1)),(0,L.Lk)("div",Ti,[(0,L.Lk)("span",Mi,(0,C.v_)(n.getAlternativeThoughtsCount()),1),e[15]||(e[15]=(0,L.Lk)("span",{class:"stat-label"},"ä¸ªæ–°è§†è§’è¢«é‡‡çº³",-1))])]),(0,L.Lk)("div",Ri,[(0,L.Lk)("p",null,(0,C.v_)(n.getEncouragementMessage()),1)])])])):((0,L.uX)(),(0,L.CE)("div",Ii,e[17]||(e[17]=[(0,L.Lk)("div",{class:"empty-icon"},"ðŸ¤–",-1),(0,L.Lk)("p",null,"å¼€å§‹ä¸Žæ™ºæ…§ä¼™ä¼´å¯¹è¯ï¼Œå‘çŽ°å†…å¿ƒçš„æ™ºæ…§",-1)])))])])]),i.dailyEncouragement?((0,L.uX)(),(0,L.CE)("div",$i,[(0,L.Lk)("div",Di,[e[20]||(e[20]=(0,L.Lk)("div",{class:"encouragement-icon"},"ðŸŒˆ",-1)),(0,L.Lk)("div",xi,[e[19]||(e[19]=(0,L.Lk)("h4",null,"ä»Šæ—¥çš„èŠ±å›­å¯„è¯­",-1)),(0,L.Lk)("p",null,(0,C.v_)(i.dailyEncouragement),1)])])])):(0,L.Q3)("",!0)])])}const Fi={name:"Dashboard",data(){return{dailyEncouragement:"",isLoading:!0}},computed:{latestRecord(){return this.$store.state.thoughtRecords[0]},hasRecords(){return this.$store.state.thoughtRecords&&this.$store.state.thoughtRecords.length>0},recentRecords(){return this.$store.state.thoughtRecords&&Array.isArray(this.$store.state.thoughtRecords)?this.$store.state.thoughtRecords.slice(0,6):[]},analyzedRecordsCount(){return this.$store.state.thoughtRecords?this.$store.state.thoughtRecords.filter((t=>t.completed||t.alternativeThought)).length:0},pendingAnalysisCount(){return this.$store.state.thoughtRecords?this.$store.state.thoughtRecords.filter((t=>!t.completed&&!t.alternativeThought)).length:0},emotionDistribution(){if(!this.$store.state.thoughtRecords||!Array.isArray(this.$store.state.thoughtRecords))return{};const t=this.$store.state.thoughtRecords.flatMap((t=>t.emotions||[]));return t.reduce(((t,e)=>(t[e]=(t[e]||0)+1,t)),{})},maxEmotionCount(){return Math.max(...Object.values(this.emotionDistribution||{}),1)},sortedEmotions(){return Object.entries(this.emotionDistribution).sort(((t,e)=>e[1]-t[1])).reduce(((t,[e,s])=>(t[e]=s,t)),{})},moodTrend(){if(!this.$store.state.thoughtRecords||!Array.isArray(this.$store.state.thoughtRecords))return{label:"åˆšåˆšèµ·æ­¥",class:"neutral",emoji:"ðŸŒ±"};const t=this.$store.state.thoughtRecords.slice(0,5);if(t.length<2)return{label:"åˆšåˆšèµ·æ­¥",class:"neutral",emoji:"ðŸŒ±"};const e=t.slice(0,Math.ceil(t.length/2)).reduce(((t,e)=>t+(e.intensity||50)),0)/Math.ceil(t.length/2),s=t.slice(Math.ceil(t.length/2)).reduce(((t,e)=>t+(e.intensity||50)),0)/Math.floor(t.length/2),o=e-s;return o<-10?{label:"è“¬å‹ƒå‘ä¸Š",class:"positive",emoji:"ðŸŒ¸"}:o<-5?{label:"æ¸©å’Œæˆé•¿",class:"positive",emoji:"ðŸŒ¿"}:o>10?{label:"éœ€è¦å…³æ³¨",class:"attention",emoji:"ðŸŒ§ï¸"}:o>5?{label:"ç•¥æœ‰æ³¢åŠ¨",class:"neutral",emoji:"ðŸŒ¤ï¸"}:{label:"å¹³é™å¦‚æ°´",class:"stable",emoji:"ðŸŒŠ"}}},methods:{goBack(){this.$router.push("/")},formatRelativeTime(t){if(!t)return"æœªçŸ¥æ—¶é—´";const e=new Date,s=new Date(t),o=e-s,i=Math.floor(o/36e5),n=Math.floor(i/24);return i<1?"åˆšåˆš":i<24?`${i}å°æ—¶å‰`:n<7?`${n}å¤©å‰`:s.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},truncateText(t,e){return t?t.length>e?t.slice(0,e)+"...":t:""},getGrowthStage(t){return t.completed?this.$t("dashboard.records.stageCompleted"):t.alternativeThought?this.$t("dashboard.records.stageBlooming"):this.$t("dashboard.records.stageGrowing")},getGrowthStageClass(t){return t.completed?"stage-completed":t.alternativeThought?"stage-blooming":"stage-growing"},getGrowthIcon(t){return t.completed?"ðŸŒ¸":t.alternativeThought?"ðŸŒ¿":"ðŸŒ±"},getGrowthProgressClass(t){return t.completed?"progress-completed":t.alternativeThought?"progress-blooming":"progress-growing"},getGrowthProgressText(t){return t.completed?this.$t("dashboard.records.progressCompleted"):t.alternativeThought?this.$t("dashboard.records.progressBlooming"):this.$t("dashboard.records.progressGrowing")},goToAnalysis(t){this.$store.state.selectedRecordIndex=t,this.$router.push("/analysis")},getEmotionEmoji(t){const e={æ„‰æ‚¦é˜³å…‰:"ðŸ˜Š",å¹³é™å¦‚æ°´:"ðŸ˜Œ",æœ‰äº›ä½Žè½:"ðŸ˜”",ç„¦è™‘ä¸å®‰:"ðŸ˜°",å……æ»¡å¸Œæœ›:"ðŸŒŸ",ç–²æƒ«å€¦æ€ :"ðŸ˜´",æ„¤æ€’:"ðŸ˜¡",å›°æƒ‘:"ðŸ¤”",å¼€å¿ƒ:"ðŸ˜Š",éš¾è¿‡:"ðŸ˜¢",ç´§å¼ :"ðŸ˜Ÿ",å…´å¥‹:"ðŸ˜†",æ‹…å¿ƒ:"ðŸ˜°",å¤±æœ›:"ðŸ˜ž"};return e[t]||"ðŸ’­"},getCommonBiasesCount(){const t=this.$store.state.thoughtRecords.filter((t=>t.completed)).flatMap((t=>t.biases||[]));return new Set(t.map((t=>t.type))).size},getAlternativeThoughtsCount(){return this.$store.state.thoughtRecords.filter((t=>t.alternativeThought)).length},getEncouragementMessage(){const t=["æ¯ä¸€æ¬¡æŽ¢ç´¢éƒ½è®©ä½ æ›´äº†è§£è‡ªå·±","ä½ æ­£åœ¨æˆä¸ºæ›´æ™ºæ…§çš„è‡ªå·±","æˆé•¿çš„è·¯ä¸Šï¼Œä½ ä»Žä¸å­¤å•","ä½ çš„å‹‡æ•¢è®©å†…å¿ƒçš„èŠ±å›­æ›´åŠ ç¾Žä¸½","æ¯ä¸ªæƒ³æ³•éƒ½å€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…"],e=this.analyzedRecordsCount;return t[Math.min(e,t.length-1)]},loadDailyEncouragement(){const t=["ä½ çš„å¿ƒçµèŠ±å›­æ­£åœ¨æ‚„æ‚„ç»½æ”¾ï¼Œæ¯ä¸€å¤©éƒ½æœ‰æ–°çš„å¯èƒ½","æˆé•¿ä¸æ˜¯ä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯æ¯ä¸ªå½“ä¸‹çš„æ¸©æŸ”åšæŒ","å…è®¸è‡ªå·±æ…¢æ…¢æ¥ï¼ŒèŠ±æœµéƒ½æœ‰è‡ªå·±çš„ç»½æ”¾æ—¶èŠ‚","ä»Šå¤©çš„å‹‡æ•¢ï¼Œå°±æ˜¯æ˜Žå¤©æ™ºæ…§çš„ç§å­","åœ¨å¿ƒçš„èŠ±å›­é‡Œï¼Œæ¯ä¸€ä»½æƒ…ç»ªéƒ½æœ‰å®ƒçš„æ„ä¹‰","ä½ æ¯”æƒ³è±¡ä¸­æ›´åšå¼ºï¼Œä¹Ÿæ¯”æƒ³è±¡ä¸­æ›´å€¼å¾—è¢«çˆ±","æ¯ä¸€æ¬¡æ·±å‘¼å¸ï¼Œéƒ½æ˜¯ç»™å¿ƒçµçš„æ¸©æŸ”æ‹¥æŠ±","æˆé•¿è·¯ä¸Šçš„æ¯ä¸€æ­¥ï¼Œéƒ½åœ¨ä¸ºæ›´å¥½çš„è‡ªå·±é“ºè·¯"],e=new Date,s=Math.floor((e-new Date(e.getFullYear(),0,0))/864e5);this.dailyEncouragement=t[s%t.length]},getBloomParticleStyle(t){const e=24*t+24*Math.random(),s=150+200*Math.random(),o=Math.cos(e*Math.PI/180)*s,i=Math.sin(e*Math.PI/180)*s,n=5*Math.random(),a=8+4*Math.random();return{left:`calc(50% + ${o}px)`,top:`calc(50% + ${i}px)`,animationDelay:`${n}s`,animationDuration:`${a}s`}},async initializeDashboard(){try{this.isLoading=!0,this.$store.state.thoughtRecords||await this.$store.dispatch("loadThoughtRecords"),this.loadDailyEncouragement()}catch(t){console.error("Failed to initialize dashboard:",t)}finally{this.isLoading=!1}}},mounted(){this.initializeDashboard()}},Pi=(0,D.A)(Fi,[["render",Bi],["__scopeId","data-v-3950a34a"]]),Oi=Pi,Ni={class:"mind-garden"},Xi={class:"garden-background"},Ui={class:"floating-particles"},ji={class:"garden-content"},Gi={class:"welcome-section"},Vi={class:"welcome-card"},Wi={class:"garden-title"},Ki={class:"garden-subtitle"},Qi={class:"mood-check"},zi={class:"mood-title"},qi={class:"emotion-grid"},Hi=["onClick"],Ji={class:"emotion-name"},Yi={key:0,class:"selection-indicator"},Zi={key:0,class:"selected-emotions"},tn={class:"emotion-tags"},en=["onClick"],sn={class:"custom-emotion"},on=["placeholder"],nn={class:"action-buttons"},an=["disabled"],ln={class:"quick-access"},cn={class:"section-title"},rn={class:"access-grid"},dn={class:"card-content"},un={key:0,class:"card-stats"},hn={class:"card-content"},gn={class:"card-hint"},mn={class:"card-content"},pn={key:0,class:"daily-inspiration"},vn={class:"inspiration-card"},kn={class:"inspiration-content"};function yn(t,e,s,i,n,a){const l=(0,L.g2)("router-link");return(0,L.uX)(),(0,L.CE)("div",Ni,[(0,L.Lk)("div",Xi,[e[8]||(e[8]=(0,L.Lk)("div",{class:"sky-gradient"},null,-1)),(0,L.Lk)("div",Ui,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(12,(t=>(0,L.Lk)("div",{key:t,class:"particle",style:(0,C.Tr)(a.getParticleStyle(t))},null,4))),64))])]),(0,L.Lk)("div",ji,[(0,L.Lk)("div",Gi,[(0,L.Lk)("div",Vi,[(0,L.Lk)("h1",Wi,[e[9]||(e[9]=(0,L.Lk)("span",{class:"title-icon"},"ðŸŒ±",-1)),(0,L.eW)(" "+(0,C.v_)(t.$t("mindGarden.title")),1)]),(0,L.Lk)("p",Ki,(0,C.v_)(t.$t("mindGarden.subtitle")),1),(0,L.Lk)("div",Qi,[(0,L.Lk)("h3",zi,(0,C.v_)(t.$t("mindGarden.moodCheck.title")),1),(0,L.Lk)("div",qi,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.emotionOptions,(e=>((0,L.uX)(),(0,L.CE)("div",{key:e.name,onClick:t=>a.toggleEmotion(e),class:(0,C.C4)(["emotion-card",{selected:a.isEmotionSelected(e)}])},[(0,L.Lk)("div",{class:"emotion-icon",style:(0,C.Tr)({background:e.gradient})},(0,C.v_)(e.emoji),5),(0,L.Lk)("span",Ji,(0,C.v_)(t.$t(`emotions.${e.key}`)),1),a.isEmotionSelected(e)?((0,L.uX)(),(0,L.CE)("div",Yi,"âœ“")):(0,L.Q3)("",!0)],10,Hi)))),128))]),n.selectedEmotions.length>0?((0,L.uX)(),(0,L.CE)("div",Zi,[(0,L.Lk)("div",tn,[((0,L.uX)(!0),(0,L.CE)(L.FK,null,(0,L.pI)(n.selectedEmotions,(t=>((0,L.uX)(),(0,L.CE)("span",{key:t.name,class:"emotion-tag",style:(0,C.Tr)({background:t.gradient}),onClick:e=>a.removeEmotion(t)},[(0,L.eW)((0,C.v_)(t.emoji)+" "+(0,C.v_)(t.name)+" ",1),e[10]||(e[10]=(0,L.Lk)("span",{class:"remove-tag"},"Ã—",-1))],12,en)))),128))])])):(0,L.Q3)("",!0),(0,L.Lk)("div",sn,[(0,L.bo)((0,L.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.customEmotion=t),type:"text",placeholder:t.$t("mindGarden.moodCheck.customPlaceholder"),class:"custom-input",onFocus:e[1]||(e[1]=(...t)=>a.onCustomEmotionFocus&&a.onCustomEmotionFocus(...t)),onBlur:e[2]||(e[2]=(...t)=>a.onCustomEmotionBlur&&a.onCustomEmotionBlur(...t)),onKeyup:e[3]||(e[3]=(0,o.jR)((0,o.D$)(((...t)=>a.addCustomEmotion&&a.addCustomEmotion(...t)),["prevent"]),["enter"])),onKeydown:e[4]||(e[4]=(0,o.jR)((0,o.D$)(((...t)=>a.addCustomEmotion&&a.addCustomEmotion(...t)),["prevent"]),["tab"])),ref:"customEmotionInput"},null,40,on),[[o.Jo,n.customEmotion]]),n.customEmotion.trim()?((0,L.uX)(),(0,L.CE)("button",{key:0,onClick:e[5]||(e[5]=(...t)=>a.addCustomEmotion&&a.addCustomEmotion(...t)),class:"add-emotion-btn",type:"button"},(0,C.v_)(t.$t("mindGarden.moodCheck.addButton")),1)):(0,L.Q3)("",!0)]),(0,L.Lk)("div",nn,[(0,L.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>a.skipMoodSelection&&a.skipMoodSelection(...t)),class:"btn btn-secondary skip-btn"},(0,C.v_)(t.$t("mindGarden.moodCheck.skipButton")),1),(0,L.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>a.startGrowthJourney&&a.startGrowthJourney(...t)),class:"btn btn-primary start-btn",disabled:!a.canStart},[e[11]||(e[11]=(0,L.Lk)("span",{class:"btn-icon"},"ðŸŒ¿",-1)),(0,L.eW)(" "+(0,C.v_)(t.$t("mindGarden.moodCheck.startButton")),1)],8,an)])])])]),(0,L.Lk)("div",ln,[(0,L.Lk)("h3",cn,(0,C.v_)(t.$t("mindGarden.quickAccess.title")),1),(0,L.Lk)("div",rn,[(0,L.bF)(l,{to:"/dashboard",class:"access-card growth-card"},{default:(0,L.k6)((()=>[e[12]||(e[12]=(0,L.Lk)("div",{class:"card-icon"},"ðŸŒ¸",-1)),(0,L.Lk)("div",dn,[(0,L.Lk)("h4",null,(0,C.v_)(t.$t("mindGarden.quickAccess.growth.title")),1),(0,L.Lk)("p",null,(0,C.v_)(t.$t("mindGarden.quickAccess.growth.description")),1),n.stats?((0,L.uX)(),(0,L.CE)("div",un,[(0,L.Lk)("span",null,(0,C.v_)(t.$t("mindGarden.quickAccess.growth.stats",{count:n.stats.total})),1)])):(0,L.Q3)("",!0)])])),_:1}),(0,L.bF)(l,{to:"/analysis",class:"access-card wisdom-card"},{default:(0,L.k6)((()=>[e[13]||(e[13]=(0,L.Lk)("div",{class:"card-icon"},"ðŸ¤–",-1)),(0,L.Lk)("div",hn,[(0,L.Lk)("h4",null,(0,C.v_)(t.$t("mindGarden.quickAccess.wisdom.title")),1),(0,L.Lk)("p",null,(0,C.v_)(t.$t("mindGarden.quickAccess.wisdom.description")),1),(0,L.Lk)("div",gn,[(0,L.Lk)("span",null,(0,C.v_)(t.$t("mindGarden.quickAccess.wisdom.hint")),1)])])])),_:1}),(0,L.bF)(l,{to:"/config",class:"access-card settings-card"},{default:(0,L.k6)((()=>[e[14]||(e[14]=(0,L.Lk)("div",{class:"card-icon"},"âš™ï¸",-1)),(0,L.Lk)("div",mn,[(0,L.Lk)("h4",null,(0,C.v_)(t.$t("mindGarden.quickAccess.settings.title")),1),(0,L.Lk)("p",null,(0,C.v_)(t.$t("mindGarden.quickAccess.settings.description")),1)])])),_:1})])]),n.dailyInspiration?((0,L.uX)(),(0,L.CE)("div",pn,[(0,L.Lk)("div",vn,[e[15]||(e[15]=(0,L.Lk)("div",{class:"inspiration-icon"},"ðŸ’",-1)),(0,L.Lk)("div",kn,[(0,L.Lk)("h4",null,(0,C.v_)(t.$t("mindGarden.dailyInspiration.title")),1),(0,L.Lk)("p",null,(0,C.v_)(n.dailyInspiration),1)])])])):(0,L.Q3)("",!0)])])}const bn={name:"MindGarden",data(){return{selectedEmotions:[],customEmotion:"",isCustomEmotionFocused:!1,customEmotionHistory:[],customEmotionHistoryIndex:-1,emotionOptions:[{key:"pleasant",emoji:"ðŸ˜Š",color:"#FFC857",gradient:"linear-gradient(135deg, #FFC857, #FFD700)",flower:"sunflower"},{key:"calm",emoji:"ðŸ˜Œ",color:"#84A98C",gradient:"linear-gradient(135deg, #84A98C, #7B9BB3)",flower:"lavender"},{key:"sad",emoji:"ðŸ˜”",color:"#A0826D",gradient:"linear-gradient(135deg, #A0826D, #8B7355)",flower:"wilted"},{key:"anxious",emoji:"ðŸ˜°",color:"#9384A8",gradient:"linear-gradient(135deg, #9384A8, #7A6B8A)",flower:"thorny"},{key:"hopeful",emoji:"ðŸŒŸ",color:"#FF9B85",gradient:"linear-gradient(135deg, #FF9B85, #FFA07A)",flower:"cherry"},{key:"tired",emoji:"ðŸ˜´",color:"#CAD2C5",gradient:"linear-gradient(135deg, #CAD2C5, #B8C5B8)",flower:"droopy"}],dailyInspiration:"",stats:null}},computed:{canStart(){return this.selectedEmotions.length>0||this.customEmotion.trim().length>0}},methods:{toggleEmotion(t){const e=this.selectedEmotions.findIndex((e=>e.key===t.key));if(e>-1)this.selectedEmotions.splice(e,1);else{const e={...t,name:this.$t(`emotions.${t.key}`)};this.selectedEmotions.push(e)}},isEmotionSelected(t){return this.selectedEmotions.some((e=>e.key===t.key))},removeEmotion(t){const e=this.selectedEmotions.findIndex((e=>e.key===t.key));e>-1&&this.selectedEmotions.splice(e,1)},onCustomEmotionFocus(){this.isCustomEmotionFocused=!0,this.customEmotionHistoryIndex=-1},onCustomEmotionBlur(){setTimeout((()=>{this.isCustomEmotionFocused=!1}),200)},addCustomEmotion(){const t=this.customEmotion.trim();if(!t)return;const e=this.selectedEmotions.some((e=>e.name===t&&e.isCustom));if(!e){const e=["linear-gradient(135deg, #84A98C, #7B9BB3)","linear-gradient(135deg, #A0826D, #8B7355)","linear-gradient(135deg, #9384A8, #7A6B8A)","linear-gradient(135deg, #FF9B85, #FFA07A)"],s=e[Math.floor(Math.random()*e.length)],o={name:t,isCustom:!0,emoji:"ðŸ’­",color:"#84A98C",gradient:s,flower:"custom"};this.selectedEmotions.push(o),this.customEmotionHistory.includes(t)||(this.customEmotionHistory.unshift(t),this.customEmotionHistory.length>5&&this.customEmotionHistory.pop()),this.customEmotion="",this.$nextTick((()=>{this.$refs.customEmotionInput.focus()}))}},skipMoodSelection(){this.selectedEmotions=[],this.customEmotion="",this.$store.state.currentSession=null,this.$router.push("/record")},startGrowthJourney(){let t=[...this.selectedEmotions];this.customEmotion.trim()&&(this.addCustomEmotion(),t=[...this.selectedEmotions]);const e={emotions:t,timestamp:new Date};this.$store.state.currentSession=e,this.$router.push("/record")},getParticleStyle(t){const e=30*t+30*Math.random(),s=100+200*Math.random(),o=Math.cos(e*Math.PI/180)*s,i=Math.sin(e*Math.PI/180)*s,n=4*Math.random(),a=6+4*Math.random();return{left:`calc(50% + ${o}px)`,top:`calc(50% + ${i}px)`,animationDelay:`${n}s`,animationDuration:`${a}s`}},loadStats(){this.$store&&this.$store.state.thoughtRecords&&(this.stats={total:this.$store.state.thoughtRecords.length,thisWeek:this.$store.state.thoughtRecords.filter((t=>{const e=new Date(t.timestamp),s=new Date;return s.setDate(s.getDate()-7),e>s})).length})},loadDailyInspiration(){const t=["æ¯ä¸€ä¸ªæƒ³æ³•éƒ½å€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…","æˆé•¿ä¸æ˜¯ä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯æ¯å¤©çš„å°å°è¿›æ­¥","ä½ æ¯”æƒ³è±¡ä¸­æ›´åšå¼ºï¼Œä¹Ÿæ¯”æƒ³è±¡ä¸­æ›´å€¼å¾—è¢«çˆ±","ä»Šå¤©çš„å›°éš¾ï¼Œæ˜¯æ˜Žå¤©æ™ºæ…§çš„ç§å­","å…è®¸è‡ªå·±ä¸å®Œç¾Žï¼Œè¿™å°±æ˜¯æˆé•¿çš„å¼€å§‹","æ¯ä¸€æ¬¡æ·±å‘¼å¸ï¼Œéƒ½æ˜¯ç»™å¿ƒçµçš„æ¸©æŸ”æ‹¥æŠ±","ä½ çš„æ„Ÿå—éƒ½æ˜¯çœŸå®žæœ‰æ•ˆçš„ï¼Œä¸éœ€è¦è¯„åˆ¤","åœ¨å¿ƒçš„èŠ±å›­é‡Œï¼Œæ¯ä¸€æœµèŠ±éƒ½æœ‰ç»½æ”¾çš„æ—¶å€™"],e=new Date,s=Math.floor((e-new Date(e.getFullYear(),0,0))/864e5);this.dailyInspiration=t[s%t.length]}},mounted(){this.loadStats(),this.loadDailyInspiration()}},Ln=(0,D.A)(bn,[["render",yn],["__scopeId","data-v-b6478178"]]),Cn=Ln,fn={class:"about-page"},En={class:"about-background"},wn={class:"floating-petals"};function _n(t,e,s,o,i,n){return(0,L.uX)(),(0,L.CE)("div",fn,[(0,L.Lk)("div",En,[e[1]||(e[1]=(0,L.Lk)("div",{class:"sky-gradient"},null,-1)),(0,L.Lk)("div",wn,[((0,L.uX)(),(0,L.CE)(L.FK,null,(0,L.pI)(12,(t=>(0,L.Lk)("div",{key:t,class:"petal",style:(0,C.Tr)(n.getPetalStyle(t))},null,4))),64))])]),(0,L.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>n.goBack&&n.goBack(...t)),class:"floating-back-btn","aria-label":"è¿”å›žä¸»é¡µ"},e[2]||(e[2]=[(0,L.Lk)("span",null,"ðŸ¡",-1)])),e[3]||(e[3]=(0,L.Fv)('<main class="about-content" data-v-d114b184><header class="page-header" data-v-d114b184><h1 class="page-title" data-v-d114b184><span class="title-icon" data-v-d114b184>â„¹ï¸</span> å…³äºŽå¿ƒçµèŠ±å›­ </h1><p class="page-subtitle" data-v-d114b184>ä¸€ä¸ªæ¸©æš–çš„CBTè‡ªåŠ©å¿ƒç†å¥åº·å·¥å…·</p></header><section class="info-card project-info" data-v-d114b184><h2 class="section-title" data-v-d114b184><span class="title-icon" data-v-d114b184>ðŸŒŸ</span> é¡¹ç›®ç®€ä»‹ </h2><div class="info-content" data-v-d114b184><p class="project-description" data-v-d114b184> CBT Helperï¼ˆå¿ƒçµèŠ±å›­ï¼‰æ˜¯ä¸€ä¸ªåŸºäºŽè®¤çŸ¥è¡Œä¸ºç–—æ³•(CBT)åŽŸç†çš„Vue.jsè‡ªåŠ©å¿ƒç†å¥åº·å·¥å…·ã€‚ é€šè¿‡æ¸©æš–ã€ä¸ªæ€§åŒ–çš„ç•Œé¢ï¼Œç»“åˆå¤§è¯­è¨€æ¨¡åž‹(LLM)çš„æ™ºèƒ½åˆ†æžèƒ½åŠ›ï¼Œ å¸®åŠ©ç”¨æˆ·è¯†åˆ«ã€æŒ‘æˆ˜å¹¶é‡å¡‘ä¸å¥åº·çš„æ€ç»´æ¨¡å¼ã€‚ </p><div class="feature-grid" data-v-d114b184><div class="feature-item" data-v-d114b184><div class="feature-icon" data-v-d114b184>ðŸ§ </div><div class="feature-text" data-v-d114b184>æ™ºèƒ½æ€ç»´åˆ†æž</div></div><div class="feature-item" data-v-d114b184><div class="feature-icon" data-v-d114b184>ðŸ’­</div><div class="feature-text" data-v-d114b184>ä¸ªæ€§åŒ–æŒ‡å¯¼</div></div><div class="feature-item" data-v-d114b184><div class="feature-icon" data-v-d114b184>ðŸ“Š</div><div class="feature-text" data-v-d114b184>æƒ…ç»ªè¿½è¸ª</div></div><div class="feature-item" data-v-d114b184><div class="feature-icon" data-v-d114b184>ðŸ”’</div><div class="feature-text" data-v-d114b184>éšç§ä¿æŠ¤</div></div></div></div></section><section class="info-card version-info" data-v-d114b184><h2 class="section-title" data-v-d114b184><span class="title-icon" data-v-d114b184>ðŸ“±</span> ç‰ˆæœ¬ä¿¡æ¯ </h2><div class="info-content" data-v-d114b184><div class="version-details" data-v-d114b184><div class="version-item" data-v-d114b184><span class="version-label" data-v-d114b184>å½“å‰ç‰ˆæœ¬:</span><span class="version-value" data-v-d114b184>v1.7</span></div><div class="version-item" data-v-d114b184><span class="version-label" data-v-d114b184>æŠ€æœ¯æ ˆ:</span><span class="version-value" data-v-d114b184>Vue.js 3.x + JavaScript</span></div><div class="version-item" data-v-d114b184><span class="version-label" data-v-d114b184>è®¸å¯è¯:</span><span class="version-value" data-v-d114b184>Apache License 2.0</span></div></div></div></section><section class="info-card contact-info" data-v-d114b184><h2 class="section-title" data-v-d114b184><span class="title-icon" data-v-d114b184>ðŸ“ž</span> è”ç³»æ–¹å¼ </h2><div class="info-content" data-v-d114b184><div class="contact-grid" data-v-d114b184><a href="https://github.com/ChenM0M" target="_blank" class="contact-item" data-v-d114b184><div class="contact-icon" data-v-d114b184>ðŸ™</div><div class="contact-text" data-v-d114b184><div class="contact-label" data-v-d114b184>å¼€å‘è€…ä¸»é¡µ</div><div class="contact-value" data-v-d114b184>github.com/ChenM0M</div></div></a><a href="https://github.com/ChenM0M/CBThelper" target="_blank" class="contact-item" data-v-d114b184><div class="contact-icon" data-v-d114b184>ðŸ“¦</div><div class="contact-text" data-v-d114b184><div class="contact-label" data-v-d114b184>é¡¹ç›®ä»“åº“</div><div class="contact-value" data-v-d114b184>github.com/ChenM0M/CBThelper</div></div></a><a href="mailto:2895521977@qq.com" class="contact-item" data-v-d114b184><div class="contact-icon" data-v-d114b184>ðŸ“§</div><div class="contact-text" data-v-d114b184><div class="contact-label" data-v-d114b184>è”ç³»é‚®ç®±</div><div class="contact-value" data-v-d114b184>2895521977@qq.com</div></div></a></div></div></section><section class="info-card disclaimer" data-v-d114b184><h2 class="section-title" data-v-d114b184><span class="title-icon" data-v-d114b184>âš ï¸</span> å…è´£å£°æ˜Ž </h2><div class="info-content" data-v-d114b184><div class="disclaimer-content" data-v-d114b184><p class="disclaimer-text" data-v-d114b184><strong data-v-d114b184>é‡è¦æé†’ï¼š</strong>æœ¬åº”ç”¨ä»…ä½œä¸ºå¿ƒç†å¥åº·è‡ªåŠ©å·¥å…·ä½¿ç”¨ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢æˆ–åŒ»ç–—æ²»ç–—ã€‚ </p><ul class="disclaimer-list" data-v-d114b184><li data-v-d114b184>æœ¬å·¥å…·åŸºäºŽè®¤çŸ¥è¡Œä¸ºç–—æ³•(CBT)åŽŸç†è®¾è®¡ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·è¿›è¡Œè‡ªæˆ‘åæ€å’Œæƒ…ç»ªç®¡ç†</li><li data-v-d114b184>å¦‚æ‚¨æ­£åœ¨ç»åŽ†ä¸¥é‡çš„å¿ƒç†å¥åº·é—®é¢˜ï¼Œè¯·åŠæ—¶å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆæˆ–åŒ»ç”Ÿçš„å¸®åŠ©</li><li data-v-d114b184>ç”¨æˆ·ä½¿ç”¨æœ¬åº”ç”¨æ—¶äº§ç”Ÿçš„ä»»ä½•ç»“æžœå’ŒåŽæžœï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»</li><li data-v-d114b184>æ‰€æœ‰ç”¨æˆ·æ•°æ®ä»…å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œå¼€å‘è€…æ— æ³•è®¿é—®æ‚¨çš„ä¸ªäººä¿¡æ¯</li><li data-v-d114b184>æœ¬åº”ç”¨å®Œå…¨å…è´¹å¼€æºï¼Œä¸æ”¶é›†ä»»ä½•ä¸ªäººéšç§æ•°æ®</li></ul><p class="emergency-notice" data-v-d114b184><span class="emergency-icon" data-v-d114b184>ðŸš¨</span><strong data-v-d114b184>ç´§æ€¥æƒ…å†µï¼š</strong>å¦‚æžœæ‚¨æœ‰è‡ªä¼¤æˆ–è‡ªæ€å€¾å‘ï¼Œè¯·ç«‹å³æ‹¨æ‰“å½“åœ°å¿ƒç†å±æœºå¹²é¢„çƒ­çº¿æˆ–å‰å¾€æœ€è¿‘çš„åŒ»ç–—æœºæž„å¯»æ±‚å¸®åŠ©ã€‚ </p></div></div></section><section class="info-card acknowledgments" data-v-d114b184><h2 class="section-title" data-v-d114b184><span class="title-icon" data-v-d114b184>ðŸ™</span> è‡´è°¢ </h2><div class="info-content" data-v-d114b184><p class="acknowledgment-text" data-v-d114b184> æ„Ÿè°¢Vue.jså›¢é˜Ÿæä¾›ä¼˜ç§€çš„å‰ç«¯æ¡†æž¶ï¼Œæ„Ÿè°¢CBTç ”ç©¶è€…ä»¬ä¸ºå¿ƒç†å¥åº·é¢†åŸŸåšå‡ºçš„è´¡çŒ®ï¼Œæ„Ÿè°¢ClaudeCodeæä¾›çš„æŠ€æœ¯æ”¯æŒï¼Œ æ„Ÿè°¢æ‰€æœ‰æµ‹è¯•ç”¨æˆ·æä¾›çš„å®è´µåé¦ˆã€‚è®©æˆ‘ä»¬ä¸€èµ·ä¸ºå¿ƒç†å¥åº·è´¡çŒ®åŠ›é‡ï¼Œåˆ›é€ ä¸€ä¸ªæ›´æ¸©æš–çš„ä¸–ç•Œï¼ </p></div></section></main>',1))])}const An={name:"AboutPage",methods:{goBack(){this.$router.push("/")},getPetalStyle(t){const e=8*Math.random(),s=8+6*Math.random(),o=100*Math.random(),i=100*Math.random();return{left:`${o}%`,top:`${i}%`,animationDelay:`${e}s`,animationDuration:`${s}s`}}}},Sn=(0,D.A)(An,[["render",_n],["__scopeId","data-v-d114b184"]]),Tn=Sn,Mn=(0,i.aE)({history:(0,i.LA)(),routes:[{path:"/",component:Cn},{path:"/dashboard",component:Oi},{path:"/config",component:St},{path:"/record",component:be},{path:"/analysis",component:yo},{path:"/about",component:Tn}]}),Rn={state:{apiConfig:{endpoint:c.llm.apiUrl,apiKey:c.llm.apiKey,model:c.llm.modelName},configMode:"cloud",thoughtRecords:[],selectedRecordIndex:void 0,currentSession:null,appConfig:c},updateApiConfig(t){this.state.apiConfig={...this.state.apiConfig,...t},localStorage.setItem("llmConfig",JSON.stringify(this.state.apiConfig)),this.saveState()},saveState(){try{const t=JSON.parse(JSON.stringify(this.state));t._version="2.0",t._timestamp=Date.now(),delete t.appConfig,localStorage.setItem("cbtHelperState",JSON.stringify(t)),console.log("[Store] çŠ¶æ€å·²ä¿å­˜",{recordCount:this.state.thoughtRecords.length,timestamp:(new Date).toISOString()})}catch(t){console.error("[Store] ä¿å­˜çŠ¶æ€å¤±è´¥:",t)}},restoreState(){const t=localStorage.getItem("cbtHelperState"),e=localStorage.getItem("llmConfig"),s=localStorage.getItem("configMode");if(t)try{const o=JSON.parse(t);(!o._version||o._version<"2.0")&&(console.log("[Store] æ£€æµ‹åˆ°æ—§ç‰ˆæœ¬æ•°æ®ï¼Œå¼€å§‹è¿ç§»..."),this.migrateOldData(o)),this.state.configMode=s||o.configMode||"cloud",this.state={...this.state,thoughtRecords:o.thoughtRecords||[],selectedRecordIndex:o.selectedRecordIndex,currentSession:o.currentSession,configMode:this.state.configMode},"local"===this.state.configMode&&e?this.state.apiConfig=JSON.parse(e):this.state.apiConfig={endpoint:c.llm.apiUrl,apiKey:c.llm.apiKey,model:c.llm.modelName},this.state.appConfig=c,console.log("[Store] çŠ¶æ€å·²æ¢å¤",{recordCount:this.state.thoughtRecords.length,version:o._version,configMode:this.state.configMode,features:this.state.appConfig.features})}catch(o){console.error("[Store] æ¢å¤çŠ¶æ€å¤±è´¥:",o)}},migrateOldData(t){t.thoughtRecords&&Array.isArray(t.thoughtRecords)&&(t.thoughtRecords=t.thoughtRecords.map((t=>({id:t.id||Date.now()+Math.random(),timestamp:t.timestamp||Date.now(),emotions:t.emotions||[],situation:t.situation||"",automaticThought:t.automaticThought||"",intensity:t.intensity||5,bodyLocation:t.bodyLocation||"",physicalSensations:t.physicalSensations||"",completed:t.completed||!1,analysis:t.analysis||null,chatTopics:t.chatTopics||[],topicTitle:t.topicTitle||null,...t})))),t._version="2.0",t._migrated=!0},clearAll(){this.state.thoughtRecords=[],this.saveState()},exportData(){try{const t={version:"2.0",exportTime:(new Date).toISOString(),appName:"CBT Helper",data:{thoughtRecords:this.state.thoughtRecords,settings:{features:this.state.appConfig?.features||{}}}},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),o=document.createElement("a");return o.href=s,o.download=`cbt-helper-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),console.log("[Store] æ•°æ®å¯¼å‡ºæˆåŠŸ"),!0}catch(t){return console.error("[Store] æ•°æ®å¯¼å‡ºå¤±è´¥:",t),!1}},importData(t){try{const e="string"===typeof t?JSON.parse(t):t;if(!e.data||!e.data.thoughtRecords)throw new Error("æ— æ•ˆçš„æ•°æ®æ ¼å¼");JSON.parse(JSON.stringify(this.state));const s=new Set(this.state.thoughtRecords.map((t=>t.id))),o=e.data.thoughtRecords.filter((t=>!s.has(t.id)));return this.state.thoughtRecords=[...this.state.thoughtRecords,...o],this.saveState(),console.log("[Store] æ•°æ®å¯¼å…¥æˆåŠŸ",{imported:o.length,total:this.state.thoughtRecords.length}),{success:!0,imported:o.length,total:this.state.thoughtRecords.length}}catch(e){return console.error("[Store] æ•°æ®å¯¼å…¥å¤±è´¥:",e),{success:!1,error:e.message}}}};Rn.restoreState(),(0,n.WQ)();const In=(0,o.Ef)(Q);In.use(Mn),In.use(b),In.config.globalProperties.$store=Rn,In.component("SpeedInsights",a.b),window.$store=Rn,window.vueApp=In,In.mount("#app")}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,s),n.exports}s.m=t,(()=>{var t=[];s.O=(e,o,i,n)=>{if(!o){var a=1/0;for(d=0;d<t.length;d++){for(var[o,i,n]=t[d],l=!0,c=0;c<o.length;c++)(!1&n||a>=n)&&Object.keys(s.O).every((t=>s.O[t](o[c])))?o.splice(c--,1):(l=!1,n<a&&(a=n));if(l){t.splice(d--,1);var r=i();void 0!==r&&(e=r)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,i,n]}})(),(()=>{s.d=(t,e)=>{for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={524:0};s.O.j=e=>0===t[e];var e=(e,o)=>{var i,n,[a,l,c]=o,r=0;if(a.some((e=>0!==t[e]))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(c)var d=c(s)}for(e&&e(o);r<a.length;r++)n=a[r],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},o=self["webpackChunkcbthelper"]=self["webpackChunkcbthelper"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var o=s.O(void 0,[504],(()=>s(781)));o=s.O(o)})();
//# sourceMappingURL=app.78d8ed40.js.map