(()=>{"use strict";var t={138:(t,e,s)=>{var a=s(751),o=s(220),n=s(108),i=s(38),l=s(641),r=s(953),c=s(33);const d=s.p+"img/logo.23419aed.png",u={id:"app",class:"app-container"},h={class:"app-header"},g={class:"header-content"},m={class:"logo"},p=["src"],k={class:"nav-links-desktop"},v={class:"app-content"},y={class:"app-footer"},b={__name:"App",setup(t){const e=(0,r.KR)(!1);function s(){e.value=!e.value}return(0,l.sV)((()=>{document.title="CBThelper";const t=document.querySelector("link[rel~='icon']")||document.createElement("link");t.type="image/png",t.rel="icon",t.href="/logo.png",document.head.appendChild(t),console.log("Title and favicon set by App.vue onMounted hook")})),(t,o)=>{const n=(0,l.g2)("router-link"),i=(0,l.g2)("router-view"),b=(0,l.g2)("SpeedInsights");return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("header",h,[(0,l.Lk)("div",g,[(0,l.Lk)("div",m,[(0,l.bF)(n,{to:"/"},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{src:(0,r.R1)(d),alt:"CBThelper Logo",class:"logo-image"},null,8,p),o[0]||(o[0]=(0,l.Lk)("span",{class:"logo-text"},"æ€ç»´èŠ±å›­",-1))])),_:1})]),(0,l.Lk)("nav",k,[(0,l.bF)(n,{to:"/",class:"nav-link","active-class":"router-link-active"},{default:(0,l.k6)((()=>o[1]||(o[1]=[(0,l.eW)("ðŸŒ± æ€ç»´èŠ±å›­")]))),_:1}),(0,l.bF)(n,{to:"/dashboard",class:"nav-link","active-class":"router-link-active"},{default:(0,l.k6)((()=>o[2]||(o[2]=[(0,l.eW)("ðŸ¡ èŠ±å›­è®°å½•")]))),_:1}),(0,l.bF)(n,{to:"/analysis",class:"nav-link","active-class":"router-link-active"},{default:(0,l.k6)((()=>o[3]||(o[3]=[(0,l.eW)("ðŸ” è®¤çŸ¥åˆ†æž")]))),_:1}),(0,l.bF)(n,{to:"/config",class:"nav-link","active-class":"router-link-active"},{default:(0,l.k6)((()=>o[4]||(o[4]=[(0,l.eW)("âš™ï¸ è®¾ç½®")]))),_:1})]),(0,l.Lk)("button",{class:(0,c.C4)(["nav-toggle-mobile",{"is-active":e.value}]),onClick:s,"aria-label":"Toggle navigation","aria-expanded":"isMobileMenuOpen"},o[5]||(o[5]=[(0,l.Lk)("span",{class:"icon-bar"},null,-1),(0,l.Lk)("span",{class:"icon-bar"},null,-1),(0,l.Lk)("span",{class:"icon-bar"},null,-1)]),2)]),(0,l.Lk)("nav",{class:(0,c.C4)(["nav-links-mobile",{"is-active":e.value}])},[(0,l.bF)(n,{to:"/",class:"nav-link","active-class":"router-link-active",onClick:s},{default:(0,l.k6)((()=>o[6]||(o[6]=[(0,l.eW)("ðŸŒ± æ€ç»´èŠ±å›­")]))),_:1}),(0,l.bF)(n,{to:"/dashboard",class:"nav-link","active-class":"router-link-active",onClick:s},{default:(0,l.k6)((()=>o[7]||(o[7]=[(0,l.eW)("ðŸ¡ èŠ±å›­è®°å½•")]))),_:1}),(0,l.bF)(n,{to:"/analysis",class:"nav-link","active-class":"router-link-active",onClick:s},{default:(0,l.k6)((()=>o[8]||(o[8]=[(0,l.eW)("ðŸ” è®¤çŸ¥åˆ†æž")]))),_:1}),(0,l.bF)(n,{to:"/config",class:"nav-link","active-class":"router-link-active",onClick:s},{default:(0,l.k6)((()=>o[9]||(o[9]=[(0,l.eW)("âš™ï¸ è®¾ç½®")]))),_:1})],2)]),(0,l.Lk)("main",v,[(0,l.bF)(i,null,{default:(0,l.k6)((({Component:t})=>[(0,l.bF)(a.eB,{name:"fade",mode:"out-in"},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(t)))])),_:2},1024)])),_:1})]),(0,l.Lk)("footer",y,[(0,l.Lk)("p",null,"Â© "+(0,c.v_)((new Date).getFullYear())+" CBT Helper. All rights reserved.",1),o[10]||(o[10]=(0,l.Lk)("p",{class:"disclaimer"},"æœ¬å·¥å…·ä»…ä¾›ä¿¡æ¯å‚è€ƒå’Œè‡ªæˆ‘è¾…åŠ©ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢æˆ–æ²»ç–—ã€‚å¦‚æœ‰ä¸¥é‡å¿ƒç†å›°æ‰°ï¼Œè¯·å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚",-1))]),(0,l.bF)(b)])}}};var L=s(262);const f=(0,L.A)(b,[["__scopeId","data-v-612ceb05"]]),C=f,R={class:"config-container"},E={class:"card"},T={class:"form-group"},w={class:"form-group"},S={class:"form-group"},x={key:0,class:"form-group"},_=["disabled"],X={key:1,class:"alert alert-success mt-3"};function $(t,e,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",R,[e[11]||(e[11]=(0,l.Lk)("h2",{class:"mb-4"},"ðŸ”§ API è®¾ç½®",-1)),(0,l.Lk)("div",E,[(0,l.Lk)("div",T,[e[6]||(e[6]=(0,l.Lk)("label",null,"API ç«¯ç‚¹",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>n.apiConfig.endpoint=t),placeholder:"https://api.openai.com/v1/chat/completions"},null,512),[[a.Jo,n.apiConfig.endpoint]])]),(0,l.Lk)("div",w,[e[7]||(e[7]=(0,l.Lk)("label",null,"API å¯†é’¥",-1)),(0,l.bo)((0,l.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>n.apiConfig.apiKey=t),placeholder:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},null,512),[[a.Jo,n.apiConfig.apiKey]])]),(0,l.Lk)("div",S,[e[9]||(e[9]=(0,l.Lk)("label",null,"æ¨¡åž‹é€‰æ‹©",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>n.selectedModelOption=t),onChange:e[3]||(e[3]=(...t)=>i.handleModelChange&&i.handleModelChange(...t))},e[8]||(e[8]=[(0,l.Lk)("option",{value:"gpt-3.5-turbo"},"gpt-3.5-turbo",-1),(0,l.Lk)("option",{value:"gpt-4"},"gpt-4",-1),(0,l.Lk)("option",{value:"gpt-4-turbo"},"gpt-4-turbo",-1),(0,l.Lk)("option",{value:"custom"},"è‡ªå®šä¹‰...",-1)]),544),[[a.u1,n.selectedModelOption]])]),"custom"===n.selectedModelOption?((0,l.uX)(),(0,l.CE)("div",x,[e[10]||(e[10]=(0,l.Lk)("label",null,"è‡ªå®šä¹‰æ¨¡åž‹åç§°",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>n.customModelName=t),placeholder:"è¾“å…¥è‡ªå®šä¹‰æ¨¡åž‹åç§°"},null,512),[[a.Jo,n.customModelName]])])):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>i.saveConfig&&i.saveConfig(...t)),disabled:!i.isFormValid}," ðŸ’¾ ä¿å­˜è®¾ç½® ",8,_),n.showSuccess?((0,l.uX)(),(0,l.CE)("div",X," âœ… è®¾ç½®ä¿å­˜æˆåŠŸï¼ ")):(0,l.Q3)("",!0)])])}const I={data(){return{apiConfig:{...this.$store.state.apiConfig},showSuccess:!1,selectedModelOption:"",customModelName:""}},created(){const t=["gpt-3.5-turbo","gpt-4","gpt-4-turbo"];t.includes(this.apiConfig.model)?this.selectedModelOption=this.apiConfig.model:(this.selectedModelOption="custom",this.customModelName=this.apiConfig.model)},computed:{isFormValid(){const t=this.apiConfig.endpoint&&this.apiConfig.apiKey;return"custom"===this.selectedModelOption?t&&this.customModelName:t&&this.selectedModelOption}},methods:{handleModelChange(){"custom"!==this.selectedModelOption?this.apiConfig.model=this.selectedModelOption:this.customModelName||(this.customModelName=this.apiConfig.model)},saveConfig(){"custom"===this.selectedModelOption&&(this.apiConfig.model=this.customModelName),this.$store.state.apiConfig=this.apiConfig,this.$store.saveState(),this.showSuccess=!0,setTimeout((()=>this.showSuccess=!1),2e3)}}},B=(0,L.A)(I,[["render",$],["__scopeId","data-v-6c594775"]]),M=B,F={class:"record-container fade-in-up"},D={class:"card thought-form glass-effect fade-in-scale"},P={class:"form-group fade-in-scale",style:{"animation-delay":"0.1s"}},Q={class:"input-icon-wrapper"},O={class:"form-group fade-in-scale",style:{"animation-delay":"0.2s"}},A={class:"input-icon-wrapper"},N={class:"form-group fade-in-scale",style:{"animation-delay":"0.3s"}},J={class:"emotion-tags"},j=["onClick"],W={class:"custom-emotion"},G={class:"emotion-tag-input-container"},K={key:0,class:"selected-emotions"},V=["onClick"],z={class:"form-group fade-in-scale",style:{"animation-delay":"0.4s"}},U={class:"form-label"},H={class:"intensity-value gradient-text"},q={class:"intensity-slider"},Y={class:"form-actions fade-in-scale",style:{"animation-delay":"0.5s"}},Z=["disabled"],tt={key:0,class:"alert alert-success mt-3 fade-transition"},et={key:0,class:"recent-thoughts"},st={class:"thoughts-list"},at=["onClick"],ot={class:"thought-card-header"},nt={class:"thought-date"},it={class:"thought-emotions"},lt={key:0,class:"emotion-more"},rt={class:"thought-content"},ct={class:"thought-card-footer"},dt={class:"thought-intensity"},ut={class:"intensity-badge"};function ht(t,e,s,o,n,i){const r=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",F,[e[23]||(e[23]=(0,l.Lk)("h2",{class:"section-title gradient-text"},"âœ¨ è®°å½•ä½ çš„æƒ³æ³•",-1)),(0,l.Lk)("div",D,[(0,l.Lk)("form",{onSubmit:e[6]||(e[6]=(0,a.D$)(((...t)=>i.saveRecord&&i.saveRecord(...t)),["prevent"]))},[(0,l.Lk)("div",P,[e[8]||(e[8]=(0,l.Lk)("label",{class:"form-label"},"ðŸ” æƒ…å¢ƒæè¿°",-1)),(0,l.Lk)("div",Q,[e[7]||(e[7]=(0,l.Lk)("span",{class:"input-icon pulse-animation"},"ðŸ”",-1)),(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[0]||(e[0]=t=>n.newRecord.situation=t),placeholder:"å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œï¼Ÿä»€ä¹ˆæ—¶å€™ï¼Ÿ"},null,512),[[a.Jo,n.newRecord.situation]])])]),(0,l.Lk)("div",O,[e[10]||(e[10]=(0,l.Lk)("label",{class:"form-label"},[(0,l.eW)("ðŸ’­ è‡ªåŠ¨æ€ç»´ "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.Lk)("div",A,[e[9]||(e[9]=(0,l.Lk)("span",{class:"input-icon pulse-animation"},"ðŸ’­",-1)),(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[1]||(e[1]=t=>n.newRecord.automaticThought=t),placeholder:"ä½ å½“æ—¶æƒ³åˆ°äº†ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ ·çš„æƒ³æ³•é—ªè¿‡è„‘æµ·ï¼Ÿ",required:""},null,512),[[a.Jo,n.newRecord.automaticThought]])])]),(0,l.Lk)("div",N,[e[11]||(e[11]=(0,l.Lk)("label",{class:"form-label"},"ðŸŽ­ æƒ…ç»ªä½“éªŒ",-1)),(0,l.Lk)("div",J,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.commonEmotions,(t=>((0,l.uX)(),(0,l.CE)("button",{type:"button",class:(0,c.C4)(["emotion-tag-btn",{active:n.newRecord.emotions.includes(t)}]),key:t,onClick:e=>i.toggleEmotion(t)},(0,c.v_)(i.getEmotionEmoji(t))+" "+(0,c.v_)(t),11,j)))),128))]),(0,l.Lk)("div",W,[(0,l.Lk)("div",G,[n.customEmotions.length>0?((0,l.uX)(),(0,l.CE)("div",K,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.customEmotions,((t,e)=>((0,l.uX)(),(0,l.CE)("span",{key:e,class:"custom-emotion-tag"},[(0,l.eW)((0,c.v_)(t)+" ",1),(0,l.Lk)("span",{class:"remove-emotion",onClick:t=>i.removeCustomEmotion(e)},"Ã—",8,V)])))),128))])):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control emotion-input","onUpdate:modelValue":e[2]||(e[2]=t=>n.currentEmotion=t),placeholder:"è¾“å…¥å…¶ä»–æƒ…ç»ªå¹¶æŒ‰Enteræ·»åŠ ...",onKeydown:e[3]||(e[3]=(0,a.jR)((0,a.D$)(((...t)=>i.addCustomEmotion&&i.addCustomEmotion(...t)),["prevent"]),["enter"]))},null,544),[[a.Jo,n.currentEmotion]])])])]),(0,l.Lk)("div",z,[(0,l.Lk)("label",U,[e[12]||(e[12]=(0,l.eW)("ðŸ“Š æƒ…ç»ªå¼ºåº¦ ")),(0,l.Lk)("span",H,(0,c.v_)(n.newRecord.intensity)+"%",1)]),(0,l.Lk)("div",q,[e[13]||(e[13]=(0,l.Lk)("span",{class:"intensity-min"},"ðŸ˜Œ è½»å¾®",-1)),(0,l.bo)((0,l.Lk)("input",{type:"range",class:"custom-range",min:"0",max:"100",step:"5","onUpdate:modelValue":e[4]||(e[4]=t=>n.newRecord.intensity=t)},null,512),[[a.Jo,n.newRecord.intensity,void 0,{number:!0}]]),e[14]||(e[14]=(0,l.Lk)("span",{class:"intensity-max"},"ðŸ˜« å¼ºçƒˆ",-1))])]),(0,l.Lk)("div",Y,[(0,l.Lk)("button",{type:"submit",class:"btn btn-primary submit-btn breathing-light",disabled:!i.isFormValid},e[15]||(e[15]=[(0,l.Lk)("span",{class:"btn-icon"},"ðŸ’¾",-1),(0,l.eW)(" ä¿å­˜è®°å½• ")]),8,Z),(0,l.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[5]||(e[5]=(...t)=>i.resetForm&&i.resetForm(...t))},e[16]||(e[16]=[(0,l.Lk)("span",{class:"btn-icon"},"ðŸ”„",-1),(0,l.eW)(" é‡ç½® ")]))]),n.showSuccess?((0,l.uX)(),(0,l.CE)("div",tt,[e[18]||(e[18]=(0,l.eW)(" âœ… è®°å½•ä¿å­˜æˆåŠŸï¼å¿«åŽ»")),(0,l.bF)(r,{to:"/analysis"},{default:(0,l.k6)((()=>e[17]||(e[17]=[(0,l.eW)("åˆ†æžé¡µé¢")]))),_:1}),e[19]||(e[19]=(0,l.eW)("çœ‹çœ‹å§ "))])):(0,l.Q3)("",!0)],32)]),t.$store.state.thoughtRecords.length>0?((0,l.uX)(),(0,l.CE)("div",et,[e[22]||(e[22]=(0,l.Lk)("h3",{class:"subsection-title"},"æœ€è¿‘è®°å½•",-1)),(0,l.Lk)("div",st,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.recentThoughts,((t,s)=>((0,l.uX)(),(0,l.CE)("div",{class:"thought-card",key:s,onClick:t=>i.goToAnalysis(s)},[(0,l.Lk)("div",ot,[(0,l.Lk)("span",nt,(0,c.v_)(i.formatDate(t.timestamp)),1),(0,l.Lk)("div",it,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.emotions.slice(0,2),((t,e)=>((0,l.uX)(),(0,l.CE)("span",{key:e,class:"emotion-badge"},(0,c.v_)(t),1)))),128)),t.emotions.length>2?((0,l.uX)(),(0,l.CE)("span",lt,"+"+(0,c.v_)(t.emotions.length-2),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",rt,(0,c.v_)(i.truncateText(t.automaticThought,100)),1),(0,l.Lk)("div",ct,[(0,l.Lk)("div",dt,[e[20]||(e[20]=(0,l.eW)(" å¼ºåº¦: ")),(0,l.Lk)("span",ut,(0,c.v_)(t.intensity)+"%",1)]),e[21]||(e[21]=(0,l.Lk)("span",{class:"view-analysis"},"æŸ¥çœ‹åˆ†æž â†’",-1))])],8,at)))),128))])])):(0,l.Q3)("",!0)])}const gt={data(){return{newRecord:{situation:"",automaticThought:"",emotions:[],customEmotion:"",intensity:50,timestamp:null},commonEmotions:["ç„¦è™‘","æ²®ä¸§","æ„¤æ€’","æ‚²ä¼¤","ç¾žæ„§","å…´å¥‹","å¹³é™","ææƒ§","å¤±è½","æ‹…å¿§"],showSuccess:!1,currentEmotion:"",customEmotions:[]}},computed:{isFormValid(){return this.newRecord.automaticThought.trim()&&this.newRecord.intensity>0},recentThoughts(){return this.$store.state.thoughtRecords.slice(0,3)}},methods:{getEmotionEmoji(t){const e={ç„¦è™‘:"ðŸ˜°",æ²®ä¸§:"ðŸ˜”",æ„¤æ€’:"ðŸ˜ ",æ‚²ä¼¤:"ðŸ˜¢",ç¾žæ„§:"ðŸ˜³",å…´å¥‹:"ðŸ˜ƒ",å¹³é™:"ðŸ˜Œ",ææƒ§:"ðŸ˜¨",å¤±è½:"ðŸ˜ž",æ‹…å¿§:"ðŸ˜Ÿ"};return e[t]||"ðŸ˜¶"},toggleEmotion(t){const e=this.newRecord.emotions.indexOf(t);-1===e?this.newRecord.emotions.push(t):this.newRecord.emotions.splice(e,1)},addCustomEmotion(){const t=this.currentEmotion.trim();t&&!this.customEmotions.includes(t)&&(this.customEmotions.push(t),this.currentEmotion="")},removeCustomEmotion(t){this.customEmotions.splice(t,1)},saveRecord(){const t={...this.newRecord,timestamp:(new Date).toISOString(),emotions:[...this.newRecord.emotions,...this.customEmotions]};this.$store.state.thoughtRecords.unshift(t),this.$store.saveState(),void 0!==this.$store.selectedRecordIndex&&(this.$store.selectedRecordIndex=0),this.showSuccess=!0,setTimeout((()=>{this.showSuccess=!1,this.resetForm()}),3e3)},resetForm(){this.newRecord={situation:"",automaticThought:"",emotions:[],customEmotion:"",intensity:50,timestamp:null},this.currentEmotion="",this.customEmotions=[]},formatDate(t){return t?new Date(t).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"æœªçŸ¥æ—¶é—´"},truncateText(t,e){return t?t.length>e?t.substring(0,e)+"...":t:""},goToAnalysis(t){this.$router.push("/analysis"),this.$store.selectedRecordIndex=t}}},mt=(0,L.A)(gt,[["render",ht],["__scopeId","data-v-f6bc2fd0"]]),pt=mt,kt={class:"analysis-container"},vt={class:"history-selector mb-4"},yt={class:"history-header"},bt=["value"],Lt={key:0,class:"history-manager"},ft={class:"history-manager-content"},Ct={class:"history-manager-header"},Rt={class:"history-manager-body"},Et={class:"history-list"},Tt={class:"history-item-content"},wt={class:"history-item-date"},St={class:"history-item-thought"},xt={class:"history-item-actions"},_t=["onClick"],Xt={key:0,class:"no-records"},$t={class:"history-manager-footer"},It={key:1,class:"card"},Bt={class:"analysis-section"},Mt={class:"thought-text"},Ft={key:0,class:"situation-box"},Dt={class:"situation-text"},Pt={class:"meta-info"},Qt={class:"date-tag"},Ot={class:"emotion-badges"},At={class:"analysis-section"},Nt={key:0,class:"bias-tags"},Jt=["onClick"],jt={class:"confidence"},Wt={key:1,class:"no-biases"},Gt={key:0},Kt={key:1,class:"bias-tips"},Vt={key:2},zt={key:2,class:"bias-evidence"},Ut={class:"evidence-header"},Ht={class:"evidence-text"},qt={class:"analysis-section"},Yt={class:"question-list"},Zt={key:0,class:"no-questions"},te={class:"analysis-section"},ee={key:0,class:"analysis-section"},se={class:"alternative-thought"},ae={class:"feedback-buttons"},oe={key:1,class:"action-buttons"},ne={key:2,class:"loading-container"},ie={class:"progress"},le={class:"loading-text"},re={key:0,class:"loading-tips"},ce={key:3,class:"api-error alert alert-danger"},de={class:"mt-2"},ue={key:2,class:"alert alert-warning"};function he(t,e,s,o,n,i){const r=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",kt,[e[23]||(e[23]=(0,l.Lk)("h2",{class:"section-title"},"ðŸ” è®¤çŸ¥åˆ†æž",-1)),(0,l.Lk)("div",vt,[(0,l.Lk)("div",yt,[e[11]||(e[11]=(0,l.Lk)("label",{for:"recordSelect"},"é€‰æ‹©è®°å½•:",-1)),(0,l.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e[0]||(e[0]=t=>n.showHistoryManager=!0)},e[10]||(e[10]=[(0,l.Lk)("span",{class:"btn-icon"},"ðŸ“‹",-1),(0,l.eW)(" ç®¡ç†åŽ†å²è®°å½• ")]))]),(0,l.bo)((0,l.Lk)("select",{id:"recordSelect",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>n.selectedRecordIndex=t),onChange:e[2]||(e[2]=(...t)=>i.loadSelectedRecord&&i.loadSelectedRecord(...t))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.$store.state.thoughtRecords,((t,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,c.v_)(i.formatTimestamp(t.timestamp))+" - "+(0,c.v_)(i.truncateText(t.automaticThought,30)),9,bt)))),128))],544),[[a.u1,n.selectedRecordIndex]])]),n.showHistoryManager?((0,l.uX)(),(0,l.CE)("div",Lt,[(0,l.Lk)("div",ft,[(0,l.Lk)("div",Ct,[e[12]||(e[12]=(0,l.Lk)("h3",null,"ç®¡ç†åŽ†å²è®°å½•",-1)),(0,l.Lk)("button",{class:"btn-close",onClick:e[3]||(e[3]=t=>n.showHistoryManager=!1)},"Ã—")]),(0,l.Lk)("div",Rt,[(0,l.Lk)("div",Et,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.$store.state.thoughtRecords,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"history-item"},[(0,l.Lk)("div",Tt,[(0,l.Lk)("div",wt,(0,c.v_)(i.formatTimestamp(t.timestamp)),1),(0,l.Lk)("div",St,(0,c.v_)(i.truncateText(t.automaticThought,60)),1),(0,l.Lk)("div",{class:(0,c.C4)(["history-item-status",i.getRecordStatusClass(t)])},(0,c.v_)(i.getRecordStatus(t)),3)]),(0,l.Lk)("div",xt,[(0,l.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>i.deleteRecord(e),title:"åˆ é™¤è®°å½•"}," ðŸ—‘ï¸ ",8,_t)])])))),128)),0===t.$store.state.thoughtRecords.length?((0,l.uX)(),(0,l.CE)("div",Xt," æš‚æ— åŽ†å²è®°å½• ")):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",$t,[(0,l.Lk)("button",{class:"btn btn-outline-secondary",onClick:e[4]||(e[4]=t=>n.showHistoryManager=!1)},"å…³é—­")])])])):(0,l.Q3)("",!0),n.currentRecord?((0,l.uX)(),(0,l.CE)("div",It,[(0,l.Lk)("div",Bt,[e[14]||(e[14]=(0,l.Lk)("h5",null,"ðŸ“Œ ä½ çš„è‡ªåŠ¨æ€ç»´",-1)),(0,l.Lk)("p",Mt,'"'+(0,c.v_)(n.currentRecord.automaticThought)+'"',1),n.currentRecord.situation?((0,l.uX)(),(0,l.CE)("div",Ft,[e[13]||(e[13]=(0,l.Lk)("h6",null,"ðŸ” æƒ…å¢ƒæè¿°",-1)),(0,l.Lk)("p",Dt,(0,c.v_)(n.currentRecord.situation),1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",Pt,[(0,l.Lk)("span",Qt,(0,c.v_)(i.formatTimestamp(n.currentRecord.timestamp)),1),(0,l.Lk)("div",Ot,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.currentRecord.emotions,((t,e)=>((0,l.uX)(),(0,l.CE)("span",{key:e,class:"emotion-badge"},(0,c.v_)(t),1)))),128))])])]),(0,l.Lk)("div",At,[e[16]||(e[16]=(0,l.Lk)("h5",null,"ðŸ§  è¯†åˆ«åˆ°çš„è®¤çŸ¥åå·®",-1)),n.analysisResult.cognitiveBiases&&n.analysisResult.cognitiveBiases.length>0?((0,l.uX)(),(0,l.CE)("div",Nt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.analysisResult.cognitiveBiases,(t=>((0,l.uX)(),(0,l.CE)("span",{class:"badge badge-pill",key:t.type,style:(0,c.Tr)({backgroundColor:i.getBiasColor(t.type)}),onClick:e=>i.selectBias(t)},[(0,l.eW)((0,c.v_)(t.type)+" ",1),(0,l.Lk)("span",jt,"("+(0,c.v_)(t.confidence)+"%)",1)],12,Jt)))),128))])):((0,l.uX)(),(0,l.CE)("div",Wt,[n.analyzedOnce?((0,l.uX)(),(0,l.CE)("p",Gt,"ç³»ç»Ÿæœªæ£€æµ‹åˆ°æ˜Žæ˜¾çš„è®¤çŸ¥åå·®ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ€ç»´å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ è¯·ç»§ç»­æµè§ˆä¸‹æ–¹çš„å¼•å¯¼æ€§é—®é¢˜ï¼Œæ€è€ƒè‡ªå·±çš„æƒ³æ³•æ˜¯å¦å­˜åœ¨è¿™äº›æƒ…å†µï¼š")):(0,l.Q3)("",!0),n.analyzedOnce?((0,l.uX)(),(0,l.CE)("ul",Kt,e[15]||(e[15]=[(0,l.Lk)("li",null,"ä½ æ˜¯å¦åœ¨è€ƒè™‘æœ€ç³Ÿç³•çš„å¯èƒ½æ€§ï¼Ÿ",-1),(0,l.Lk)("li",null,'ä½ æ˜¯å¦åœ¨ç”¨"éžé»‘å³ç™½"çš„æ–¹å¼çœ‹å¾…æƒ…å†µï¼Ÿ',-1),(0,l.Lk)("li",null,"ä½ æ˜¯å¦ä»Žå•ä¸€äº‹ä»¶å¾—å‡ºäº†æ™®éæ€§ç»“è®ºï¼Ÿ",-1),(0,l.Lk)("li",null,"ä½ æ˜¯å¦ç”¨æƒ…ç»ªè€Œéžäº‹å®žåœ¨åšåˆ¤æ–­ï¼Ÿ",-1),(0,l.Lk)("li",null,"ä½ æ˜¯å¦ç»™è‡ªå·±æˆ–ä»–äººè®¾ç½®äº†è¿‡é«˜æ ‡å‡†ï¼Ÿ",-1)]))):((0,l.uX)(),(0,l.CE)("p",Vt,'æš‚æœªè¯†åˆ«åˆ°è®¤çŸ¥åå·®ï¼Œè¯·ç‚¹å‡»"å¼€å§‹åˆ†æž"è¿›è¡Œåˆ†æžã€‚'))])),n.selectedBias?((0,l.uX)(),(0,l.CE)("div",zt,[(0,l.Lk)("div",Ut,[(0,l.Lk)("h6",null,(0,c.v_)(n.selectedBias.type)+" çš„è¯†åˆ«ä¾æ®ï¼š",1)]),(0,l.Lk)("p",Ht,(0,c.v_)(n.selectedBias.evidence),1)])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",qt,[e[17]||(e[17]=(0,l.Lk)("h5",null,"ðŸ’¡ å¼•å¯¼æ€§é—®é¢˜",-1)),(0,l.Lk)("ul",Yt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.analysisResult.guidingQuestions,((t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,c.v_)(t),1)))),128))]),n.analysisResult.guidingQuestions&&0!==n.analysisResult.guidingQuestions.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",Zt,' æš‚æ— å¼•å¯¼æ€§é—®é¢˜ï¼Œè¯·ç‚¹å‡»"å¼€å§‹åˆ†æž"ç”Ÿæˆé—®é¢˜ã€‚ '))]),(0,l.Lk)("div",te,[e[18]||(e[18]=(0,l.Lk)("h5",null,"ðŸ“ ä½ çš„æ€è€ƒè®°å½•",-1)),(0,l.bo)((0,l.Lk)("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":e[5]||(e[5]=t=>n.userResponse=t),placeholder:"è¯·å†™ä¸‹ä½ å¯¹è¿™äº›é—®é¢˜çš„æ€è€ƒ..."},null,512),[[a.Jo,n.userResponse]])]),n.alternativeThought?((0,l.uX)(),(0,l.CE)("div",ee,[e[19]||(e[19]=(0,l.Lk)("h5",null,"ðŸŒˆ å»ºè®®çš„æ›¿ä»£æƒ³æ³•",-1)),(0,l.Lk)("p",se,'"'+(0,c.v_)(n.alternativeThought)+'"',1),(0,l.Lk)("div",ae,[(0,l.Lk)("button",{class:"btn btn-success mr-2",onClick:e[6]||(e[6]=(...t)=>i.saveAlternativeThought&&i.saveAlternativeThought(...t))}," ðŸ‘ ä¿å­˜è¿™ä¸ªæƒ³æ³• "),(0,l.Lk)("button",{class:"btn btn-outline-secondary",onClick:e[7]||(e[7]=(...t)=>i.generateAlternativeThought&&i.generateAlternativeThought(...t))}," ðŸ”„ é‡æ–°ç”Ÿæˆ ")])])):(0,l.Q3)("",!0),n.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",oe,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:e[8]||(e[8]=(...t)=>i.analyzeThought&&i.analyzeThought(...t))},e[20]||(e[20]=[(0,l.Lk)("span",{class:"icon"},"ðŸ§ ",-1),(0,l.eW)(" å¼€å§‹åˆ†æž ")]))])),n.isLoading?((0,l.uX)(),(0,l.CE)("div",ne,[(0,l.Lk)("div",ie,[(0,l.Lk)("div",{class:(0,c.C4)(["progress-bar",{"progress-bar-animated":n.isLoading}]),style:(0,c.Tr)({width:`${n.loadingProgress}%`})},(0,c.v_)(n.loadingStage),7)]),(0,l.Lk)("p",le,(0,c.v_)(n.loadingStage)+" ("+(0,c.v_)(n.loadingProgress)+"%)",1),n.loadingTip?((0,l.uX)(),(0,l.CE)("p",re,(0,c.v_)(n.loadingTip),1)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),n.apiError?((0,l.uX)(),(0,l.CE)("div",ce,[e[22]||(e[22]=(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"åˆ†æžè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯")],-1)),(0,l.Lk)("p",null,(0,c.v_)(n.apiError),1),(0,l.Lk)("p",de,[(0,l.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:e[9]||(e[9]=t=>n.apiError=null)},"å…³é—­"),(0,l.bF)(r,{to:"/config",class:"btn btn-sm btn-primary ml-2"},{default:(0,l.k6)((()=>e[21]||(e[21]=[(0,l.eW)("æ£€æŸ¥APIè®¾ç½®")]))),_:1})])])):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.CE)("div",ue," âš ï¸ è¯·å…ˆå®Œæˆè‡³å°‘ä¸€æ¡æ€æƒ³è®°å½• "))])}var ge=s(335);const me={data(){return{selectedRecordIndex:0,currentRecord:null,analysisResult:{cognitiveBiases:[],guidingQuestions:[]},userResponse:"",alternativeThought:"",isLoading:!1,loadingProgress:0,loadingStage:"å‡†å¤‡åˆ†æž",loadingTip:"",apiError:null,showHistoryManager:!1,selectedBias:null,analyzedOnce:!1,loadingTips:["è®¤çŸ¥åå·®æ˜¯æˆ‘ä»¬æ€ç»´ä¸­çš„ç›²ç‚¹ï¼Œè¯†åˆ«å®ƒä»¬æ˜¯æ²»ç–—çš„ç¬¬ä¸€æ­¥...","è‹æ ¼æ‹‰åº•å¼æé—®å¸®åŠ©æˆ‘ä»¬æŒ‘æˆ˜è‡ªå·±çš„æƒ³æ³•ï¼Œä¿ƒè¿›æ›´æ·±å…¥çš„æ€è€ƒ...","æ›¿ä»£æ€§æ€ç»´ä¸æ˜¯ç®€å•åœ°ç§¯æžæ€è€ƒï¼Œè€Œæ˜¯å¯»æ‰¾æ›´å¹³è¡¡çš„è§†è§’...","è®¤çŸ¥è¡Œä¸ºç–—æ³•å¼ºè°ƒæ€ç»´ã€æƒ…ç»ªå’Œè¡Œä¸ºä¹‹é—´çš„è”ç³»...","æ”¹å˜æƒ³æ³•ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦æŒç»­çš„ç»ƒä¹ å’Œè€å¿ƒ..."]}},computed:{apiConfig(){return this.$store.state.apiConfig}},mounted(){void 0!==this.$store.selectedRecordIndex?(this.selectedRecordIndex=this.$store.selectedRecordIndex,this.$store.selectedRecordIndex=void 0):this.$store.state.thoughtRecords.length>0&&(this.selectedRecordIndex=0),this.loadSelectedRecord()},methods:{formatTimestamp(t){return t?new Date(t).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"æœªçŸ¥æ—¶é—´"},truncateText(t,e){return t?t.length>e?t.substring(0,e)+"...":t:""},loadSelectedRecord(){if(0===this.$store.state.thoughtRecords.length)return void(this.currentRecord=null);const t=this.$store.state.thoughtRecords[this.selectedRecordIndex];this.currentRecord=t,t.analysisResult?this.analysisResult=t.analysisResult:this.analysisResult={cognitiveBiases:[],guidingQuestions:[]},t.userResponse?this.userResponse=t.userResponse:this.userResponse="",this.alternativeThought=t.alternativeThought||"",this.selectedBias=null},getBiasColor(t){const e={ç¾éš¾åŒ–:"#ff6b6b",éžé»‘å³ç™½:"#4ecdc4",è¿‡åº¦æ¦‚æ‹¬:"#45b7d1",æƒ…ç»ªæŽ¨ç†:"#96ceb4",åº”è¯¥é™ˆè¿°:"#ffeead",å¿ƒç†è¿‡æ»¤:"#ffb347",ä¸ªäººåŒ–:"#c06c84",æŽ§åˆ¶è°¬è¯¯:"#7579e7",è´´æ ‡ç­¾:"#84b1ed",è¯»å¿ƒæœ¯:"#d183c9"};return e[t]||"#6c757d"},selectBias(t){this.selectedBias===t?this.selectedBias=null:this.selectedBias=t},getRecordStatus(t){return t.alternativeThought?"å·²å®Œæˆåˆ†æž":t.analysisResult&&t.analysisResult.cognitiveBiases?"åˆ†æžè¿›è¡Œä¸­":"å¾…åˆ†æž"},getRecordStatusClass(t){return t.alternativeThought?"status-completed":t.analysisResult&&t.analysisResult.cognitiveBiases?"status-progress":"status-pending"},deleteRecord(t){confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿåˆ é™¤åŽæ— æ³•æ¢å¤ã€‚")&&(this.$store.state.thoughtRecords.splice(t,1),this.$store.saveState(),this.selectedRecordIndex===t?(this.selectedRecordIndex=0,this.loadSelectedRecord()):this.selectedRecordIndex>t&&this.selectedRecordIndex--)},async analyzeThought(){this.isLoading=!0,this.loadingProgress=0,this.loadingStage="åˆå§‹åŒ–åˆ†æž",this.apiError=null,this.loadingTip=this.getRandomTip();try{this.loadingStage="è¯†åˆ«è®¤çŸ¥åå·®",this.loadingProgress=25,this.loadingTip=this.getRandomTip();const t=await this.callLLM(this.getBiasPrompt());this.analysisResult.cognitiveBiases=this.parseBiasResponse(t),this.analyzedOnce=!0,this.loadingStage="ç”Ÿæˆå¼•å¯¼é—®é¢˜",this.loadingProgress=50,this.loadingTip=this.getRandomTip();const e=await this.callLLM(this.getQuestionPrompt());this.analysisResult.guidingQuestions=this.parseQuestionResponse(e),this.$store.state.thoughtRecords[this.selectedRecordIndex].userResponse=this.userResponse,this.$store.state.thoughtRecords[this.selectedRecordIndex].analysisResult=this.analysisResult,this.$store.saveState(),this.loadingStage="ç”Ÿæˆæ›¿ä»£æƒ³æ³•",this.loadingProgress=75,this.loadingTip=this.getRandomTip(),await this.generateAlternativeThought()}catch(t){console.error("åˆ†æžå¤±è´¥:",t),this.apiError=t.message||"åˆ†æžè¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·é‡è¯•"}finally{this.loadingProgress=100,this.loadingStage="åˆ†æžå®Œæˆ",this.loadingTip=null,setTimeout((()=>{this.isLoading=!1}),500)}},async generateAlternativeThought(){this.isLoading||(this.isLoading=!0,this.loadingProgress=0,this.loadingStage="ç”Ÿæˆæ›¿ä»£æƒ³æ³•");try{this.loadingProgress=50;const t=await this.callLLM(this.getAlternativeThoughtPrompt());this.alternativeThought=t.choices[0].message.content,this.loadingProgress=100}catch(t){console.error("ç”Ÿæˆæ›¿ä»£æƒ³æ³•å¤±è´¥:",t)}finally{setTimeout((()=>{this.isLoading=!1}),500)}},async callLLM(t){try{const e={"Content-Type":"application/json"},s="/api/llm-proxy",a={prompt:t};console.log(`æ­£åœ¨è°ƒç”¨ä»£ç†æœåŠ¡: ${s}`);const o=await ge.A.post(s,a,{headers:e,timeout:45e3});return o.data}catch(e){if(console.error("è°ƒç”¨ä»£ç†æœåŠ¡å¤±è´¥:",e),e.response){console.error("ä»£ç†æœåŠ¡å“åº”:",e.response.data);const t=e.response.data?.error||(e.response.data?.details?`ä»£ç†é”™è¯¯: ${e.response.data.details}`:`ä»£ç†æœåŠ¡è¿”å›žé”™è¯¯: ${e.response.status}`);throw new Error(t)}throw e.request?new Error("æœªæ”¶åˆ°ä»£ç†æœåŠ¡å“åº”ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥æˆ–ç¨åŽé‡è¯•"):new Error(`è¯·æ±‚é…ç½®é”™è¯¯: ${e.message}`)}},getBiasPrompt(){let t="è¯·ä½œä¸ºä¸€åä¸“ä¸šçš„è®¤çŸ¥è¡Œä¸ºæ²»ç–—å¸ˆï¼Œä»”ç»†åˆ†æžä»¥ä¸‹å†…å®¹ä¸­å¯èƒ½å­˜åœ¨çš„è®¤çŸ¥åå·®ã€‚\n  \nè®¤çŸ¥åå·®æ˜¯äººä»¬åœ¨æ€è€ƒè¿‡ç¨‹ä¸­å‡ºçŽ°çš„ç³»ç»Ÿæ€§é”™è¯¯æˆ–æ¨¡å¼ï¼Œå¾€å¾€å¯¼è‡´éžç†æ€§åˆ¤æ–­å’Œå†³ç­–ã€‚";return this.currentRecord.situation&&(t+=`\n\næƒ…å¢ƒæè¿°ï¼š${this.currentRecord.situation}`),t+=`\n\nè‡ªåŠ¨æ€ç»´ï¼š"${this.currentRecord.automaticThought}"`,this.currentRecord.emotions&&this.currentRecord.emotions.length>0&&(t+=`\n\nä¼´éšæƒ…ç»ªï¼š${this.currentRecord.emotions.join("ã€")}ï¼ˆå¼ºåº¦ï¼š${this.currentRecord.intensity}%ï¼‰`),t+='\n\nè¯·è¯†åˆ«å‡ºä¸Šè¿°å†…å®¹ä¸­å­˜åœ¨çš„è®¤çŸ¥åå·®ï¼Œå¹¶ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›žï¼ˆä¸è¦æœ‰ä»»ä½•é¢å¤–æ–‡å­—ï¼‰ï¼š\n{\n  "biases": [\n    {\n      "type": "åå·®ç±»åž‹åç§°",\n      "confidence": ç½®ä¿¡åº¦ç™¾åˆ†æ¯”ï¼ˆä¾‹å¦‚85ï¼Œä¸è¦å¸¦%ç¬¦å·ï¼‰,\n      "evidence": "è¯¦ç»†è¯´æ˜Žä¸ºä»€ä¹ˆè¿™å±žäºŽè¯¥ç§åå·®çš„æ–‡æœ¬ä¾æ®"\n    }\n  ]\n}\n\nå¸¸è§çš„è®¤çŸ¥åå·®ç±»åž‹åŒ…æ‹¬ï¼š\n1. ç¾éš¾åŒ–ï¼šè¿‡åˆ†å¤¸å¤§è´Ÿé¢äº‹ä»¶çš„åŽæžœ\n2. éžé»‘å³ç™½ï¼šå°†äº‹ç‰©ç®€åŒ–ä¸ºä¸¤ä¸ªæžç«¯ç±»åˆ«\n3. è¿‡åº¦æ¦‚æ‹¬ï¼šä»Žå•ä¸€äº‹ä»¶ä¸­å¾—å‡ºæ™®éç»“è®º\n4. æƒ…ç»ªæŽ¨ç†ï¼šæ ¹æ®æƒ…ç»ªçŠ¶æ€è€Œéžå®¢è§‚äº‹å®žåšåˆ¤æ–­\n5. åº”è¯¥é™ˆè¿°ï¼šç”¨åˆšæ€§çš„è§„åˆ™è¦æ±‚è‡ªå·±æˆ–ä»–äºº\n6. å¿ƒç†è¿‡æ»¤ï¼šåªå…³æ³¨è´Ÿé¢ç»†èŠ‚è€Œå¿½è§†ç§¯æžæ–¹é¢\n7. ä¸ªäººåŒ–ï¼šä¸åˆç†åœ°å°†å¤–éƒ¨äº‹ä»¶å½’å› äºŽè‡ªå·±\n8. æŽ§åˆ¶è°¬è¯¯ï¼šè®¤ä¸ºåº”å½“èƒ½æŽ§åˆ¶æ‰€æœ‰äº‹æƒ…\n9. è´´æ ‡ç­¾ï¼šç”¨ç®€å•æ ‡ç­¾æ¦‚æ‹¬å¤æ‚æƒ…å†µ\n10. è¯»å¿ƒæœ¯ï¼šå‡è®¾çŸ¥é“ä»–äººçš„æƒ³æ³•æˆ–æ„Ÿå—\n\nå¦‚æžœæ²¡æœ‰å‘çŽ°æ˜Žæ˜¾çš„è®¤çŸ¥åå·®ï¼Œè¯·è¿”å›žç©ºæ•°ç»„ï¼š{"biases": []}',t},getQuestionPrompt(){let t="ä½œä¸ºä¸€åä¸“ä¸šçš„è®¤çŸ¥è¡Œä¸ºæ²»ç–—å¸ˆï¼Œè¯·é’ˆå¯¹ä»¥ä¸‹å†…å®¹è®¾è®¡3ä¸ªæœ‰æ•ˆçš„è‹æ ¼æ‹‰åº•å¼å¼•å¯¼é—®é¢˜ï¼Œå¸®åŠ©å½“äº‹äººè´¨ç–‘å’ŒæŒ‘æˆ˜è‡ªå·±çš„æ€ç»´æ¨¡å¼ã€‚";return this.currentRecord.situation&&(t+=`\n\næƒ…å¢ƒæè¿°ï¼š${this.currentRecord.situation}`),t+=`\n\nè‡ªåŠ¨æ€ç»´ï¼š"${this.currentRecord.automaticThought}"`,this.currentRecord.emotions&&this.currentRecord.emotions.length>0&&(t+=`\n\nä¼´éšæƒ…ç»ªï¼š${this.currentRecord.emotions.join("ã€")}`),this.analysisResult.cognitiveBiases&&this.analysisResult.cognitiveBiases.length>0&&(t+=`\n\nè¯†åˆ«åˆ°çš„è®¤çŸ¥åå·®ï¼š${this.analysisResult.cognitiveBiases.map((t=>t.type)).join("ã€")}`),t+='\n\nè¯·è®¾è®¡3ä¸ªå¼€æ”¾å¼çš„è‹æ ¼æ‹‰åº•å¼é—®é¢˜ï¼Œè¿™äº›é—®é¢˜åº”è¯¥ï¼š\n1. é¼“åŠ±æ·±åº¦æ€è€ƒè€Œéžç®€å•çš„æ˜¯/å¦å›žç­”\n2. å¸®åŠ©æŒ‘æˆ˜éžç†æ€§ä¿¡å¿µ\n3. å¼•å¯¼æŽ¢ç´¢æ›¿ä»£æ€§è§£é‡Š\n4. ä½¿ç”¨æ¸©å’Œè€Œå°Šé‡çš„è¯­æ°”\n5. é’ˆå¯¹å½“äº‹äººçš„å…·ä½“æƒ…å†µè€Œéžæ³›æ³›è€Œè°ˆ\n\nè¯·åªè¿”å›žé—®é¢˜æœ¬èº«çš„JSONæ•°ç»„æ ¼å¼ï¼ˆä¸è¦æœ‰ä»»ä½•é¢å¤–è¯´æ˜Žï¼‰ï¼š\n["é—®é¢˜1", "é—®é¢˜2", "é—®é¢˜3"]',t},getAlternativeThoughtPrompt(){let t="ä½œä¸ºä¸€åè®¤çŸ¥è¡Œä¸ºæ²»ç–—å¸ˆï¼Œè¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä¸ªæ›´åŠ å¹³è¡¡ã€ç†æ€§çš„æ›¿ä»£æ€ç»´ã€‚";return this.currentRecord.situation&&(t+=`\n\næƒ…å¢ƒæè¿°ï¼š${this.currentRecord.situation}`),t+=`\n\nåŽŸå§‹è‡ªåŠ¨æ€ç»´ï¼š"${this.currentRecord.automaticThought}"`,this.currentRecord.emotions&&this.currentRecord.emotions.length>0&&(t+=`\n\nä¼´éšæƒ…ç»ªï¼š${this.currentRecord.emotions.join("ã€")}`),this.analysisResult.cognitiveBiases&&this.analysisResult.cognitiveBiases.length>0&&(t+=`\n\nè¯†åˆ«åˆ°çš„è®¤çŸ¥åå·®ï¼š${this.analysisResult.cognitiveBiases.map((t=>t.type)).join("ã€")}`),t+=`\n\nç”¨æˆ·å¯¹å¼•å¯¼é—®é¢˜çš„æ€è€ƒï¼š${this.userResponse||"(ç”¨æˆ·å°šæœªå¡«å†™)"}`,t+="\n\nè¯·ç”Ÿæˆä¸€ä¸ªæ›´åŠ å¹³è¡¡å’Œç†æ€§çš„æ›¿ä»£æ€ç»´ï¼Œåº”è¯¥ï¼š\n1. ç”¨ç¬¬ä¸€äººç§°è¡¨è¾¾ï¼Œå°±åƒå½“äº‹äººè‡ªå·±åœ¨è¯´è¯\n2. ä½¿ç”¨å£è¯­åŒ–ã€è‡ªç„¶çš„ä¸­æ–‡è¡¨è¾¾\n3. ä¿æŒæ¸©æš–ã€æ”¯æŒå’Œé¼“åŠ±çš„è¯­æ°”\n4. æ‰¿è®¤äº‹å®žï¼Œä½†æä¾›æ›´åŠ å¹³è¡¡å’Œæœ‰å»ºè®¾æ€§çš„è§†è§’\n5. é•¿åº¦é€‚ä¸­ï¼Œé€šå¸¸ä¸º2-4å¥è¯\n\nè¯·ç›´æŽ¥è¿”å›žæ›¿ä»£æ€ç»´å†…å®¹ï¼Œä¸è¦åŒ…å«ä»»ä½•é¢å¤–çš„è§£é‡Šæˆ–è¯´æ˜Žã€‚",t},parseBiasResponse(t){try{const a=t.choices[0].message.content;try{const t=JSON.parse(a);if(t&&t.biases)return t.biases}catch(e){console.error("è§£æžåå·®JSONå¤±è´¥:",e);const t=a.match(/\{[\s\S]*\}/);if(t)try{const e=JSON.parse(t[0]);if(e&&e.biases)return e.biases}catch(s){console.error("æå–JSONåŽè§£æžä»ç„¶å¤±è´¥:",s)}}return console.warn("æ— æ³•ä»ŽLLMå“åº”ä¸­è§£æžå‡ºè®¤çŸ¥åå·®æ•°æ®ï¼ŒåŽŸå§‹å“åº”:",a),[]}catch(a){return console.error("è§£æžåå·®å“åº”å¤±è´¥:",a),[]}},parseQuestionResponse(t){try{const a=t.choices[0].message.content;try{const t=JSON.parse(a);if(Array.isArray(t))return t}catch(e){console.error("è§£æžé—®é¢˜JSONå¤±è´¥:",e);const t=a.match(/\[[\s\S]*\]/);if(t)try{const e=JSON.parse(t[0]);if(Array.isArray(e))return e}catch(s){console.error("æå–æ•°ç»„åŽè§£æžä»ç„¶å¤±è´¥:",s)}}if(a.includes("\n")){const t=a.split("\n").filter((t=>t.trim()&&!t.startsWith("[")&&!t.startsWith("]")&&!t.startsWith("```")));if(t.length>0)return t.map((t=>t.replace(/^[0-9]+[\.\)]\s*/,"").trim())).filter((t=>t))}return console.warn("æ— æ³•ä»ŽLLMå“åº”ä¸­è§£æžå‡ºé—®é¢˜æ•°æ®ï¼ŒåŽŸå§‹å“åº”:",a),[]}catch(a){return console.error("è§£æžé—®é¢˜å“åº”å¤±è´¥:",a),[]}},saveAlternativeThought(){this.$store.state.thoughtRecords[this.selectedRecordIndex].alternativeThought=this.alternativeThought,this.$store.state.thoughtRecords[this.selectedRecordIndex].userResponse=this.userResponse,this.$store.saveState(),alert("æ›¿ä»£æƒ³æ³•å·²ä¿å­˜ï¼")},getRandomTip(){return this.loadingTips[Math.floor(Math.random()*this.loadingTips.length)]}}},pe=(0,L.A)(me,[["render",he],["__scopeId","data-v-d1a01a10"]]),ke=pe,ve={class:"dashboard fade-in-up"},ye={class:"welcome-header"},be={key:0,class:"last-record fade-in-scale"},Le={class:"dashboard-grid stats-section"},fe={class:"stat-card total-records breathing-light fade-in-scale",style:{"animation-delay":"0.1s"}},Ce={class:"stat-content"},Re={class:"stat-number gradient-text"},Ee={class:"stat-card analyzed-records breathing-light fade-in-scale",style:{"animation-delay":"0.2s"}},Te={class:"stat-content"},we={class:"stat-number gradient-text"},Se={class:"stat-card mood-trend breathing-light fade-in-scale",style:{"animation-delay":"0.3s"}},xe={class:"stat-content"},_e={class:"dashboard-grid actions-section"},Xe={class:"action-content"},$e={key:0,class:"action-desc"},Ie={key:1,class:"action-desc"},Be={key:0,class:"recent-records"},Me={class:"dashboard-grid records-section"},Fe=["onClick"],De={class:"record-header"},Pe={class:"record-date"},Qe={class:"record-emotions"},Oe={key:0,class:"emotion-more"},Ae={class:"record-thought"},Ne={class:"dashboard-grid charts-section"},Je={class:"chart-card emotion-stats"},je={class:"chart-card-header"},We={key:0,class:"stat-card-actions"},Ge={class:"emotion-count-badge"},Ke={key:0,class:"chart-content emotion-chart"},Ve={class:"chart-label"},ze={class:"emotion-emoji"},Ue={class:"emotion-name"},He={class:"chart-bar-container"},qe={class:"chart-value"},Ye={key:1,class:"no-data"},Ze={class:"chart-card bias-stats"},ts={class:"chart-card-header"},es={key:0,class:"stat-card-actions"},ss={class:"bias-count-badge"},as={key:0,class:"chart-content bias-chart"},os={class:"chart-label"},ns={class:"bias-name"},is={class:"chart-bar-container"},ls={class:"chart-value"},rs={key:1,class:"no-data"};function cs(t,e,s,a,o,n){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",ve,[(0,l.Lk)("header",ye,[e[0]||(e[0]=(0,l.Lk)("h1",{class:"gradient-text float-animation"},"âœ¨ æ¬¢è¿Žå›žæ¥ï¼Œå¿ƒç†å¥åº·ä¼™ä¼´ï¼",-1)),n.latestRecord?((0,l.uX)(),(0,l.CE)("p",be," ðŸ’« ä¸Šæ¬¡è®°å½•ï¼š"+(0,c.v_)(n.formatDate(n.latestRecord.timestamp)),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("section",Le,[(0,l.Lk)("div",fe,[e[2]||(e[2]=(0,l.Lk)("div",{class:"stat-icon pulse-animation"},"ðŸ“Š",-1)),(0,l.Lk)("div",Ce,[e[1]||(e[1]=(0,l.Lk)("h4",null,"å·²è®°å½•æ€æƒ³",-1)),(0,l.Lk)("div",Re,(0,c.v_)(t.$store.state.thoughtRecords.length),1)])]),(0,l.Lk)("div",Ee,[e[4]||(e[4]=(0,l.Lk)("div",{class:"stat-icon pulse-animation"},"ðŸ§ ",-1)),(0,l.Lk)("div",Te,[e[3]||(e[3]=(0,l.Lk)("h4",null,"å®Œæˆåˆ†æž",-1)),(0,l.Lk)("div",we,(0,c.v_)(n.analyzedRecordsCount),1)])]),(0,l.Lk)("div",Se,[e[6]||(e[6]=(0,l.Lk)("div",{class:"stat-icon pulse-animation"},"ðŸ˜Š",-1)),(0,l.Lk)("div",xe,[e[5]||(e[5]=(0,l.Lk)("h4",null,"æƒ…ç»ªè¶‹åŠ¿",-1)),(0,l.Lk)("div",{class:(0,c.C4)(["trend-indicator",n.moodTrend.class])},(0,c.v_)(n.moodTrend.label),3)])])]),(0,l.Lk)("section",_e,[(0,l.bF)(i,{to:"/record",class:"action-card new-record interactive-card fade-in-scale",style:{"animation-delay":"0.4s"}},{default:(0,l.k6)((()=>e[7]||(e[7]=[(0,l.Lk)("div",{class:"action-content"},[(0,l.Lk)("span",{class:"icon float-animation"},"âœï¸"),(0,l.Lk)("h3",null,"æ–°å»ºè®°å½•"),(0,l.Lk)("p",{class:"action-desc"},"è®°å½•ä½ çš„è‡ªåŠ¨æ€ç»´å’Œæƒ…ç»ªä½“éªŒ")],-1)]))),_:1}),(0,l.bF)(i,{to:"/analysis",class:(0,c.C4)(["action-card view-analysis interactive-card fade-in-scale",{disabled:!n.hasRecords}]),style:{"animation-delay":"0.5s"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Xe,[e[8]||(e[8]=(0,l.Lk)("span",{class:"icon float-animation"},"ðŸ”",-1)),e[9]||(e[9]=(0,l.Lk)("h3",null,"æŸ¥çœ‹åˆ†æž",-1)),n.hasRecords?((0,l.uX)(),(0,l.CE)("p",$e,(0,c.v_)(n.analysisSummary),1)):((0,l.uX)(),(0,l.CE)("p",Ie,"è¯·å…ˆè®°å½•ä½ çš„æƒ³æ³•"))])])),_:1},8,["class"])]),n.hasRecords?((0,l.uX)(),(0,l.CE)("section",Be,[e[10]||(e[10]=(0,l.Lk)("h2",{class:"section-title"},"ðŸ•’ æœ€è¿‘è®°å½•",-1)),(0,l.Lk)("div",Me,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.recentRecords,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"record-card interactive-card fade-in-scale",style:(0,c.Tr)({animationDelay:.6+.1*e+"s"}),onClick:t=>n.goToAnalysis(e)},[(0,l.Lk)("div",De,[(0,l.Lk)("div",Pe,(0,c.v_)(n.formatDate(t.timestamp)),1),(0,l.Lk)("div",Qe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.emotions.slice(0,2),((t,e)=>((0,l.uX)(),(0,l.CE)("span",{key:e,class:"emotion-tag"},(0,c.v_)(t),1)))),128)),t.emotions.length>2?((0,l.uX)(),(0,l.CE)("span",Oe,"+"+(0,c.v_)(t.emotions.length-2),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Ae,(0,c.v_)(n.truncateText(t.automaticThought,80)),1),(0,l.Lk)("div",{class:(0,c.C4)(["record-status",n.getRecordStatusClass(t)])},(0,c.v_)(n.getRecordStatus(t)),3)],12,Fe)))),128))])])):(0,l.Q3)("",!0),(0,l.Lk)("section",Ne,[(0,l.Lk)("div",Je,[(0,l.Lk)("div",je,[e[11]||(e[11]=(0,l.Lk)("h5",null,[(0,l.Lk)("span",{class:"stat-icon-small"},"ðŸ“Š"),(0,l.eW)(" æƒ…ç»ªåˆ†å¸ƒ")],-1)),n.hasRecords?((0,l.uX)(),(0,l.CE)("div",We,[(0,l.Lk)("div",Ge,(0,c.v_)(Object.keys(n.emotionDistribution).length)+"ç§æƒ…ç»ª",1)])):(0,l.Q3)("",!0)]),Object.keys(n.emotionDistribution).length>0?((0,l.uX)(),(0,l.CE)("div",Ke,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.sortedEmotions,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"chart-item"},[(0,l.Lk)("div",Ve,[(0,l.Lk)("span",ze,(0,c.v_)(n.getEmotionEmoji(e)),1),(0,l.Lk)("span",Ue,(0,c.v_)(e),1)]),(0,l.Lk)("div",He,[(0,l.Lk)("div",{class:"chart-bar",style:(0,c.Tr)({width:t/n.maxEmotionCount*100+"%"})},null,4),(0,l.Lk)("span",qe,(0,c.v_)(t),1)])])))),128))])):((0,l.uX)(),(0,l.CE)("div",Ye," æš‚æ— æƒ…ç»ªæ•°æ®ï¼Œè¯·è®°å½•ä½ çš„æƒ…ç»ªä½“éªŒ "))]),(0,l.Lk)("div",Ze,[(0,l.Lk)("div",ts,[e[12]||(e[12]=(0,l.Lk)("h5",null,[(0,l.Lk)("span",{class:"stat-icon-small"},"âš ï¸"),(0,l.eW)(" å¸¸è§è®¤çŸ¥åå·®")],-1)),n.topBiases.length>0?((0,l.uX)(),(0,l.CE)("div",es,[(0,l.Lk)("div",ss,"å…±"+(0,c.v_)(n.getBiasesTotal())+"æ¬¡",1)])):(0,l.Q3)("",!0)]),n.topBiases.length>0?((0,l.uX)(),(0,l.CE)("div",as,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.topBiases,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"chart-item"},[(0,l.Lk)("div",os,[(0,l.Lk)("span",{class:"bias-icon",style:(0,c.Tr)({backgroundColor:n.getBiasColor(t.type)})},null,4),(0,l.Lk)("span",ns,(0,c.v_)(t.type),1)]),(0,l.Lk)("div",is,[(0,l.Lk)("div",{class:"chart-bar bias-bar",style:(0,c.Tr)({width:t.count/n.maxBiasCount*100+"%",background:`linear-gradient(to right, ${n.getBiasColorLight(t.type)}, ${n.getBiasColor(t.type)})`})},null,4),(0,l.Lk)("span",ls,(0,c.v_)(t.count),1)])])))),128))])):((0,l.uX)(),(0,l.CE)("div",rs," æš‚æ— è®¤çŸ¥åå·®æ•°æ®ï¼Œè¯·å®Œæˆåˆ†æž "))])])])}const ds={computed:{latestRecord(){return this.$store.state.thoughtRecords[0]},hasRecords(){return this.$store.state.thoughtRecords.length>0},analysisSummary(){const t=this.$store.state.thoughtRecords.length;return t?`å·²æœ‰${t}æ¡è®°å½•`:"æš‚æ— è®°å½•"},recentRecords(){return this.$store.state.thoughtRecords.slice(0,3)},emotionDistribution(){const t=this.$store.state.thoughtRecords.flatMap((t=>t.emotions||[]));return t.reduce(((t,e)=>(t[e]=(t[e]||0)+1,t)),{})},maxEmotionCount(){return Math.max(...Object.values(this.emotionDistribution||{}),1)},topBiases(){const t=this.$store.state.thoughtRecords.flatMap((t=>(t.analysisResult||{}).cognitiveBiases||[])).map((t=>t.type));return Object.entries(t.reduce(((t,e)=>(t[e]=(t[e]||0)+1,t)),{})).sort(((t,e)=>e[1]-t[1])).slice(0,5).map((([t,e])=>({type:t,count:e})))},maxBiasCount(){return this.topBiases.length>0?Math.max(...this.topBiases.map((t=>t.count)),1):1},analyzedRecordsCount(){return this.$store.state.thoughtRecords.filter((t=>t.alternativeThought)).length},moodTrend(){const t=this.$store.state.thoughtRecords.slice(0,5);if(t.length<2)return{label:"æ•°æ®ä¸è¶³",class:"neutral"};const e=t.slice(0,Math.ceil(t.length/2)).reduce(((t,e)=>t+(e.intensity||50)),0)/Math.ceil(t.length/2),s=t.slice(Math.ceil(t.length/2)).reduce(((t,e)=>t+(e.intensity||50)),0)/Math.floor(t.length/2),a=e-s;return a<-5?{label:"å‘å¥½å‘å±•",class:"positive"}:a>5?{label:"ç•¥æœ‰æ³¢åŠ¨",class:"negative"}:{label:"ä¿æŒç¨³å®š",class:"neutral"}},sortedEmotions(){return Object.entries(this.emotionDistribution).sort(((t,e)=>e[1]-t[1])).reduce(((t,[e,s])=>(t[e]=s,t)),{})}},methods:{formatDate(t){return t?new Date(t).toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"æœªçŸ¥æ—¶é—´"},truncateText(t,e){return t?t.length>e?t.slice(0,e)+"...":t:""},getRecordStatus(t){return t.alternativeThought?"å·²å®Œæˆåˆ†æž":t.analysisResult&&(t.analysisResult.cognitiveBiases&&t.analysisResult.cognitiveBiases.length>0||t.analysisResult.guidingQuestions&&t.analysisResult.guidingQuestions.length>0)?"åˆ†æžè¿›è¡Œä¸­":"å¾…åˆ†æž"},getRecordStatusClass(t){return t.alternativeThought?"status-completed":t.analysisResult&&(t.analysisResult.cognitiveBiases&&t.analysisResult.cognitiveBiases.length>0||t.analysisResult.guidingQuestions&&t.analysisResult.guidingQuestions.length>0)?"status-progress":"status-pending"},goToAnalysis(t){this.$router.push("/analysis"),this.$store.selectedRecordIndex=t},getEmotionEmoji(t){const e={ç„¦è™‘:"ðŸ˜°",æ²®ä¸§:"ðŸ˜”",æ„¤æ€’:"ðŸ˜ ",æ‚²ä¼¤:"ðŸ˜¢",ç¾žæ„§:"ðŸ˜³",å…´å¥‹:"ðŸ˜ƒ",å¹³é™:"ðŸ˜Œ",ææƒ§:"ðŸ˜¨",å¤±è½:"ðŸ˜ž",æ‹…å¿§:"ðŸ˜Ÿ",è‡ªè´£:"ðŸ˜“",å›°æƒ‘:"ðŸ¤”",æ— åŠ©:"ðŸ¥º"};return e[t]||"ðŸ˜¶"},getBiasColor(t){const e={ç¾éš¾åŒ–:"#ff6b6b",éžé»‘å³ç™½:"#4ecdc4",è¿‡åº¦æ¦‚æ‹¬:"#45b7d1",æƒ…ç»ªæŽ¨ç†:"#96ceb4",åº”è¯¥é™ˆè¿°:"#ffeead",å¿ƒç†è¿‡æ»¤:"#ffb347",ä¸ªäººåŒ–:"#c06c84",æŽ§åˆ¶è°¬è¯¯:"#7579e7",è´´æ ‡ç­¾:"#84b1ed",è¯»å¿ƒæœ¯:"#d183c9"};return e[t]||"#6c757d"},getBiasColorLight(t){const e=this.getBiasColor(t);return e.replace(")",", 0.3)").replace("rgb","rgba")},getBiasesTotal(){return this.topBiases.reduce(((t,e)=>t+e.count),0)}}},us=(0,L.A)(ds,[["render",cs],["__scopeId","data-v-e34593fa"]]),hs=us,gs={class:"thought-garden-final"},ms={class:"game-container"},ps={key:0,class:"start-screen"},ks={class:"welcome-card"},vs={key:1,class:"main-game-area"},ys={class:"plant-display-zone"},bs={class:"particle-effects"},Ls={key:0,class:"growth-sparkles"},fs={key:1,class:"pollen-effects"},Cs={class:"plant-images"},Rs=["src"],Es=["src"],Ts={class:"plant-status-hint"},ws={key:0,class:"status-text"},Ss={class:"interaction-zone"},xs={key:0,class:"input-card"},_s={class:"card-content"},Xs={class:"input-actions"},$s=["disabled"],Is={key:1,class:"input-card"},Bs={class:"card-content"},Ms={class:"input-actions"},Fs=["disabled"],Ds={key:2,class:"input-card"},Ps={class:"card-content"},Qs={class:"input-actions"},Os=["disabled"],As={key:3,class:"input-card feeling-card"},Ns={class:"card-content"},Js={class:"emotion-grid"},js=["onClick"],Ws=["src","alt"],Gs={class:"emotion-label"},Ks={key:0,class:"intensity-section"},Vs={class:"intensity-label"},zs={class:"input-actions"},Us=["disabled"],Hs={key:4,class:"completion-card"},qs={class:"completion-content"},Ys={class:"completion-actions"},Zs={key:0,class:"gentle-guidance"},ta={class:"guidance-bubble"},ea={class:"garden-card-content",ref:"gardenCardContent"},sa={class:"card-header"},aa={class:"card-date"},oa={class:"card-flower-display"},na=["src"],ia={class:"card-journey-summary"},la={class:"journey-item"},ra={class:"journey-item"},ca={class:"journey-item"},da={class:"journey-item"},ua={class:"card-actions"};function ha(t,e,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",gs,[e[51]||(e[51]=(0,l.Lk)("div",{class:"garden-background"},[(0,l.Lk)("img",{src:"/assets/images/sky-gradient.png",alt:"",class:"sky-layer"}),(0,l.Lk)("img",{src:"/assets/images/soil-texture.png",alt:"",class:"soil-layer"})],-1)),(0,l.Lk)("div",ms,["start"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",ps,[(0,l.Lk)("div",ks,[e[26]||(e[26]=(0,l.Lk)("h1",{class:"garden-title"},"ðŸŒ± æ€ç»´èŠ±å›­",-1)),e[27]||(e[27]=(0,l.Lk)("p",{class:"garden-subtitle"},"è®©æˆ‘ä»¬ä¸€èµ·ç§ä¸‹ä¸€é¢—ç§å­ï¼Œçœ‹å®ƒå¦‚ä½•æˆé•¿...",-1)),(0,l.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.startJourney&&i.startJourney(...t)),class:"start-button"},e[25]||(e[25]=[(0,l.Lk)("img",{src:"/assets/images/seed.png",alt:"ç§å­",class:"button-icon"},null,-1),(0,l.eW)(" å¼€å§‹ç§æ¤ ")]))])])):((0,l.uX)(),(0,l.CE)("div",vs,[(0,l.Lk)("div",ys,[(0,l.Lk)("div",{class:"plant-container",onClick:e[1]||(e[1]=(...t)=>i.handlePlantInteraction&&i.handlePlantInteraction(...t))},[(0,l.Lk)("div",bs,[n.plantStage>=1?((0,l.uX)(),(0,l.CE)("div",Ls,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(8,(t=>(0,l.Lk)("div",{key:"growth-"+t,class:"growth-sparkle",style:(0,c.Tr)(i.getGrowthSparkleStyle(t))},null,4))),64))])):(0,l.Q3)("",!0),n.showPollen?((0,l.uX)(),(0,l.CE)("div",fs,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(15,(t=>(0,l.Lk)("div",{key:"pollen-"+t,class:"pollen-particle",style:(0,c.Tr)(i.getPollenStyle(t))},null,4))),64))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Cs,[(0,l.bF)(a.eB,{name:"plant-appear"},{default:(0,l.k6)((()=>[n.plantStage>=1?((0,l.uX)(),(0,l.CE)("img",{key:0,src:"/assets/images/seed.png",alt:"ç§å­",class:(0,c.C4)(["plant-stage seed-image",{"stage-active":1===n.plantStage}])},null,2)):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(a.eB,{name:"plant-grow"},{default:(0,l.k6)((()=>[n.plantStage>=2?((0,l.uX)(),(0,l.CE)("img",{key:0,src:"/assets/images/sprout-dark.png",alt:"æ·±è‰²å¹¼èŠ½",class:(0,c.C4)(["plant-stage sprout-dark-image",{"stage-active":2===n.plantStage,thorny:n.showThorns}])},null,2)):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(a.eB,{name:"plant-transform"},{default:(0,l.k6)((()=>[n.plantStage>=3?((0,l.uX)(),(0,l.CE)("img",{key:0,src:"/assets/images/sprout-healthy.png",alt:"å¥åº·å¹¼èŠ½",class:(0,c.C4)(["plant-stage sprout-healthy-image",{"stage-active":3===n.plantStage}])},null,2)):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(a.eB,{name:"plant-bud"},{default:(0,l.k6)((()=>[n.plantStage>=4&&!n.isFullyBloomed?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getFlowerBudImage(),alt:"èŠ±è‹ž",class:(0,c.C4)(["plant-stage flower-bud-image",{"stage-active":4===n.plantStage}])},null,10,Rs)):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(a.eB,{name:"flower-bloom"},{default:(0,l.k6)((()=>[n.isFullyBloomed?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getFlowerBloomImage(),alt:"ç››å¼€èŠ±æœµ",class:"plant-stage flower-bloom-image blooming"},null,8,Es)):(0,l.Q3)("",!0)])),_:1})]),(0,l.Lk)("div",Ts,[(0,l.bF)(a.eB,{name:"hint-fade"},{default:(0,l.k6)((()=>[i.currentHint?((0,l.uX)(),(0,l.CE)("p",ws,(0,c.v_)(i.currentHint),1)):(0,l.Q3)("",!0)])),_:1})])])]),(0,l.Lk)("div",Ss,["situation"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",xs,[e[30]||(e[30]=(0,l.Lk)("div",{class:"card-background"},[(0,l.Lk)("img",{src:"/assets/images/input-bg.png",alt:"",class:"bg-texture"})],-1)),(0,l.Lk)("div",_s,[e[28]||(e[28]=(0,l.Lk)("h3",{class:"input-title"},"ðŸŒ± å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ",-1)),e[29]||(e[29]=(0,l.Lk)("p",{class:"input-subtitle"},"æè¿°ä¸€ä¸‹è®©ä½ å›°æ‰°çš„æƒ…å†µï¼Œå°±åƒç§ä¸‹ä¸€é¢—ç§å­...",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>n.formData.situation=t),onInput:e[3]||(e[3]=(...t)=>i.handleSituationInput&&i.handleSituationInput(...t)),class:"game-input",placeholder:"ä»Šå¤©...",rows:"3"},"              ",544),[[a.Jo,n.formData.situation]]),(0,l.Lk)("div",Xs,[(0,l.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>i.proceedToNextStep&&i.proceedToNextStep(...t)),disabled:!i.canProceed,class:"proceed-btn"}," ç»§ç»­ â†’ ",8,$s)])])])):(0,l.Q3)("",!0),"thought"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",Is,[e[33]||(e[33]=(0,l.Lk)("div",{class:"card-background"},[(0,l.Lk)("img",{src:"/assets/images/input-bg.png",alt:"",class:"bg-texture"})],-1)),(0,l.Lk)("div",Bs,[e[31]||(e[31]=(0,l.Lk)("h3",{class:"input-title"},"ðŸŒ¿ ä½ çš„ç¬¬ä¸€ååº”æ˜¯ä»€ä¹ˆï¼Ÿ",-1)),e[32]||(e[32]=(0,l.Lk)("p",{class:"input-subtitle"},"é‚£ä¸ªçž¬é—´å†’å‡ºçš„æƒ³æ³•ï¼Œè®©å¹¼èŠ½ç ´åœŸè€Œå‡º...",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>n.formData.automaticThought=t),onInput:e[6]||(e[6]=(...t)=>i.handleThoughtInput&&i.handleThoughtInput(...t)),class:"game-input",placeholder:"æˆ‘è§‰å¾—...",rows:"3"},"              ",544),[[a.Jo,n.formData.automaticThought]]),(0,l.Lk)("div",Ms,[(0,l.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>i.goToPreviousStep&&i.goToPreviousStep(...t)),class:"back-btn"},"â† è¿”å›ž"),(0,l.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>i.proceedToNextStep&&i.proceedToNextStep(...t)),disabled:!i.canProceed,class:"proceed-btn"}," ç»§ç»­ â†’ ",8,Fs)])])])):(0,l.Q3)("",!0),"alternative"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",Ds,[e[36]||(e[36]=(0,l.Lk)("div",{class:"card-background"},[(0,l.Lk)("img",{src:"/assets/images/input-bg.png",alt:"",class:"bg-texture"})],-1)),(0,l.Lk)("div",Ps,[e[34]||(e[34]=(0,l.Lk)("h3",{class:"input-title"},"âœ¨ æœ‰æ²¡æœ‰å…¶ä»–è§’åº¦ï¼Ÿ",-1)),e[35]||(e[35]=(0,l.Lk)("p",{class:"input-subtitle"},"è¯•è¯•æ›´æ¸©å’Œã€æ›´å¹³è¡¡çš„è§†è§’ï¼Œè®©æ¤ç‰©å˜å¾—å¥åº·...",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>n.formData.alternativeThought=t),onInput:e[10]||(e[10]=(...t)=>i.handleAlternativeInput&&i.handleAlternativeInput(...t)),class:"game-input",placeholder:"ä¹Ÿè®¸...",rows:"3"},"              ",544),[[a.Jo,n.formData.alternativeThought]]),(0,l.Lk)("div",Qs,[(0,l.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>i.goToPreviousStep&&i.goToPreviousStep(...t)),class:"back-btn"},"â† è¿”å›ž"),(0,l.Lk)("button",{onClick:e[12]||(e[12]=(...t)=>i.proceedToNextStep&&i.proceedToNextStep(...t)),disabled:!i.canProceed,class:"proceed-btn"}," ç»§ç»­ â†’ ",8,Os)])])])):(0,l.Q3)("",!0),"feeling"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",As,[e[40]||(e[40]=(0,l.Lk)("div",{class:"card-background"},[(0,l.Lk)("img",{src:"/assets/images/input-bg.png",alt:"",class:"bg-texture"})],-1)),(0,l.Lk)("div",Ns,[e[38]||(e[38]=(0,l.Lk)("h3",{class:"input-title"},"ðŸŒ¸ çŽ°åœ¨æ„Ÿè§‰æ€Žä¹ˆæ ·ï¼Ÿ",-1)),e[39]||(e[39]=(0,l.Lk)("p",{class:"input-subtitle"},"é€‰æ‹©ä½ çš„æ„Ÿå—ï¼Œçœ‹èŠ±æœµå¦‚ä½•ç»½æ”¾...",-1)),(0,l.Lk)("div",Js,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.emotionOptions,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.name,onClick:e=>i.selectEmotion(t),class:(0,c.C4)(["emotion-option",{selected:n.selectedEmotion?.name===t.name}])},[(0,l.Lk)("img",{src:t.icon,alt:t.name,class:"emotion-icon"},null,8,Ws),(0,l.Lk)("span",Gs,(0,c.v_)(t.name),1)],10,js)))),128))]),n.selectedEmotion?((0,l.uX)(),(0,l.CE)("div",Ks,[(0,l.Lk)("label",Vs,"æ„Ÿå—å¼ºåº¦: "+(0,c.v_)(n.formData.intensity)+"%",1),(0,l.bo)((0,l.Lk)("input",{type:"range",min:"10",max:"100","onUpdate:modelValue":e[13]||(e[13]=t=>n.formData.intensity=t),onInput:e[14]||(e[14]=(...t)=>i.updateFlowerAppearance&&i.updateFlowerAppearance(...t)),class:"intensity-slider"},null,544),[[a.Jo,n.formData.intensity]]),e[37]||(e[37]=(0,l.Lk)("div",{class:"intensity-labels"},[(0,l.Lk)("span",null,"è½»å¾®"),(0,l.Lk)("span",null,"å¼ºçƒˆ")],-1))])):(0,l.Q3)("",!0),(0,l.Lk)("div",zs,[(0,l.Lk)("button",{onClick:e[15]||(e[15]=(...t)=>i.goToPreviousStep&&i.goToPreviousStep(...t)),class:"back-btn"},"â† è¿”å›ž"),(0,l.Lk)("button",{onClick:e[16]||(e[16]=(...t)=>i.completeJourney&&i.completeJourney(...t)),disabled:!n.selectedEmotion,class:"complete-btn"}," ðŸŒ¸ å®Œæˆæ ½åŸ¹ ",8,Us)])])])):(0,l.Q3)("",!0),"complete"===n.gameStage?((0,l.uX)(),(0,l.CE)("div",Hs,[e[43]||(e[43]=(0,l.Lk)("div",{class:"card-background"},[(0,l.Lk)("img",{src:"/assets/images/card-border.png",alt:"",class:"border-decoration"})],-1)),(0,l.Lk)("div",qs,[e[41]||(e[41]=(0,l.Lk)("h2",{class:"completion-title"},"ðŸŽ‰ ä½ çš„èŠ±æœµç»½æ”¾äº†ï¼",-1)),e[42]||(e[42]=(0,l.Lk)("p",{class:"completion-message"},"è¿™æœµç¾Žä¸½çš„èŠ±ä»£è¡¨äº†ä½ çš„å†…å¿ƒæˆé•¿",-1)),(0,l.Lk)("div",Ys,[(0,l.Lk)("button",{onClick:e[17]||(e[17]=(...t)=>i.generateGardenCard&&i.generateGardenCard(...t)),class:"action-btn primary"}," ðŸ“¸ ä¿å­˜èŠ±å›­å›¾é‰´ "),(0,l.Lk)("button",{onClick:e[18]||(e[18]=(...t)=>i.startNewJourney&&i.startNewJourney(...t)),class:"action-btn secondary"}," ðŸŒ± ç§æ¤æ–°èŠ±æœµ "),(0,l.Lk)("button",{onClick:e[19]||(e[19]=(...t)=>i.viewProgress&&i.viewProgress(...t)),class:"action-btn tertiary"}," ðŸ“Š æŸ¥çœ‹æˆé•¿è®°å½• ")])])])):(0,l.Q3)("",!0)]),n.showGuidance?((0,l.uX)(),(0,l.CE)("div",Zs,[(0,l.Lk)("div",ta,[(0,l.Lk)("p",null,(0,c.v_)(i.currentGuidance),1)])])):(0,l.Q3)("",!0)]))]),n.showGardenCard?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"card-modal",onClick:e[24]||(e[24]=(...t)=>i.closeGardenCard&&i.closeGardenCard(...t))},[(0,l.Lk)("div",{class:"garden-card-container",onClick:e[23]||(e[23]=(0,a.D$)((()=>{}),["stop"]))},[e[50]||(e[50]=(0,l.Lk)("div",{class:"card-border-decoration"},[(0,l.Lk)("img",{src:"/assets/images/card-border.png",alt:"",class:"border-frame"})],-1)),(0,l.Lk)("div",ea,[(0,l.Lk)("div",sa,[e[44]||(e[44]=(0,l.Lk)("h2",null,"ðŸŒ¸ æˆ‘çš„æ€ç»´èŠ±æœµ",-1)),(0,l.Lk)("span",aa,(0,c.v_)(i.formatDate(new Date)),1)]),(0,l.Lk)("div",oa,[(0,l.Lk)("img",{src:i.getFlowerBloomImage(),alt:"æˆ‘çš„èŠ±æœµ",class:"card-flower-image"},null,8,na)]),(0,l.Lk)("div",ia,[(0,l.Lk)("div",la,[e[45]||(e[45]=(0,l.Lk)("strong",null,"ðŸŒ± ç§ä¸‹çš„ç§å­:",-1)),(0,l.Lk)("p",null,(0,c.v_)(n.formData.situation||"ä¸€ä¸ªç‰¹åˆ«çš„æ—¶åˆ»"),1)]),(0,l.Lk)("div",ra,[e[46]||(e[46]=(0,l.Lk)("strong",null,"ðŸŒ¿ åˆå§‹çš„æƒ³æ³•:",-1)),(0,l.Lk)("p",null,(0,c.v_)(n.formData.automaticThought||"å†…å¿ƒçš„å£°éŸ³"),1)]),(0,l.Lk)("div",ca,[e[47]||(e[47]=(0,l.Lk)("strong",null,"âœ¨ æ–°çš„ç†è§£:",-1)),(0,l.Lk)("p",null,(0,c.v_)(n.formData.alternativeThought||"æ›´æ¸©å’Œçš„è§†è§’"),1)]),(0,l.Lk)("div",da,[e[48]||(e[48]=(0,l.Lk)("strong",null,"ðŸŒ¸ æœ€ç»ˆçš„æ„Ÿå—:",-1)),(0,l.Lk)("p",null,(0,c.v_)(n.selectedEmotion?.name||"å¹³é™")+" ("+(0,c.v_)(n.formData.intensity)+"%)",1)])]),e[49]||(e[49]=(0,l.Lk)("div",{class:"card-blessing"},[(0,l.Lk)("p",null,"ðŸ’ æ¯ä¸€æ¬¡æˆé•¿éƒ½å€¼å¾—è¢«è®°å½•å’Œçè—")],-1))],512),(0,l.Lk)("div",ua,[(0,l.Lk)("button",{onClick:e[20]||(e[20]=(...t)=>i.downloadGardenCard&&i.downloadGardenCard(...t)),class:"download-btn"}," ðŸ’¾ ä¿å­˜åˆ°ç›¸å†Œ "),(0,l.Lk)("button",{onClick:e[21]||(e[21]=(...t)=>i.shareGardenCard&&i.shareGardenCard(...t)),class:"share-btn"}," ðŸ“¤ åˆ†äº« "),(0,l.Lk)("button",{onClick:e[22]||(e[22]=(...t)=>i.closeGardenCard&&i.closeGardenCard(...t)),class:"close-btn"}," å…³é—­ ")])])])):(0,l.Q3)("",!0)])}const ga={name:"ThoughtGardenFinal",data(){return{gameStage:"start",plantStage:0,showThorns:!1,showPollen:!1,isFullyBloomed:!1,showGardenCard:!1,showGuidance:!0,selectedEmotion:null,formData:{situation:"",automaticThought:"",alternativeThought:"",intensity:70,timestamp:null},emotionOptions:[{name:"å¹³é™",icon:"/assets/images/emotion-calm.png",color:"#84A98C",flowerType:"blue"},{name:"æ„‰æ‚¦",icon:"/assets/images/emotion-happy.png",color:"#FFC857",flowerType:"yellow"},{name:"å¸Œæœ›",icon:"/assets/images/emotion-hope.png",color:"#FF9B85",flowerType:"red"},{name:"å®‰è¯¦",icon:"/assets/images/emotion-peaceful.png",color:"#CAD2C5",flowerType:"blue"}],guidanceMessages:{situation:"ðŸ’­ æè¿°å®Œæƒ…å†µåŽï¼Œç‚¹å‡»æ¤ç‰©æˆ–æŒ‰ç»§ç»­é”®...",thought:"ðŸŒ± å†™ä¸‹æƒ³æ³•ï¼Œçœ‹å¹¼èŠ½å¦‚ä½•ç ´åœŸè€Œå‡º...",alternative:"âœ¨ é‡æ–°æ€è€ƒæ—¶ï¼Œæ³¨æ„æ¤ç‰©çš„ç¥žå¥‡å˜åŒ–...",feeling:"ðŸŒ¸ é€‰æ‹©æƒ…ç»ªï¼Œè§è¯èŠ±æœµç»½æ”¾çš„å¥‡è¿¹..."},hintMessages:{1:"ç§å­å·²ç»ç§ä¸‹ï¼Œé™å¾…ç ´åœŸ ðŸŒ±",2:"å¹¼èŠ½ç ´åœŸè€Œå‡ºï¼Œå¸¦ç€å°–é”çš„æƒ³æ³• ðŸŒ¿",3:"æ¤ç‰©å¼€å§‹èŒå£®æˆé•¿ï¼Œå˜å¾—æ›´åŠ å¥åº· ðŸƒ",4:"èŠ±è‹žæ­£åœ¨å½¢æˆï¼Œå³å°†ç»½æ”¾ ðŸŒ¸"}}},computed:{canProceed(){switch(this.gameStage){case"situation":return this.formData.situation.trim().length>5;case"thought":return this.formData.automaticThought.trim().length>3;case"alternative":return this.formData.alternativeThought.trim().length>3;case"feeling":return null!==this.selectedEmotion;default:return!1}},currentHint(){return this.hintMessages[this.plantStage]||""},currentGuidance(){return this.guidanceMessages[this.gameStage]||""}},methods:{startJourney(){this.gameStage="situation",this.plantStage=1,this.formData.timestamp=new Date},proceedToNextStep(){if(this.canProceed)switch(this.gameStage){case"situation":this.gameStage="thought",this.plantStage=2,this.showThorns=!0;break;case"thought":this.gameStage="alternative",this.plantStage=3,this.showThorns=!1;break;case"alternative":this.gameStage="feeling",this.plantStage=4;break}},goToPreviousStep(){switch(this.gameStage){case"thought":this.gameStage="situation",this.plantStage=1,this.showThorns=!1;break;case"alternative":this.gameStage="thought",this.plantStage=2,this.showThorns=!0;break;case"feeling":this.gameStage="alternative",this.plantStage=3,this.showThorns=!1;break}},completeJourney(){this.selectedEmotion&&(this.isFullyBloomed=!0,this.showPollen=!0,this.gameStage="complete",this.saveToStore(),this.showGuidance=!1)},startNewJourney(){this.gameStage="start",this.plantStage=0,this.showThorns=!1,this.showPollen=!1,this.isFullyBloomed=!1,this.selectedEmotion=null,this.showGuidance=!0,this.formData={situation:"",automaticThought:"",alternativeThought:"",intensity:70,timestamp:null}},handlePlantInteraction(){this.canProceed&&this.proceedToNextStep()},handleSituationInput(){this.formData.situation.trim().length>10&&setTimeout((()=>{"situation"===this.gameStage&&this.proceedToNextStep()}),1500)},handleThoughtInput(){this.formData.automaticThought.trim().length>8&&setTimeout((()=>{"thought"===this.gameStage&&this.proceedToNextStep()}),1500)},handleAlternativeInput(){this.formData.alternativeThought.trim().length>8&&setTimeout((()=>{"alternative"===this.gameStage&&this.proceedToNextStep()}),1500)},selectEmotion(t){this.selectedEmotion=t,this.updateFlowerAppearance(),setTimeout((()=>{this.completeJourney()}),2e3)},updateFlowerAppearance(){},getFlowerBudImage(){return this.selectedEmotion?`/assets/images/${this.selectedEmotion.flowerType}-flower-bud.png`:"/assets/images/blue-flower-bud.png"},getFlowerBloomImage(){return this.selectedEmotion?`/assets/images/${this.selectedEmotion.flowerType}-flower-bloom.png`:"/assets/images/blue-flower-bloom.png"},getGrowthSparkleStyle(t){const e=45*t+(30*Math.random()-15),s=50+40*Math.random(),a=Math.cos(e*Math.PI/180)*s,o=Math.sin(e*Math.PI/180)*s,n=3*Math.random(),i=2+2*Math.random();return{left:`calc(50% + ${a}px)`,top:`calc(50% + ${o}px)`,animationDelay:`${n}s`,animationDuration:`${i}s`}},getPollenStyle(t){const e=24*t+(20*Math.random()-10),s=30+50*Math.random(),a=Math.cos(e*Math.PI/180)*s,o=Math.sin(e*Math.PI/180)*s,n=2*Math.random(),i=4+2*Math.random();return{left:`calc(50% + ${a}px)`,top:`calc(50% + ${o}px)`,animationDelay:`${n}s`,animationDuration:`${i}s`}},generateGardenCard(){this.showGardenCard=!0},closeGardenCard(){this.showGardenCard=!1},async downloadGardenCard(){try{if("undefined"===typeof html2canvas)return void alert("å›¾ç‰‡ç”ŸæˆåŠŸèƒ½æš‚ä¸å¯ç”¨ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•");const t=await html2canvas(this.$refs.gardenCardContent),e=document.createElement("a");e.download=`æ€ç»´èŠ±å›­_${this.formatDate(new Date)}.png`,e.href=t.toDataURL(),e.click()}catch(t){console.error("ä¿å­˜å¤±è´¥:",t),alert("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},shareGardenCard(){navigator.share?navigator.share({title:"æˆ‘çš„æ€ç»´èŠ±å›­",text:"æˆ‘åˆšåˆšå®Œæˆäº†ä¸€æ¬¡æ€ç»´æ ½åŸ¹ä¹‹æ—…ï¼",url:window.location.href}):alert("è¯·ä½¿ç”¨ä¸‹è½½åŠŸèƒ½ä¿å­˜å›¾ç‰‡åŽæ‰‹åŠ¨åˆ†äº«")},saveToStore(){const t={situation:this.formData.situation,automaticThought:this.formData.automaticThought,supportingEvidence:"",contradictoryEvidence:"",alternativeThought:this.formData.alternativeThought,emotions:this.selectedEmotion?[this.selectedEmotion.name]:[],intensity:this.formData.intensity,reevaluatedEmotions:this.selectedEmotion?[this.selectedEmotion.name]:[],newEmotionIntensity:this.formData.intensity,timestamp:this.formData.timestamp||new Date,emotion:this.selectedEmotion,flowerType:this.selectedEmotion?.flowerType,id:Date.now(),completed:!0,gardenVersion:!0};this.$store&&(this.$store.state.thoughtRecords.unshift(t),this.$store.saveState())},viewProgress(){this.$router.push("/dashboard")},formatDate(t){return t.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}}},ma=(0,L.A)(ga,[["render",ha],["__scopeId","data-v-e1e98674"]]),pa=ma,ka=(0,o.aE)({history:(0,o.LA)(),routes:[{path:"/",component:pa},{path:"/dashboard",component:hs},{path:"/config",component:M},{path:"/record",component:pt},{path:"/analysis",component:ke}]}),va={state:{apiConfig:{endpoint:"https://api.openai.com/v1/chat/completions",apiKey:"",model:"gpt-3.5-turbo"},thoughtRecords:[],selectedRecordIndex:void 0},saveState(){localStorage.setItem("cbtHelperState",JSON.stringify(this.state))},restoreState(){const t=localStorage.getItem("cbtHelperState");if(t)try{const e=JSON.parse(t);this.state={...this.state,...e,apiConfig:{...this.state.apiConfig,...e.apiConfig}}}catch(e){console.error("æ¢å¤çŠ¶æ€å¤±è´¥:",e)}},clearAll(){this.state.thoughtRecords=[],this.saveState()}};va.restoreState(),(0,n.WQ)();const ya=(0,a.Ef)(C);ya.use(ka),ya.config.globalProperties.$store=va,ya.component("SpeedInsights",i.b),ya.mount("#app")}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,(()=>{var t=[];s.O=(e,a,o,n)=>{if(!a){var i=1/0;for(d=0;d<t.length;d++){for(var[a,o,n]=t[d],l=!0,r=0;r<a.length;r++)(!1&n||i>=n)&&Object.keys(s.O).every((t=>s.O[t](a[r])))?a.splice(r--,1):(l=!1,n<i&&(i=n));if(l){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,o,n]}})(),(()=>{s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{s.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{s.p="/"})(),(()=>{var t={524:0};s.O.j=e=>0===t[e];var e=(e,a)=>{var o,n,[i,l,r]=a,c=0;if(i.some((e=>0!==t[e]))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(r)var d=r(s)}for(e&&e(a);c<i.length;c++)n=i[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},a=self["webpackChunkcbthelper"]=self["webpackChunkcbthelper"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],(()=>s(138)));a=s.O(a)})();
//# sourceMappingURL=app.3006fd28.js.map